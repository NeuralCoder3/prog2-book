<!DOCTYPE html>
<html lang="en-US">
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="noindex, nofollow">
</head>
<body class="ignore-math">
<h3 class="heading"><span class="type">Paragraph</span></h3>
<div class="para logical">
<div class="para">To realize this behavior, we change our definition of the state to contain a <em class="emphasis">stack</em> of variable assignments. When entering the block, a new variable assignment that contains all variables declared in that block will be put on the stack. When leaving the block, the corresponding variable assignment will we removed from the stack. To be able to detect the end of the block in the semantics, we add the statement <span class="process-math">\(\cleave\)</span> to the abstract syntax. This syntactical construct is artificial and only used in the semantics. The programmer cannot use it in their programs. Additionally, when entering a block, we also need to provision new containers for the local variables. This is done by the new rule [Scope].</div>
<div class="displaymath process-math">
\begin{equation*}
\config{\CSeq{\CBlock{k_1\ x_1; \dots k_m\ x_m; p_1}}p_2}{\rho_1,\dots,\rho_k;\mu}\steprel
\config{\CConcat{p_1}{\CSeq{\cleave}{p_2}}}{\rho_1,\dots,\rho_k,\rho_{k+1};\mu'}\quad\text{[Scope]}
\end{equation*}
</div>
<div class="para">with</div>
<div class="displaymath process-math">
\begin{align*}
\rho_{k+1}\amp=\{x_1\mapsto a_1,\dots,x_m\mapsto a_m\}\\
\mu'      \amp=\mu[a_1\mapsto \indetval,\dots,a_m\mapsto \indetval]\\
\emptyset \amp=\{a_1,\dots,a_m\}\cap\domain\mu
\end{align*}
</div>
<div class="para">The third condition states that the addressesÂ <span class="process-math">\(a_i\)</span> need to be fresh: They must not exist in the memory assignment.</div>
</div>
<span class="incontext"><a href="sec-c0-scopes.html#p-694" class="internal">in-context</a></span>
</body>
</html>
