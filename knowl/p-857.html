<!DOCTYPE html>
<html lang="en-US">
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="noindex, nofollow">
</head>
<body class="ignore-math">
<h4 class="heading"><span class="type">Paragraph</span></h4>
<div class="para logical">
<div class="para">Sketch. By induction over <span class="process-math">\(s\text{.}\)</span> The assignment and empty block case are trivial; just put in the definition of <span class="process-math">\(\hpc\)</span> and <span class="process-math">\(\hvc\)</span> into the rule of the theorem and we get the empty block and assignment rules from <a href="sec-corr-hoare.html#sec-corr-hoare-logic" class="internal" title="Subsection 7.4.1: Hoare Logic">Subsection 7.4.1</a>. We'll show the if-then-else and while case here.</div>
<ul class="disc">
<li><div class="para">if-then-else: <span class="process-math">\(s=\CIf e{s_1}{s_2}\text{.}\)</span> By induction, we have that the rules for <span class="process-math">\(s_1\)</span> and <span class="process-math">\(s_2\)</span> are sound. Hence, we can derive the hoare triple in question:<div class="displaymath process-math">
\begin{equation*}
\begin{prooftree}
\AxiomC{$\hvc s_1\,Q$}
\UnaryInfC{$\vdash\hoare{\hpc {s_1}\,Q}{s_1}{Q}$}
\LeftLabel{[Conseq]$\qquad\quad$}
\UnaryInfC{$\vdash\hoare{e\land\hpc {s}\,Q}{s_1}{Q}$}
\AxiomC{$\hvc s_2\,Q$}
\UnaryInfC{$\vdash\hoare{\hpc {s_2}\,Q}{s_2}{Q}$}
\RightLabel{[Conseq]}
\UnaryInfC{$\vdash\hoare{\neg e\land\hpc {s}\,Q}{s_2}{Q}$}
\LeftLabel{[If]}
\BinaryInfC{$\vdash\hoare{\hpc s\,Q}s{Q}$}
\end{prooftree}
\end{equation*}
</div>Using the consequence rule, we strengthen the preconditions of <span class="process-math">\(s_1\)</span> and <span class="process-math">\(s_2\)</span> accordingly. <span class="process-math">\(\hpc s\,Q\)</span> is now defined such that <span class="process-math">\(e\land\hpc s\,Q\Rightarrow\hpc {s_1}\,Q\)</span> and <span class="process-math">\(\neg e\land\hpc s\,Q\Rightarrow\hpc {s_2}\,Q\text{.}\)</span> The verification conditions that are needed to justify this derivation are just the ones of <span class="process-math">\(s_1\)</span> and <span class="process-math">\(s_2\text{,}\)</span> so <span class="process-math">\(\hvc s\,Q=(\hvc {s_1}\,Q)\cup (\hvc {s_2}\,Q)\)</span>
</div></li>
<li><div class="para">The while loop <span class="process-math">\(\CWhileInv esI\text{:}\)</span> We need to prove that <span class="process-math">\(\vdash\hoare {\hpc \denot{\CWhileInv esI}\,Q}{\CWhileInv esI}Q\)</span> with <span class="process-math">\(\hpc s\,Q=I\text{.}\)</span> By induction, we have that the rule<div class="displaymath process-math">
\begin{equation*}
\begin{prooftree}
\AxiomC{$\hvc s\,I$}
\UnaryInfC{$\vdash\hoare{\hpc s\,I}sI$}
\end{prooftree}
\end{equation*}
</div>is sound. We use this to derive our proof goal using the following derivation:<div class="displaymath process-math">
\begin{equation*}
\begin{prooftree}
\AxiomC{$I\land e\limp\hpc s\,I$}
\AxiomC{$\hvc s\,I$}
\UnaryInfC{$\vdash\hoare{\hpc s\,I}sI$}
\LeftLabel{[Conseq]$\qquad\quad$}
\BinaryInfC{$\vdash\hoare{I\land e}sI$}
\LeftLabel{[While]}
\UnaryInfC{$\vdash\hoare I{\CWhileInv esI}{\neg e\land I}$}
\AxiomC{$\neg e\land I\limp Q$}
\LeftLabel{[Conseq]$\qquad\quad$}
\BinaryInfC{$\vdash\hoare I{\CWhileInv esI}Q$}
\end{prooftree}
\end{equation*}
</div>In that derivation, we used the consequence rule twice and generate two additional verification conditions: <span class="process-math">\(I\land e\limp\hpc s\,I\)</span> and <span class="process-math">\(\neg e\land I\limp Q\)</span> which is reflected in the definition of <span class="process-math">\(\hvc\text{.}\)</span>
</div></li>
</ul>
</div>
<span class="incontext"><a href="sec-corr-hoare.html#p-857" class="internal">in-context</a></span>
</body>
</html>
