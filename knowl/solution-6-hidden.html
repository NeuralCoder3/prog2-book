<!DOCTYPE html>
<html lang="en-US">
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="noindex, nofollow">
</head>
<body class="ignore-math"><div class="solution solution-like"><div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">#include &lt;stdlib.h&gt;
#include &lt;assert.h&gt;

#include "poly.h"

struct poly_t {
    unsigned degree;
    int *coeffs;
};

poly_t *poly_alloc(unsigned degree) {
    poly_t *p = malloc(sizeof(*p));
    p-&gt;degree = degree;
    p-&gt;coeffs = malloc((degree + 1)
              * sizeof(p-&gt;coeffs[0]));
    return p;
}

void poly_free(poly_t *p) {
    free(p-&gt;coeffs);
    free(p);
}

void poly_set_coeff(poly_t *p, unsigned i,
                    int val) {
    assert(i &lt;= p-&gt;degree);
    p-&gt;coeffs[i] = val;
}

int poly_eval(poly_t const *p, int x) {
    int res = p-&gt;coeffs[0];
    for (unsigned i = 1; i &lt;= p-&gt;degree; i++)
        res = res * x + p-&gt;coeffs[i];
    return res;
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=%23include%20%3Cstdlib.h%3E%0A%23include%20%3Cassert.h%3E%0A%0A%23include%20%22poly.h%22%0A%0Astruct%20poly_t%20%7B%0A%20%20%20%20unsigned%20degree%3B%0A%20%20%20%20int%20*coeffs%3B%0A%7D%3B%0A%0Apoly_t%20*poly_alloc(unsigned%20degree)%20%7B%0A%20%20%20%20poly_t%20*p%20%3D%20malloc(sizeof(*p))%3B%0A%20%20%20%20p-%3Edegree%20%3D%20degree%3B%0A%20%20%20%20p-%3Ecoeffs%20%3D%20malloc((degree%20%2B%201)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20*%20sizeof(p-%3Ecoeffs%5B0%5D))%3B%0A%20%20%20%20return%20p%3B%0A%7D%0A%0Avoid%20poly_free(poly_t%20*p)%20%7B%0A%20%20%20%20free(p-%3Ecoeffs)%3B%0A%20%20%20%20free(p)%3B%0A%7D%0A%0Avoid%20poly_set_coeff(poly_t%20*p%2C%20unsigned%20i%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20int%20val)%20%7B%0A%20%20%20%20assert(i%20%3C%3D%20p-%3Edegree)%3B%0A%20%20%20%20p-%3Ecoeffs%5Bi%5D%20%3D%20val%3B%0A%7D%0A%0Aint%20poly_eval(poly_t%20const%20*p%2C%20int%20x)%20%7B%0A%20%20%20%20int%20res%20%3D%20p-%3Ecoeffs%5B0%5D%3B%0A%20%20%20%20for%20(unsigned%20i%20%3D%201%3B%20i%20%3C%3D%20p-%3Edegree%3B%20i%2B%2B)%0A%20%20%20%20%20%20%20%20res%20%3D%20res%20*%20x%20%2B%20p-%3Ecoeffs%5Bi%5D%3B%0A%20%20%20%20return%20res%3B%0A%7D%0A">Run</a>
</div></div></body>
</html>
