<!DOCTYPE html>
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<html lang="en-US">
<head xmlns:og="http://ogp.me/ns#" xmlns:book="https://ogp.me/ns/book#">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Hashing</title>
<meta name="Keywords" content="Authored in PreTeXt">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta property="og:type" content="book">
<meta property="book:title" content="An Introduction to Imperative Programming">
<meta property="book:author" content="Sebastian Hack">
<meta property="og:image" content="https://www.dropbox.com/s/c23qqtukzq2niqg/eule.png?raw=1">
<meta property="og:title" content="Hashing">
<meta property="og:description" content="
      In this section, we discuss several simple data structures and their implementation in¬†C.
      We start with various list implementations, via arrays and pointer structures.
      Then, we briefly discuss binary trees.
    ">
<meta property="og:type" content="website">
<script>var runestoneMathReady = new Promise((resolve) => window.rsMathReady = resolve);
window.MathJax = {
  tex: {
    inlineMath: [['\\(','\\)']],
    tags: "none",
    tagSide: "right",
    tagIndent: ".8em",
    packages: {'[+]': ['base', 'mathtools', 'bussproofs', 'unicode', 'extpfeil', 'ams', 'amscd', 'color', 'newcommand', 'knowl']}
  },
  options: {
    ignoreHtmlClass: "tex2jax_ignore|ignore-math",
    processHtmlClass: "process-math",
  },
  chtml: {
    scale: 0.98,
    mtextInheritFont: true
  },
  loader: {
    load: ['input/asciimath', '[tex]/mathtools', '[tex]/bussproofs', '[tex]/unicode','[tex]/extpfeil', '[tex]/amscd', '[tex]/color', '[tex]/newcommand', '[pretext]/mathjaxknowl3.js'],
    paths: {pretext: "https://pretextbook.org/js/lib"},
  },
  startup: {
    pageReady() {
      return MathJax.startup.defaultPageReady().then(function () {
      console.log("in ready function");
      rsMathReady();
      }
    )}
  },
};
</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/themes/prism.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-core.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/plugins/autoloader/prism-autoloader.min.js"></script><script src="https://unpkg.com/lunr/lunr.js"></script><script src="lunr-pretext-search-index.js" async=""></script><script src="https://pretextbook.org/js/0.2/pretext_search.js"></script><link href="https://pretextbook.org/css/0.6/pretext_search.css" rel="stylesheet" type="text/css">
<script>js_version = 0.2</script><script src="https://pretextbook.org/js/lib/jquery.min.js"></script><script src="https://pretextbook.org/js/lib/jquery.sticky.js"></script><script src="https://pretextbook.org/js/lib/jquery.espy.min.js"></script><script src="https://pretextbook.org/js/0.2/pretext.js"></script><script>miniversion=0.1</script><script src="https://pretextbook.org/js/0.2/pretext_add_on.js?x=1"></script><script src="https://pretextbook.org/js/0.2/user_preferences.js"></script><script src="https://pretextbook.org/js/lib/knowl.js"></script><!--knowl.js code controls Sage Cells within knowls--><script>sagecellEvalName='Evaluate (Sage)';
</script><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&amp;family=Noto+Serif:ital,wght@0,400;0,700;1,400;1,700&amp;family=Tinos:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet">
<link href="https://fonts.cdnfonts.com/css/dejavu-serif" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Roboto+Serif:opsz,wdth,wght@8..144,50..150,100..900&amp;display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wdth,wght@75..100,300..800&amp;display=swap" rel="stylesheet">
<link href="https://pretextbook.org/css/0.6/pretext.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/pretext_add_on.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/shell_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/banner_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/navbar_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/toc_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/knowls_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/style_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/colors_blue_red.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/setcolors.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="external/custom.css">
<link rel="stylesheet" type="text/css" href="external/prism-line-numbers.css">
<script src="external/preload.js"></script><!--** eBookCongig is necessary to configure interactive       **-->
<!--** Runestone components to run locally in reader's browser **-->
<!--** No external communication:                              **-->
<!--**     log level is 0, Runestone Services are disabled     **-->
<script type="text/javascript">
eBookConfig = {};
eBookConfig.useRunestoneServices = false;
eBookConfig.host = 'http://127.0.0.1:8000';
eBookConfig.course = 'PTX_Course_Title_Here';
eBookConfig.basecourse = 'PTX_Base_Course';
eBookConfig.isLoggedIn = false;
eBookConfig.email = '';
eBookConfig.isInstructor = false;
eBookConfig.logLevel = 0;
eBookConfig.username = '';
eBookConfig.readings = null;
eBookConfig.activities = null;
eBookConfig.downloadsEnabled = false;
eBookConfig.allow_pairs = false;
eBookConfig.enableScratchAC = false;
eBookConfig.build_info = "";
eBookConfig.python3 = null;
eBookConfig.runestone_version = '7.3.3';
eBookConfig.jobehost = '';
eBookConfig.proxyuri_runs = '';
eBookConfig.proxyuri_files = '';
eBookConfig.enable_chatcodes =  false;
</script>
<!--*** Runestone Services ***-->
<script type="text/javascript" src="./external/dist/runtime.482e6203cf96ba73.bundle.js"></script><link rel="stylesheet" type="text/css" href="./external/dist/637.0fa6cababf056764.css">
<script type="text/javascript" src="./external/dist/637.d54be67956c5c660.bundle.js"></script><link rel="stylesheet" type="text/css" href="./external/dist/runestone.3eb60bc006ae9a54.css">
<script type="text/javascript" src="./external/dist/runestone.ecc6dff5cad8b815.bundle.js"></script><script src="external/custom.js"></script><script src="external/prism-line-numbers.js"></script>
</head>
<body class="pretext book ignore-math">
<a class="assistive" href="#ptx-content">Skip to main content</a><header id="ptx-masthead"><div class="ptx-banner">
<a id="logo-link" href="https://prog2.de/book" target="_blank"><img src="external/img/eule.png" alt="Logo image"></a><div class="title-container">
<h1 class="heading"><a href="prog2-book.html"><span class="title">An Introduction to Imperative Programming</span></a></h1>
<p class="byline">Sebastian Hack</p>
</div>
<div id="searchresultsplaceholder" style="display: none">
<button id="closesearchresults" onclick="document.getElementById('searchresultsplaceholder').style.display = 'none'; return false;">x</button><h2>Search Results: <span id="searchterms"></span>
</h2>
<div id="searchempty"><span>No results.</span></div>
<ol id="searchresults"></ol>
</div>
</div></header><nav id="ptx-navbar" class="navbar"><button class="toc-toggle button" aria-label="Show or hide table of contents"><span class="icon">‚ò∞</span><span class="name">Contents</span></button><a class="index-button button" href="index-1.html" title="Index"><span class="name">Index</span></a><button id="user-preferences-button" class="user-preferences-button button" title="Modify user preferences"><span id="theavatarbutton" class="name">You!</span><div id="preferences_menu_holder" class="hidden"><ol id="preferences_menu" style="font-family: 'Roboto Serif', serif;">
<li data-env="avatar" tabindex="-1">Choose avatar<div class="wrap_to_submenu"><span class="to_submenu">‚ñª</span></div>
<ol class="hidden avatar">
<li data-val="You!" tabindex="-1">
<span id="theYou!" class="avatarcheck">‚úîÔ∏è</span>You!</li>
<li data-val="üò∫" tabindex="-1">
<span id="theüò∫" class="avatarcheck"></span>üò∫</li>
<li data-val="üë§" tabindex="-1">
<span id="theüë§" class="avatarcheck"></span>üë§</li>
<li data-val="üëΩ" tabindex="-1">
<span id="theüëΩ" class="avatarcheck"></span>üëΩ</li>
<li data-val="üê∂" tabindex="-1">
<span id="theüê∂" class="avatarcheck"></span>üê∂</li>
<li data-val="üêº" tabindex="-1">
<span id="theüêº" class="avatarcheck"></span>üêº</li>
<li data-val="üåà" tabindex="-1">
<span id="theüåà" class="avatarcheck"></span>üåà</li>
</ol>
</li>
<li data-env="fontfamily" tabindex="-1">Font family<div class="wrap_to_submenu"><span class="to_submenu">‚ñª</span></div>
<ol class="hidden fontfamily">
<li data-val="face" data-change="OS" tabindex="-1" style="font-family: 'Open Sans'">
<span id="theOS" class="ffcheck">‚úîÔ∏è</span><span class="name">Open Sans</span><span class="sample">AaBbCc 123 PreTeXt</span>
</li>
<li data-val="face" data-change="RS" tabindex="-1" style="font-family: 'Roboto Serif'">
<span id="theRS" class="ffcheck"></span><span class="name">Roboto Serif</span><span class="sample">AaBbCc 123 PreTeXt</span>
</li>
</ol>
</li>
<li data-env="font" tabindex="-1">Adjust font<div class="wrap_to_submenu"><span class="to_submenu">‚ñª</span></div>
<ol class="hidden fonts">
<li>Size</li>
<li><span id="thesize">12</span></li>
<li data-val="size" data-change="-1" tabindex="-1" style="font-size: 80%">Smaller</li>
<li data-val="size" data-change="1" tabindex="-1" style="font-size: 110%">Larger</li>
<li>Width</li>
<li><span id="thewdth">100</span></li>
<li data-val="wdth" data-change="-5" tabindex="-1" style="font-variation-settings: 'wdth' 60">narrower</li>
<li data-val="wdth" data-change="5" tabindex="-1" style="font-variation-settings: 'wdth' 150">wider</li>
<li>Weight</li>
<li><span id="thewght">400</span></li>
<li data-val="wght" data-change="-50" tabindex="-1" style="font-weight: 200">thinner</li>
<li data-val="wght" data-change="50" tabindex="-1" style="font-weight: 700">heavier</li>
<li>Letter spacing</li>
<li>
<span id="thelspace">0</span><span class="byunits">/200</span>
</li>
<li data-val="lspace" data-change="-1" tabindex="-1">closer</li>
<li data-val="lspace" data-change="1" tabindex="-1">f a r t h e r</li>
<li>Word spacing</li>
<li>
<span id="thewspace">0</span><span class="byunits">/50</span>
</li>
<li data-val="wspace" data-change="-1" tabindex="-1">smaller‚ÄÖgap‚ÄÉ</li>
<li data-val="wspace" data-change="1" tabindex="-1">larger‚ÄÉgap</li>
<li>Line Spacing</li>
<li>
<span id="theheight">135</span><span class="byunits">/100</span>
</li>
<li data-val="height" data-change="-5" tabindex="-1" style="line-height: 1">closer<br>together</li>
<li data-val="height" data-change="5" tabindex="-1" style="line-height: 1.75">further<br>apart</li>
</ol>
</li>
<li data-env="atmosphere" tabindex="-1">Light/dark mode<div class="wrap_to_submenu"><span class="to_submenu">‚ñª</span></div>
<ol class="hidden atmosphere">
<li data-val="default" tabindex="-1">
<span id="thedefault" class="atmospherecheck">‚úîÔ∏è</span>default</li>
<li data-val="pastel" tabindex="-1">
<span id="thepastel" class="atmospherecheck"></span>pastel</li>
<li data-val="darktwilight" tabindex="-1">
<span id="thedarktwilight" class="atmospherecheck"></span>twilight</li>
<li data-val="dark" tabindex="-1">
<span id="thedark" class="atmospherecheck"></span>dark</li>
<li data-val="darkmidnight" tabindex="-1">
<span id="thedarkmidnight" class="atmospherecheck"></span>midnight</li>
</ol>
</li>
<li data-env="ruler" tabindex="-1">Reading ruler<div class="wrap_to_submenu"><span class="to_submenu">‚ñª</span></div>
<ol class="hidden ruler">
<li data-val="none" tabindex="-1">
<span id="thenone" class="rulercheck">‚úîÔ∏è</span>none</li>
<li data-val="underline" tabindex="-1">
<span id="theunderline" class="rulercheck"></span>underline</li>
<li data-val="lunderline" tabindex="-1">
<span id="thelunderline" class="rulercheck"></span>L-underline</li>
<li data-val="greybar" tabindex="-1">
<span id="thegreybar" class="rulercheck"></span>grey bar</li>
<li data-val="lightbox" tabindex="-1">
<span id="thelightbox" class="rulercheck"></span>light box</li>
<li data-val="sunrise" tabindex="-1">
<span id="thesunrise" class="rulercheck"></span>sunrise</li>
<li data-val="sunriseunderline" tabindex="-1">
<span id="thesunriseunderline" class="rulercheck"></span>sunrise underline</li>
<li class="moveQ">Motion by:</li>
<li data-val="mouse" tabindex="-1">
<span id="themouse" class="motioncheck">‚úîÔ∏è</span>follow the mouse</li>
<li data-val="arrow" tabindex="-1">
<span id="thearrow" class="motioncheck"></span>up/down arrows - not yet</li>
<li data-val="eye" tabindex="-1">
<span id="theeye" class="motioncheck"></span>eye tracking - not yet</li>
</ol>
</li>
</ol></div></button><span class="treebuttons"><input xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" id="toggle" name="darkmode" class="toggle save-cb-state" type="checkbox"><a class="previous-button button" href="sec-ds-trees.html" title="Previous"><span class="icon">&lt;</span><span class="name">Prev</span></a><a class="up-button button" href="sec-c-ds.html" title="Up"><span class="icon">^</span><span class="name">Up</span></a><a class="next-button button" href="sec-ds-dynpro.html" title="Next"><span class="name">Next</span><span class="icon">&gt;</span></a></span><div class="searchbox"><div class="searchwidget">
<input id="ptxsearch" type="text" name="terms" placeholder="Search" onchange="doSearch()"><button id="searchbutton" type="button" onclick="doSearch()">üîç</button>
</div></div></nav><div id="latex-macros" class="hidden-content process-math" style="display:none"><span class="process-math">\(\newcommand{\powerset}[1]{\mathcal{P}(#1)}
\def\domain{\operatorname{dom}}
\def\codomain{\operatorname{cod}}
\def\funimage{\operatorname{img}}
\def\defeq{\coloneqq}
\def\eqdef{\eqqcolon}
\def\syndef{\Coloneqq}
\def\simp{\Rightarrow}


\newcommand{\edist}{\mathit{edist}}


\newcommand{\rd}{\$d}
\newcommand{\rs}{\$s}
\newcommand{\rt}{\$t}
\newcommand{\lo}{\mathit{lo}}
\newcommand{\hi}{\mathit{hi}}
\newcommand{\pc}{\mathit{pc}}
\newcommand{\shamt}{\mathit{n}}
\newcommand{\offset}{i}
\newcommand{\marke}{\mathit{label}}
\newcommand{\addr}{\mathit{addr}}
\newcommand{\imm}{\mathit{imm}}
\newcommand{\sext}{\mathrm{se}}
\newcommand{\zext}{\mathrm{ze}}
\newcommand{\sei}{\sext(i)}
\newcommand{\zei}{\zext(i)}
\newcommand{\bft}[2]{[#1:#2]}
\newcommand{\ite}[3]{\mathop{\mathit{if}}\,{#1}\mathrel{\mathit{then}}{#2}\mathrel{\mathit{ else }}{#3}}
\newcommand{\cbranch}{\mathit{cbr}}


\newcommand{\Nat}        {\mathbb{N}}
\newcommand{\Int}        {\mathbb{Z}}
\newcommand{\Bit}        {\mathbb{B}}
\newcommand{\bbase}      {B}
\newcommand{\bnine}      {A}
\newcommand{\bneg}   [1] {\overline{#1}}
\newcommand{\band}       {\mathrel{\&amp;}}
\newcommand{\bor}        {\mathrel{|}}
\newcommand{\bxor}       {\mathrel{\hat{\phantom{+}}}}
\newcommand{\badd}       {\mathrel{+}}
\newcommand{\blts}       {\mathrel{\lt_s}}
\newcommand{\bltu}       {\mathrel{\lt_u}}
\newcommand{\baddn}      {\mathrel{+_n}}
\newcommand{\bsubn}      {\mathrel{-_n}}
\newcommand{\bsll}       {\mathrel{\ll}}
\newcommand{\bsrl}       {\mathrel{\gg}}
\newcommand{\bsra}       {\mathrel{\overset s\gg}}
\newcommand{\bconcat}    {\,}
\newcommand{\bseqq}  [2] {{#1}_{#2}\dots {#1}_0}
\newcommand{\bseq}   [2] {{#1}_{#2-1}\dots {#1}_0}
\newcommand{\bsintp} [1] {[#1]}
\newcommand{\buintp} [1] {\langle #1\rangle}
\newcommand{\buintpb}[2] {\buintp{#1}_{#2}}



\def\Var{\mathit{Var}}
\def\Val{\mathit{Val}}
\def\Addr{\mathit{Addr}}
\def\Expr{\mathit{Expr}}
\def\LExpr{\mathit{LExpr}}
\def\ExprS{\mathit{ExprS}}
\def\Stmt{\mathit{Stmt}}
\def\Prg{\mathit{Prg}}
\def\Conf{\mathit{Conf}}
\def\Ty{\mathit{Ty}}
\def\Assert{\mathit{Assert}}

\newcommand{\TWhile}{\mathtt{While}}
\newcommand{\TIf}{\mathtt{If}}
\newcommand{\TBlock}{\mathtt{Block}}
\newcommand{\TAssign}{\mathtt{Assign}}
\newcommand{\TAbort}{\mathtt{Abort}}
\newcommand{\TVar}{\mathtt{Var}}
\newcommand{\TConst}{\mathtt{Const}}
\newcommand{\TBinary}{\mathtt{Binary}}
\newcommand{\TAddrOf}{\mathtt{Addr}}
\newcommand{\TIndir}{\mathtt{Indir}}
\newcommand{\TSeq}{\mathtt{Seq}}
\newcommand{\TTerm}{\mathtt{Term}}
\newcommand{\TCrash}{\mathtt{Crash}}

\newcommand{\AIf}[3]{\TIf\left[#1,#2,#3\right]}
\newcommand{\AWhile}[2]{\TWhile\left[#1,#2\right]}
\newcommand{\ABlock}[2]{\TBlock_{#1}\left[#2\right]}
\newcommand{\AAssign}[2]{\TAssign\left[#1,#2\right]}
\newcommand{\AAbort}{\TAbort}
\newcommand{\ASeq}[2]{\TSeq\left[#1,#2\right]}
\newcommand{\ATerm}{\TTerm}
\newcommand{\ACrash}{\TCrash}

\newcommand{\AVar}[1]{\mathtt{Var}_{#1}}
\newcommand{\ALVal}[1]{\mathtt{LVal}\left[#1\right]}
\newcommand{\AConst}[1]{\TConst_{#1}}
\newcommand{\ABinary}[3]{\TBinary_{#1}\left[#2,#3\right]}
\newcommand{\AAddrOf}[1]{\TAddrOf\left[#1\right]}
\newcommand{\AIndir}[1]{\TIndir\left[#1\right]}

\newcommand{\CIf}[3]{\mathtt{if}\,(#1)\,#2\,\mathtt{else}\,#3}
\newcommand{\CWhile}[2]{\mathtt{while}\,(#1)\,#2}
\newcommand{\CWhileInv}[3]{\mathtt{while}\,(#1)\,\mathtt{\_Inv}(#3)\,#2}
\newcommand{\CBlock}[1]{\{#1\}}
\newcommand{\CAssign}[2]{#1=#2;}
\newcommand{\CAbort}{\mathtt{abort();}}
\newcommand{\CBinary}[3]{#2\mathop{#1}#3}
\newcommand{\CAddrOf}[1]{\&amp;#1}
\newcommand{\CIndir}[1]{*#1}
\newcommand{\CSeq}[2]{{#1}\ {#2}}
\newcommand{\CTerm}{\varepsilon}
\newcommand{\CCrash}{\Lightning}
\newcommand{\CConcat}[2]{#1\mathop{+\!+}#2}
\newcommand{\CAssert}[1]{\mathtt{assert}(#1)}
\newcommand{\CAssume}[1]{\mathtt{assume}(#1)}
\newcommand{\CPtr}[1]{#1*}
\newcommand{\CAssnVV}[2]{\CAssign{\CVar #1}{\CVar #2}}
\newcommand{\CAssnVC}[2]{\CAssign{\CVar #1}{\CConst #2}}

\newcommand{\CSeqThree}[3]{\CSeq{#1}{\CSeq{#2}{#3}}}
\newcommand{\CSeqFour}[4]{\CSeq{#1}{\CSeqThree{#2}{#3}{#4}}}

\newcommand{\COp}[1]{\mathbin{\mathtt{#1}}}
\newcommand{\CVar}[1]{\mathtt{#1}}
\newcommand{\CConst}[1]{\mathtt{#1}}
\newcommand{\CPrg}[1]{\texttt{#1}}
\newcommand{\CInt}{\mathtt{int}}
\newcommand{\CChar}{\mathtt{char}}
\newcommand{\CVoid}{\mathtt{void}}

\newcommand{\tptr}[1]{#1\texttt{*}}
\def\pto{\rightharpoonup}
\def\steprel{\rightarrow}
\def\terminates{\mathrel{\downarrow}}
\newcommand\config[2]{\langle#1\mid #2\rangle}
\newcommand\configt[1]{\config{\CTerm}{#1}}
\def\castrel{\leftrightarrow}

\newcommand{\stmtjudge}[2]{{#1}\mathrel{\vdash}{#2}}
\newcommand{\stmtGamma}[1]{\stmtjudge{\Gamma}{#1}}
\newcommand{\typejudge}[3]{{#1}\mathrel{\vdash}{#2}\mathrel{:}{#3}}
\newcommand{\typeGamma}[2]{\typejudge{\Gamma}{#1}{#2}}


\newcommand{\codeE}[5]{\mathit{#1}\enspace #2\enspace #3\enspace #4 = #5}
\newcommand{\codeR}[3]{\codeE{codeR}{\mathit{offs}}{#1}{#2}{#3}}
\newcommand{\codeL}[3]{\codeE{codeL}{\mathit{offs}}{#1}{#2}{#3}}
\newcommand{\codeSO}[3]{\mathit{codeS}\enspace #1\enspace #2 = #3}
\newcommand{\codeS}[2]{\mathit{codeS}\enspace \mathit{offs}\enspace #1 = #2}
\newcommand{\codePO}[3]{\mathit{codeP}\enspace #1\enspace #2 = #3}
\newcommand{\codeP}[2]{\mathit{codeP}\enspace \mathit{offs}\enspace #1 = #2}

\newcommand{\mreg}[1]{\mathtt{\$#1}}
\newcommand{\lcc}{\mathbin{::}}
\def\rsl{r_1\lcc rs}
\def\rsls{r_1\lcc r_2\lcc rs}
\def\rlist{r\lcc{rs}}


\ifdefined\isLatex
  \def\adra{\bigtriangleup}
  \def\adrb{\pentagon}
  \def\adrc{\diamond}
  \def\adrd{\bigtriangledown}
  \def\adre{\bigstar}
  \def\adrf{\male}
  \def\adrg{\female}
  \let\oldLightning\Lightning
  \renewcommand{\Lightning}{\text{\oldLightning}}
  
  \newcommand{\denot}[1]{\llbracket {#1} \rrbracket}

\else
  \def\adra{\unicode{x25b3}}
  \def\adrb{\unicode{x2b20}}
  \def\adrc{\unicode{x25c7}}
  \def\adrd{\unicode{x25bd}}
  \def\adre{\unicode{x2605}}
  \def\adrf{\unicode{x2642}}
  \def\adrg{\unicode{x2640}}

  \def\Lightning{\unicode{x21af}}
  
  \newcommand{\denot}[1]{[\![{#1}]\!]}
\fi

\newcommand{\denotL}[1]{L\denot{#1}}
\newcommand{\denotR}[1]{R\denot{#1}}
\newcommand{\indetval}{\mathord{?}}


\def\adra{\bigtriangleup}
\def\adrb{\bigcirc}
\def\adrc{\lozenge}
\def\adrd{\bigtriangledown}
\def\adre{\bigstar}
\def\adrf{\dagger}
\def\adrg{\ddagger}

\newcommand{\cleave}{\mathbin{\blacksquare}}





\def\models{\vDash}
\def\limp{\Rightarrow}
\def\liff{\Leftrightarrow}
\def\lneg{\neg}
\def\bigstep{\mathrel{\Downarrow}}
\def\ltrue{\mathit{true}}
\def\lfalse{\mathit{false}}
\def\exprdef{\operatorname{def}}
\newcommand{\hpc}{\operatorname{pc}}
\newcommand{\hvc}{\operatorname{vc}}
\newcommand{\amodels}[1]{M\denot{#1}}
\newcommand{\hoare}[3]{\{#1\}\mathrel{#2}\{#3\}}
\newcommand{\hoaret}[3]{[#1]\mathrel{#2}[#3]}            
\newcommand{\passingt}[1]{{#1}_\checkmark}
\newcommand{\failingt}[1]{{#1}_\times}
\newcommand{\passing}{\passingt\sigma}
\newcommand{\failing}{\failingt\sigma}
\newcommand{\slabel}[1]{\mathit{lab}}


\newcommand{\subtyperel} {\mathrel{\le}}
\newcommand{\prgltr}{s}
\newcommand{\lt}{&lt;}
\newcommand{\gt}{&gt;}
\newcommand{\amp}{&amp;}
\definecolor{fillinmathshade}{gray}{0.9}
\newcommand{\fillinmath}[1]{\mathchoice{\colorbox{fillinmathshade}{$\displaystyle     \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\textstyle        \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\scriptstyle      \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\scriptscriptstyle\phantom{\,#1\,}$}}}
\)</span></div>
<div class="ptx-page">
<div id="ptx-sidebar"><nav id="ptx-toc" class="depth2"><ul class="structural">
<li>
<div class="toc-item"><a href="frontmatter.html" class="internal"><span class="title">Front Matter</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="colophon-1.html" class="internal"><span class="title">Colophon</span></a></div></li>
<li><div class="toc-item"><a href="preface.html" class="internal"><span class="title">Preface</span></a></div></li>
<li><div class="toc-item"><a href="acknowledgement-1.html" class="internal"><span class="title">Acknowledgements</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-arith.html" class="internal"><span class="codenumber">1</span> <span class="title">Computer Arithmetic</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-arith-positional.html" class="internal"><span class="codenumber">1.1</span> <span class="title">Positional Notation</span></a></div></li>
<li><div class="toc-item"><a href="sec-arith-binary.html" class="internal"><span class="codenumber">1.2</span> <span class="title">Binary Numbers</span></a></div></li>
<li><div class="toc-item"><a href="sec-arith-add.html" class="internal"><span class="codenumber">1.3</span> <span class="title">Addition and Subtraction</span></a></div></li>
<li><div class="toc-item"><a href="sec-arith-int.html" class="internal"><span class="codenumber">1.4</span> <span class="title">The Integers</span></a></div></li>
<li><div class="toc-item"><a href="section-5.html" class="internal"><span class="codenumber">1.5</span> <span class="title">Shifts</span></a></div></li>
<li><div class="toc-item"><a href="section-6.html" class="internal"><span class="codenumber">1.6</span> <span class="title">Summary</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-asm.html" class="internal"><span class="codenumber">2</span> <span class="title">Machine Code</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-asm-neumann.html" class="internal"><span class="codenumber">2.1</span> <span class="title">The von-Neumann Architecture</span></a></div></li>
<li><div class="toc-item"><a href="sec-asm-mips.html" class="internal"><span class="codenumber">2.2</span> <span class="title">The MIPS Processor</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-asm-asm.html" class="internal"><span class="codenumber">2.3</span> <span class="title">The Assembler</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-asm-asm.html#subsection-1" class="internal"><span class="codenumber">2.3.1</span> <span class="title">Overview</span></a></div></li>
<li><div class="toc-item"><a href="sec-asm-asm.html#subsection-2" class="internal"><span class="codenumber">2.3.2</span> <span class="title">An Example</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-asm-trace.html" class="internal"><span class="codenumber">2.4</span> <span class="title">Execution Traces</span></a></div></li>
<li><div class="toc-item"><a href="sec-asm-dataseg.html" class="internal"><span class="codenumber">2.5</span> <span class="title">The Data Segment</span></a></div></li>
<li><div class="toc-item"><a href="sec-asm-segments.html" class="internal"><span class="codenumber">2.6</span> <span class="title">Memory Segmentation</span></a></div></li>
<li><div class="toc-item"><a href="sec-asm-link.html" class="internal"><span class="codenumber">2.7</span> <span class="title">Linking</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-asm-call.html" class="internal"><span class="codenumber">2.8</span> <span class="title">Calling Functions</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-asm-call.html#subsection-3" class="internal"><span class="codenumber">2.8.1</span> <span class="title">Recursion</span></a></div></li>
<li><div class="toc-item"><a href="sec-asm-call.html#sec-asm-cc" class="internal"><span class="codenumber">2.8.2</span> <span class="title">The Calling Convention</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-simple-algo.html" class="internal"><span class="codenumber">3</span> <span class="title">Some Simple Algorithms</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="bsp-.html" class="internal"><span class="codenumber">3.1</span> <span class="title">Number Conversion</span></a></div></li>
<li><div class="toc-item"><a href="section-16.html" class="internal"><span class="codenumber">3.2</span> <span class="title">The Sieve of Eratosthenes</span></a></div></li>
<li>
<div class="toc-item"><a href="section-17.html" class="internal"><span class="codenumber">3.3</span> <span class="title">Insertion Sort</span></a></div>
<ul class="structural"><li><div class="toc-item"><a href="section-17.html#exercises-1" class="internal"><span class="codenumber">3.3</span> <span class="title">Exercises</span></a></div></li></ul>
</li>
<li><div class="toc-item"><a href="section-18.html" class="internal"><span class="codenumber">3.4</span> <span class="title">Evaluating Polynomials with Horner's Method</span></a></div></li>
<li><div class="toc-item"><a href="section-19.html" class="internal"><span class="codenumber">3.5</span> <span class="title">The Tortoise and the Hare</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-c.html" class="internal"><span class="codenumber">4</span> <span class="title">Introduction to C</span></a></div>
<ul class="structural">
<li>
<div class="toc-item"><a href="sec-c-basics.html" class="internal"><span class="codenumber">4.1</span> <span class="title">Basics</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c-basics.html#subsection-5" class="internal"><span class="codenumber">4.1.1</span> <span class="title">Static Properties</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-basics.html#subsection-6" class="internal"><span class="codenumber">4.1.2</span> <span class="title">Dynamic Properties</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-c-trace.html" class="internal"><span class="codenumber">4.2</span> <span class="title">Execution Traces</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-c-object.html" class="internal"><span class="codenumber">4.3</span> <span class="title">Imperative Variables</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c-object.html#subsection-7" class="internal"><span class="codenumber">4.3.1</span> <span class="title">Local Variables</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-object.html#subsection-8" class="internal"><span class="codenumber">4.3.2</span> <span class="title">Global Variables</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-object.html#subsection-9" class="internal"><span class="codenumber">4.3.3</span> <span class="title">Dynamically Allocated Containers</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-c-memmodel.html" class="internal"><span class="codenumber">4.4</span> <span class="title">The C¬†Memory Model</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-c-tu.html" class="internal"><span class="codenumber">4.5</span> <span class="title">Translation Units</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c-tu.html#subsection-10" class="internal"><span class="codenumber">4.5.1</span> <span class="title">main</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-tu.html#sec-c-call_tu" class="internal"><span class="codenumber">4.5.2</span> <span class="title">Calling Functions from Other Translation Units</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-tu.html#subsection-12" class="internal"><span class="codenumber">4.5.3</span> <span class="title">Makefiles</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-c-numty.html" class="internal"><span class="codenumber">4.6</span> <span class="title">Number Types</span></a></div></li>
<li>
<div class="toc-item"><a href="section-26.html" class="internal"><span class="codenumber">4.7</span> <span class="title">Control Flow</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="section-26.html#subsection-13" class="internal"><span class="codenumber">4.7.1</span> <span class="title">Selection Statements</span></a></div></li>
<li><div class="toc-item"><a href="section-26.html#sec-c-loops" class="internal"><span class="codenumber">4.7.2</span> <span class="title">Loops</span></a></div></li>
<li><div class="toc-item"><a href="section-26.html#subsection-15" class="internal"><span class="codenumber">4.7.3</span> <span class="title">Function Return</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-c-expr.html" class="internal"><span class="codenumber">4.8</span> <span class="title">Expressions</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c-expr.html#subsection-16" class="internal"><span class="codenumber">4.8.1</span> <span class="title">Implicit Type Conversions</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-expr.html#sec-c-lval" class="internal"><span class="codenumber">4.8.2</span> <span class="title">L- and R-Evaluation of Expressions</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-expr.html#sec-c-sideeffects" class="internal"><span class="codenumber">4.8.3</span> <span class="title">Side Effects</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-expr.html#subsection-19" class="internal"><span class="codenumber">4.8.4</span> <span class="title">Lazy Evaluation</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-expr.html#subsection-20" class="internal"><span class="codenumber">4.8.5</span> <span class="title">Exercises</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="section-28.html" class="internal"><span class="codenumber">4.9</span> <span class="title">Calling Functions</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-c-ptr.html" class="internal"><span class="codenumber">4.10</span> <span class="title">Pointers</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c-ptr.html#sec-c-array" class="internal"><span class="codenumber">4.10.1</span> <span class="title">Arrays</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-ptr.html#subsection-22" class="internal"><span class="codenumber">4.10.2</span> <span class="title">const</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-ptr.html#exercises-2" class="internal"><span class="codenumber">4.10.3</span> <span class="title">Exercises</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="section-30.html" class="internal"><span class="codenumber">4.11</span> <span class="title">Examples</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-c-dyn-mem-management.html" class="internal"><span class="codenumber">4.12</span> <span class="title">Dynamic Memory Management</span></a></div>
<ul class="structural"><li><div class="toc-item"><a href="sec-c-dyn-mem-management.html#subsection-23" class="internal"><span class="codenumber">4.12.1</span> <span class="title">realloc</span></a></div></li></ul>
</li>
<li>
<div class="toc-item"><a href="sec-c-structs.html" class="internal"><span class="codenumber">4.13</span> <span class="title">Structs</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c-structs.html#subsection-24" class="internal"><span class="codenumber">4.13.1</span> <span class="title">typedef</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-structs.html#subsection-25" class="internal"><span class="codenumber">4.13.2</span> <span class="title">Incomplete Structs</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-structs.html#exercises-3" class="internal"><span class="codenumber">4.13.3</span> <span class="title">Exercises</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-c-io.html" class="internal"><span class="codenumber">4.14</span> <span class="title">Input and Output</span></a></div>
<ul class="structural"><li><div class="toc-item"><a href="sec-c-io.html#subsection-26" class="internal"><span class="codenumber">4.14.1</span> <span class="title">Format Strings</span></a></div></li></ul>
</li>
<li>
<div class="toc-item"><a href="sec-c-undef.html" class="internal"><span class="codenumber">4.15</span> <span class="title">Undefined Behavior</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c-undef.html#subsection-27" class="internal"><span class="codenumber">4.15.1</span> <span class="title">Unspecified and Implementation-Defined Behavior</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-undef.html#subsection-28" class="internal"><span class="codenumber">4.15.2</span> <span class="title">Security Problems</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-undef.html#subsection-29" class="internal"><span class="codenumber">4.15.3</span> <span class="title">Undefined Behavior and the Compiler</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-undef.html#subsection-30" class="internal"><span class="codenumber">4.15.4</span> <span class="title">Practical Examples</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-c-ds.html" class="internal"><span class="codenumber">5</span> <span class="title">Algorithms and Data Structures</span></a></div>
<ul class="structural">
<li>
<div class="toc-item"><a href="sec-ds-lists.html" class="internal"><span class="codenumber">5.1</span> <span class="title">Lists</span></a></div>
<ul class="structural">
<li>
<div class="toc-item"><a href="sec-ds-lists.html#sec-ds-arraylist" class="internal"><span class="codenumber">5.1.1</span> <span class="title">Array Lists</span></a></div>
<ul class="structural"><li><div class="toc-item"><a href="sec-ds-lists.html#exercises-4" class="internal"><span class="codenumber">5.1.1</span> <span class="title">Exercises</span></a></div></li></ul>
</li>
<li><div class="toc-item"><a href="sec-ds-lists.html#sec-ds-sllists" class="internal"><span class="codenumber">5.1.2</span> <span class="title">Singly-Linked Lists</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-lists.html#sec-ds-dllists" class="internal"><span class="codenumber">5.1.3</span> <span class="title">Doubly-Linked Lists</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-ds-trees.html" class="internal"><span class="codenumber">5.2</span> <span class="title">Trees</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-ds-trees.html#subsection-34" class="internal"><span class="codenumber">5.2.1</span> <span class="title">General Notions and Algorithms</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-trees.html#sec-ds-bst" class="internal"><span class="codenumber">5.2.2</span> <span class="title">Binary Search Trees</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-trees.html#sec-ds-tries" class="internal"><span class="codenumber">5.2.3</span> <span class="title">Tries</span></a></div></li>
</ul>
</li>
<li class="active">
<div class="toc-item"><a href="sec-ds-hash.html" class="internal"><span class="codenumber">5.3</span> <span class="title">Hashing</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-ds-hash.html#subsection-37" class="internal"><span class="codenumber">5.3.1</span> <span class="title">Separate Chaining</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-hash.html#subsection-38" class="internal"><span class="codenumber">5.3.2</span> <span class="title">The Load Factor</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-hash.html#subsection-39" class="internal"><span class="codenumber">5.3.3</span> <span class="title">Hash Tables and Mutability</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-hash.html#subsection-40" class="internal"><span class="codenumber">5.3.4</span> <span class="title">Open Addressing</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-hash.html#subsection-41" class="internal"><span class="codenumber">5.3.5</span> <span class="title">A Comprehensive Example</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-hash.html#subsection-42" class="internal"><span class="codenumber">5.3.6</span> <span class="title">Deleting from a Hash Table with Open Addressing</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-hash.html#subsection-43" class="internal"><span class="codenumber">5.3.7</span> <span class="title">Summary</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-ds-dynpro.html" class="internal"><span class="codenumber">5.4</span> <span class="title">Dynamic Programming</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-ds-dynpro.html#sec-ds-fib" class="internal"><span class="codenumber">5.4.1</span> <span class="title">Computing Fibonacci Numbers</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-dynpro.html#sec-ds-binomial" class="internal"><span class="codenumber">5.4.2</span> <span class="title">Computing Binomial Coefficients</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-dynpro.html#sec-ds-edist" class="internal"><span class="codenumber">5.4.3</span> <span class="title">Computing the Minimum Edit Distance</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-c0.html" class="internal"><span class="codenumber">6</span> <span class="title">Formal Semantics</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c0-syntax-general.html" class="internal"><span class="codenumber">6.1</span> <span class="title">The Syntax of Programming Languages</span></a></div></li>
<li><div class="toc-item"><a href="sec-c0-syntax.html" class="internal"><span class="codenumber">6.2</span> <span class="title">The Abstract Syntax of C0</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-c0-sem.html" class="internal"><span class="codenumber">6.3</span> <span class="title">The Semantics of C0</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c0-sem.html#subsection-47" class="internal"><span class="codenumber">6.3.1</span> <span class="title">The State</span></a></div></li>
<li><div class="toc-item"><a href="sec-c0-sem.html#subsection-48" class="internal"><span class="codenumber">6.3.2</span> <span class="title">Expressions</span></a></div></li>
<li><div class="toc-item"><a href="sec-c0-sem.html#subsection-49" class="internal"><span class="codenumber">6.3.3</span> <span class="title">Statements</span></a></div></li>
<li><div class="toc-item"><a href="sec-c0-sem.html#subsection-50" class="internal"><span class="codenumber">6.3.4</span> <span class="title">Digression: Getting Stuck</span></a></div></li>
<li><div class="toc-item"><a href="sec-c0-sem.html#sec-c0-ex" class="internal"><span class="codenumber">6.3.5</span> <span class="title">Some Examples</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-c0-pointers.html" class="internal"><span class="codenumber">6.4</span> <span class="title">Pointers (C0p)</span></a></div></li>
<li><div class="toc-item"><a href="sec-c0-scopes.html" class="internal"><span class="codenumber">6.5</span> <span class="title">Scopes (C0b)</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-c0-type.html" class="internal"><span class="codenumber">6.6</span> <span class="title">A Simple Type System (C0t)</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c0-type.html#subsection-52" class="internal"><span class="codenumber">6.6.1</span> <span class="title">Expressions</span></a></div></li>
<li><div class="toc-item"><a href="sec-c0-type.html#subsection-53" class="internal"><span class="codenumber">6.6.2</span> <span class="title">Statements and Programs</span></a></div></li>
<li><div class="toc-item"><a href="sec-c0-type.html#subsection-54" class="internal"><span class="codenumber">6.6.3</span> <span class="title">Examples</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="section-45.html" class="internal"><span class="codenumber">6.7</span> <span class="title">Summary and Further Reading</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-corr.html" class="internal"><span class="codenumber">7</span> <span class="title">Testing and Verification</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-corr-functional.html" class="internal"><span class="codenumber">7.1</span> <span class="title">Functional Correctness</span></a></div></li>
<li><div class="toc-item"><a href="sec-corr-failures.html" class="internal"><span class="codenumber">7.2</span> <span class="title">Failures</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-corr-testing.html" class="internal"><span class="codenumber">7.3</span> <span class="title">Testing</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-corr-testing.html#subsection-55" class="internal"><span class="codenumber">7.3.1</span> <span class="title">The Oracle Problem</span></a></div></li>
<li><div class="toc-item"><a href="sec-corr-testing.html#subsection-56" class="internal"><span class="codenumber">7.3.2</span> <span class="title">Black-box Testing</span></a></div></li>
<li><div class="toc-item"><a href="sec-corr-testing.html#sec-corr-coverage" class="internal"><span class="codenumber">7.3.3</span> <span class="title">White-box Testing and Coverage</span></a></div></li>
<li><div class="toc-item"><a href="sec-corr-testing.html#subsection-58" class="internal"><span class="codenumber">7.3.4</span> <span class="title">Fuzzing</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-corr-hoare.html" class="internal"><span class="codenumber">7.4</span> <span class="title">Verification</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-corr-hoare.html#sec-corr-hoare-logic" class="internal"><span class="codenumber">7.4.1</span> <span class="title">Hoare Logic</span></a></div></li>
<li><div class="toc-item"><a href="sec-corr-hoare.html#sec-corr-hoare-mech" class="internal"><span class="codenumber">7.4.2</span> <span class="title">Mechanizing Verification</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="section-50.html" class="internal"><span class="codenumber">7.5</span> <span class="title">Summary and Further Reading</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-java.html" class="internal"><span class="codenumber">8</span> <span class="title">Object-Oriented Programming with Java</span></a></div>
<ul class="structural">
<li>
<div class="toc-item"><a href="sec-java-overview.html" class="internal"><span class="codenumber">8.1</span> <span class="title">Compilation, Main Method, Packages</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-java-overview.html#subsection-61" class="internal"><span class="codenumber">8.1.1</span> <span class="title">Multiple Classes</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-overview.html#subsection-62" class="internal"><span class="codenumber">8.1.2</span> <span class="title">Packages</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-java-types.html" class="internal"><span class="codenumber">8.2</span> <span class="title">Types</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-java-reftypes.html" class="internal"><span class="codenumber">8.3</span> <span class="title">Reference Types</span></a></div>
<ul class="structural"><li><div class="toc-item"><a href="sec-java-reftypes.html#subsection-63" class="internal"><span class="codenumber">8.3.1</span> <span class="title">Arrays</span></a></div></li></ul>
</li>
<li>
<div class="toc-item"><a href="sec-java-oo.html" class="internal"><span class="codenumber">8.4</span> <span class="title">Classes</span></a></div>
<ul class="structural"><li><div class="toc-item"><a href="sec-java-oo.html#subsection-64" class="internal"><span class="codenumber">8.4.1</span> <span class="title">Constructors</span></a></div></li></ul>
</li>
<li><div class="toc-item"><a href="sec-java-encapsulation.html" class="internal"><span class="codenumber">8.5</span> <span class="title">Encapsulation</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-java-immutable.html" class="internal"><span class="codenumber">8.6</span> <span class="title">References, Aliasing, and Immutable Objects</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-java-immutable.html#subsection-65" class="internal"><span class="codenumber">8.6.1</span> <span class="title">Aliases</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-immutable.html#subsection-66" class="internal"><span class="codenumber">8.6.2</span> <span class="title">Immutable Classes</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-immutable.html#subsection-67" class="internal"><span class="codenumber">8.6.3</span> <span class="title">When to Use Immutable Classes?</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-java-inherit.html" class="internal"><span class="codenumber">8.7</span> <span class="title">Inheritance</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-java-inherit.html#subsection-68" class="internal"><span class="codenumber">8.7.1</span> <span class="title">Interfaces</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-inherit.html#subsection-69" class="internal"><span class="codenumber">8.7.2</span> <span class="title">Overriding Methods</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-inherit.html#subsection-70" class="internal"><span class="codenumber">8.7.3</span> <span class="title">Calling a Method</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-inherit.html#subsection-71" class="internal"><span class="codenumber">8.7.4</span> <span class="title">The Class <code class="code-inline tex2jax_ignore">Object</code></span></a></div></li>
<li><div class="toc-item"><a href="sec-java-inherit.html#subsection-72" class="internal"><span class="codenumber">8.7.5</span> <span class="title"><code class="code-inline tex2jax_ignore">equals</code></span></a></div></li>
<li><div class="toc-item"><a href="sec-java-inherit.html#sec-equals-hashCode" class="internal"><span class="codenumber">8.7.6</span> <span class="title"><code class="code-inline tex2jax_ignore">hashCode</code></span></a></div></li>
<li><div class="toc-item"><a href="sec-java-inherit.html#subsection-74" class="internal"><span class="codenumber">8.7.7</span> <span class="title"><code class="code-inline tex2jax_ignore">toString</code></span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-java-overload.html" class="internal"><span class="codenumber">8.8</span> <span class="title">Overloading Methods</span></a></div>
<ul class="structural"><li><div class="toc-item"><a href="sec-java-overload.html#subsection-75" class="internal"><span class="codenumber">8.8.1</span> <span class="title">Overloading and overriding</span></a></div></li></ul>
</li>
<li>
<div class="toc-item"><a href="sec-java-collections.html" class="internal"><span class="codenumber">8.9</span> <span class="title">The Java Collections Framework</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-java-collections.html#subsection-76" class="internal"><span class="codenumber">8.9.1</span> <span class="title">Maps</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-collections.html#subsection-77" class="internal"><span class="codenumber">8.9.2</span> <span class="title">Hash Sets</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-collections.html#subsection-78" class="internal"><span class="codenumber">8.9.3</span> <span class="title">Iteration</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-collections.html#subsection-79" class="internal"><span class="codenumber">8.9.4</span> <span class="title">Genericity</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-java-proper-oo.html" class="internal"><span class="codenumber">8.10</span> <span class="title">Using Object Orientation Properly</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-java-expr-problem.html" class="internal"><span class="codenumber">8.11</span> <span class="title">The Expression Problem and the Visitor Pattern</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-java-expr-problem.html#subsection-80" class="internal"><span class="codenumber">8.11.1</span> <span class="title">Extensions</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-expr-problem.html#subsection-81" class="internal"><span class="codenumber">8.11.2</span> <span class="title">The Visitor Pattern</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-java-oo-with-c.html" class="internal"><span class="codenumber">8.12</span> <span class="title">Object-Oriented Programming with C</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-comp.html" class="internal"><span class="codenumber">9</span> <span class="title">A Simple Compiler</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-comp-synana.html" class="internal"><span class="codenumber">9.1</span> <span class="title">A Brief Overview of Syntactic Analysis</span></a></div></li>
<li><div class="toc-item"><a href="sec-comp-tychk.html" class="internal"><span class="codenumber">9.2</span> <span class="title">Type Checking</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-comp-codegen.html" class="internal"><span class="codenumber">9.3</span> <span class="title">Syntax-Directed Code Generation</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-comp-codegen.html#subsection-82" class="internal"><span class="codenumber">9.3.1</span> <span class="title">Expressions</span></a></div></li>
<li><div class="toc-item"><a href="sec-comp-codegen.html#subsection-83" class="internal"><span class="codenumber">9.3.2</span> <span class="title">Statements</span></a></div></li>
<li><div class="toc-item"><a href="sec-comp-codegen.html#sec-comp-codegen-prg" class="internal"><span class="codenumber">9.3.3</span> <span class="title">Programs</span></a></div></li>
<li><div class="toc-item"><a href="sec-comp-codegen.html#subsection-85" class="internal"><span class="codenumber">9.3.4</span> <span class="title">The Function Prologue and Epilogue</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li>
<div class="toc-item"><a href="backmatter.html" class="internal"><span class="title">Backmatter</span></a></div>
<ul class="structural">
<li>
<div class="toc-item"><a href="sec-mipsref.html" class="internal"><span class="codenumber">A</span> <span class="title">MIPS Assembler Reference</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="app-mips-ref-insn.html" class="internal"><span class="codenumber">A.1</span> <span class="title">Instruction Set Reference</span></a></div></li>
<li><div class="toc-item"><a href="app-mips-ref-os.html" class="internal"><span class="codenumber">A.2</span> <span class="title">OS Calls</span></a></div></li>
<li><div class="toc-item"><a href="section-68.html" class="internal"><span class="codenumber">A.3</span> <span class="title">Assembler Directives</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-ascii.html" class="internal"><span class="codenumber">B</span> <span class="title">ASCII Table</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-schedule.html" class="internal"><span class="codenumber">C</span> <span class="title">Course Structure</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="section-69.html" class="internal"><span class="codenumber">C.1</span> <span class="title">I: Course Introduction</span></a></div></li>
<li><div class="toc-item"><a href="section-70.html" class="internal"><span class="codenumber">C.2</span> <span class="title">R1: Computer Arithmetic</span></a></div></li>
<li><div class="toc-item"><a href="section-71.html" class="internal"><span class="codenumber">C.3</span> <span class="title">R2: Computer Arithmetic</span></a></div></li>
<li><div class="toc-item"><a href="section-72.html" class="internal"><span class="codenumber">C.4</span> <span class="title">M1: Introduction to Machine Code Programming</span></a></div></li>
<li><div class="toc-item"><a href="section-73.html" class="internal"><span class="codenumber">C.5</span> <span class="title">M2: Simple Algorithms in Machine Code</span></a></div></li>
<li><div class="toc-item"><a href="section-74.html" class="internal"><span class="codenumber">C.6</span> <span class="title">M3: Function Calls</span></a></div></li>
<li><div class="toc-item"><a href="section-75.html" class="internal"><span class="codenumber">C.7</span> <span class="title">C1: Introduction to C</span></a></div></li>
<li><div class="toc-item"><a href="section-76.html" class="internal"><span class="codenumber">C.8</span> <span class="title">C2: Expressions and Pointers</span></a></div></li>
<li><div class="toc-item"><a href="section-77.html" class="internal"><span class="codenumber">C.9</span> <span class="title">C3: Arrays, Structs, I/O</span></a></div></li>
<li><div class="toc-item"><a href="section-78.html" class="internal"><span class="codenumber">C.10</span> <span class="title">A1: Lists and Trees</span></a></div></li>
<li><div class="toc-item"><a href="section-79.html" class="internal"><span class="codenumber">C.11</span> <span class="title">A2: Dynamic Programming</span></a></div></li>
<li><div class="toc-item"><a href="section-80.html" class="internal"><span class="codenumber">C.12</span> <span class="title">S1: C0 Syntax and Semantics</span></a></div></li>
<li><div class="toc-item"><a href="section-81.html" class="internal"><span class="codenumber">C.13</span> <span class="title">S2: Extending C0 to Pointers and Scopes</span></a></div></li>
<li><div class="toc-item"><a href="section-82.html" class="internal"><span class="codenumber">C.14</span> <span class="title">S3: Correctness</span></a></div></li>
<li><div class="toc-item"><a href="section-83.html" class="internal"><span class="codenumber">C.15</span> <span class="title">S4: Testing</span></a></div></li>
<li><div class="toc-item"><a href="section-84.html" class="internal"><span class="codenumber">C.16</span> <span class="title">J1: Intro to Java</span></a></div></li>
<li><div class="toc-item"><a href="section-85.html" class="internal"><span class="codenumber">C.17</span> <span class="title">J2: Immutable Objects, Interfaces, Subtyping</span></a></div></li>
<li><div class="toc-item"><a href="section-86.html" class="internal"><span class="codenumber">C.18</span> <span class="title">J3: Abstract Classes, <code class="code-inline tex2jax_ignore">Object</code>, Overriding and Overloading Methods</span></a></div></li>
<li><div class="toc-item"><a href="section-87.html" class="internal"><span class="codenumber">C.19</span> <span class="title">J4: Using OO Properly, OO in C, The Expression Problem, Visitor Pattern</span></a></div></li>
<li><div class="toc-item"><a href="section-88.html" class="internal"><span class="codenumber">C.20</span> <span class="title">A3: Java Collections Framework and Hashing</span></a></div></li>
<li><div class="toc-item"><a href="section-89.html" class="internal"><span class="codenumber">C.21</span> <span class="title">A4: Project Specific</span></a></div></li>
<li><div class="toc-item"><a href="section-90.html" class="internal"><span class="codenumber">C.22</span> <span class="title">O1: Compiler Introduction (Syntax Analysis, Static Semantics)</span></a></div></li>
<li><div class="toc-item"><a href="section-91.html" class="internal"><span class="codenumber">C.23</span> <span class="title">O2: Type Checking Examples, Implementation of Type Checking</span></a></div></li>
<li><div class="toc-item"><a href="section-92.html" class="internal"><span class="codenumber">C.24</span> <span class="title">O3: Syntax-Directed Code Generation</span></a></div></li>
<li><div class="toc-item"><a href="section-93.html" class="internal"><span class="codenumber">C.25</span> <span class="title">V1: Hoare Logics</span></a></div></li>
<li><div class="toc-item"><a href="section-94.html" class="internal"><span class="codenumber">C.26</span> <span class="title">V2: Loop Invariants and Mechanizing Verification</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="appendix-4.html" class="internal"><span class="codenumber">D</span> <span class="title">List of Symbols</span></a></div></li>
<li><div class="toc-item"><a href="index-1.html" class="internal"><span class="title">Index</span></a></div></li>
<li><div class="toc-item"><a href="references.html" class="internal"><span class="title">Literature</span></a></div></li>
</ul>
</li>
</ul></nav></div>
<main class="ptx-main"><div id="ptx-content" class="ptx-content">
<section class="section" id="sec-ds-hash"><h2 class="heading hide-type">
<span class="type">Section</span> <span class="codenumber">5.3</span> <span class="title">Hashing</span>
</h2>
<section class="introduction" id="introduction-20"><div class="para" id="p-560">We have seen that search trees can implement maps (and therefore sets). Another data structure for sets (and maps) that is often used in practice are hash tables. The basic idea is that we define a <dfn class="terminology">hash function</dfn>¬†<span class="process-math">\(h\)</span> from the set of keys¬†<span class="process-math">\(K\)</span> to <code class="code-inline tex2jax_ignore">int</code> to assign each possible key a <dfn class="terminology">bucket</dfn> in a <dfn class="terminology">hash table</dfn> which is just another way of saying ‚Äòan index in an array‚Äô. If¬†<span class="process-math">\(h\)</span> is <em class="emphasis">injective</em> (i.e. no two keys get assigned the same hash value) <em class="emphasis">and</em> the array is large enough, each key can get its own individual bucket. We then also say that there are no <dfn class="terminology">collisions</dfn>. Checking if a key¬†<span class="process-math">\(k\)</span> is in the set then reduces to evaluating¬†<span class="process-math">\(h(k)\)</span> and checking if the array is occupied at¬†<span class="process-math">\(h(k)\text{.}\)</span> Being occupied could for instance mean that at¬†<span class="process-math">\(h(k)\)</span> is a value that is associated with¬†<span class="process-math">\(k\)</span> in case of a map or just a¬†1 to indicate that¬†<span class="process-math">\(k\)</span> is in the set. If evaluating¬†<span class="process-math">\(h(k)\)</span> does not depend on the size of¬†<span class="process-math">\(k\)</span> we can check membership (and also add and remove) in constant time.</div> <div class="para" id="p-561">However, in reality, neither is¬†<span class="process-math">\(h\)</span> injective nor is the array large enough. <span class="process-math">\(h\)</span>¬†is rarely injective because the cardinality of the key set is typically much higher that the one of¬†<code class="code-inline tex2jax_ignore">int</code>. For example, in the case where the keys are strings, there are strictly more strings that ints. Even if¬†<span class="process-math">\(h\)</span> was injective, since <code class="code-inline tex2jax_ignore">int</code> comprises <span class="process-math">\(2^{32}\)</span> values, we would need an array of size¬†<span class="process-math">\(2^{32}\)</span> to safely avoid all collisions.</div> <div class="para" id="p-562">So if we have to give up on injectivity anyways, we can also require that the hash function always yields a value within size of our array. In fact, for each hash function¬†<span class="process-math">\(h\)</span> we can define a new function¬†<span class="process-math">\(h_m(k)=h(k)\mathrel{\%}m\)</span> where¬†<span class="process-math">\(m\)</span> is the length of the array. This function always yields a value between¬†0 and¬†<span class="process-math">\(m\text{.}\)</span>
</div> <div class="para" id="p-563">In the following, we look at two different techniques for dealing with collisions and still keep the run time of membership tests ‚Äúlow‚Äù in practice.</div></section><section class="subsection" id="subsection-37"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">5.3.1</span> <span class="title">Separate Chaining</span>
</h3>
<div class="para" id="p-564">The first straightforward idea is to resolve collisions using a list for each bucket. To this end, we are not placing the values (which are associated with the keys) directly into the hash table but in fact make the array an array of lists. The idea is that all elements that are hashed to the same bucket are chained in the collision list for that bucket.</div>
<figure class="figure figure-like" id="figure-26"><div class="image-box" style="width: 100%; margin-left: 0%; margin-right: 0%;"><img src="generated/latex-image/image-25.svg" role="img" class="contained"></div>
<figcaption><span class="type">Figure</span><span class="space"> </span><span class="codenumber">5.3.1<span class="period">.</span></span><span class="space"> </span>Chained collisions in a hash table. The hash table represents the set of keys <span class="process-math">\(K\supseteq S=\{k_1,k_2,k_3\}\text{.}\)</span> Keys¬†<span class="process-math">\(k_1\)</span> and¬†<span class="process-math">\(k_2\)</span> collide under¬†<span class="process-math">\(h_m\text{.}\)</span></figcaption></figure><div class="para" id="p-565">The following code shows a sample implementation of a hash table with separate chaining in C. The function `hash_chain_search` searches for a given key. It returns¬†1 if the key is in the table and 0 otherwise. In any case, it stores into <code class="code-inline tex2jax_ignore">insert</code> the address of an entry pointer. If a new entry must be added to the hash table (when inserting an element), this pointer needs to be set to the freshly added entry.</div>
<figure class="listing figure-like" id="listing-28"><div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">typedef int (*eq_t)(void* p, void* q);
typedef int (*hash_fct_t)(void* key);

typedef struct entry_t {
    void* key;
    struct entry_t* next;
} entry_t;

typedef struct {
    unsigned size;          // # of keys in the table
    unsigned table_length;  // length of the hash table
    float max_load_factor;  // the maximal load factor
    hash_fct_t h;           // the hash function.
    entry_t** table;        // an array of singly-linked entry lists
} chaining_hashtable_t;

/// This function searches for a key 
/// in a hash tab with separate chaining.
/// @param ht The hash table
/// @param key The key to search for
/// @param hash The hash function value for key
/// @param eq A function to compare two keys for equality
/// @param insert The address of a pointer to an entry_t pointer.
///               There, we will put the address of the pointer
///               where the new collision chain entry should be
///               appended in the case where we insert a new key.
int hash_chain_search(chaining_hashtable_t* ht, void* key,
                      eq_t equals, entry_t*** insert) {
    unsigned bucket = ht-&gt;h(key) % ht-&gt;table_length;  // compute h_m
    *insert = ht-&gt;table + bucket;       
    for (entry_t* e = ht-&gt;table[bucket]; e != NULL; e = e-&gt;next) {
        if (equals(e-&gt;key, key))
            return 1;
        *insert = &amp;e-&gt;next;
    }
    return 0;
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=%20%23include%20%3Cstdlib.h%3E%0A%0Atypedef%20int%20(*eq_t)(void*%20p%2C%20void*%20q)%3B%0Atypedef%20int%20(*hash_fct_t)(void*%20key)%3B%0A%0Atypedef%20struct%20entry_t%20%7B%0A%20%20%20%20void*%20key%3B%0A%20%20%20%20struct%20entry_t*%20next%3B%0A%7D%20entry_t%3B%0A%0Atypedef%20struct%20%7B%0A%20%20%20%20unsigned%20size%3B%20%20%20%20%20%20%20%20%20%20%2F%2F%20%23%20of%20keys%20in%20the%20table%0A%20%20%20%20unsigned%20table_length%3B%20%20%2F%2F%20length%20of%20the%20hash%20table%0A%20%20%20%20float%20max_load_factor%3B%20%20%2F%2F%20the%20maximal%20load%20factor%0A%20%20%20%20hash_fct_t%20h%3B%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20the%20hash%20function.%0A%20%20%20%20entry_t**%20table%3B%20%20%20%20%20%20%20%20%2F%2F%20an%20array%20of%20singly-linked%20entry%20lists%0A%7D%20chaining_hashtable_t%3B%0A%0A%2F%2F%2F%20This%20function%20searches%20for%20a%20key%20%0A%2F%2F%2F%20in%20a%20hash%20tab%20with%20separate%20chaining.%0A%2F%2F%2F%20@param%20ht%20The%20hash%20table%0A%2F%2F%2F%20@param%20key%20The%20key%20to%20search%20for%0A%2F%2F%2F%20@param%20hash%20The%20hash%20function%20value%20for%20key%0A%2F%2F%2F%20@param%20eq%20A%20function%20to%20compare%20two%20keys%20for%20equality%0A%2F%2F%2F%20@param%20insert%20The%20address%20of%20a%20pointer%20to%20an%20entry_t%20pointer.%0A%2F%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20There%2C%20we%20will%20put%20the%20address%20of%20the%20pointer%0A%2F%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20where%20the%20new%20collision%20chain%20entry%20should%20be%0A%2F%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20appended%20in%20the%20case%20where%20we%20insert%20a%20new%20key.%0Aint%20hash_chain_search(chaining_hashtable_t*%20ht%2C%20void*%20key%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20eq_t%20equals%2C%20entry_t***%20insert)%20%7B%0A%20%20%20%20unsigned%20bucket%20%3D%20ht-%3Eh(key)%20%25%20ht-%3Etable_length%3B%20%20%2F%2F%20compute%20h_m%0A%20%20%20%20*insert%20%3D%20ht-%3Etable%20%2B%20bucket%3B%20%20%20%20%20%20%20%0A%20%20%20%20for%20(entry_t*%20e%20%3D%20ht-%3Etable%5Bbucket%5D%3B%20e%20!%3D%20NULL%3B%20e%20%3D%20e-%3Enext)%20%7B%0A%20%20%20%20%20%20%20%20if%20(equals(e-%3Ekey%2C%20key))%0A%20%20%20%20%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%20%20%20%20*insert%20%3D%20%26e-%3Enext%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%200%3B%0A%7D%0A%0A%2F%2F%2F%20Insert%20into%20a%20hash%20table%20with%20separate%20chaining.%0Aint%20hash_chain_insert(chaining_hashtable_t*%20ht%2C%20void*%20key%2C%20eq_t%20equals)%20%7B%0A%20%20%20%20entry_t**%20insert%3B%0A%20%20%20%20int%20found%20%3D%20hash_chain_search(ht%2C%20key%2C%20equals%2C%20%26insert)%3B%0A%20%20%20%20if%20(found)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20the%20hash%20table%20did%20not%20change%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20The%20search%20function%20sets%20insert%20to%20the%20address%20of%20%0A%20%20%20%20%2F%2F%20the%20last%20next%20pointer%20in%20the%20collision%20chain%0A%20%20%20%20assert%20(*insert%20%3D%3D%20NULL)%3B%0A%20%20%20%20%2F%2F%20here%2C%20we%20know%20that%20the%20element%20is%20not%20in%20the%20table%0A%20%20%20%20%2F%2F%20so%20we%20allocate%20a%20new%20list%20entry%0A%20%20%20%20entry_t*%20e%20%3D%20malloc(sizeof(*e))%3B%0A%20%20%20%20%2F%2F%20initialize%20the%20entry%0A%20%20%20%20e-%3Enext%20%3D%20NULL%3B%0A%20%20%20%20e-%3Ekey%20%3D%20key%3B%0A%20%20%20%20%2F%2F%20and%20append%20it%20to%20the%20collision%20chain%0A%20%20%20%20*insert%20%3D%20e%3B%20%0A%20%20%20%20%2B%2Bht-%3Esize%3B%0A%20%20%20%20return%201%3B%0A%7D%0A%0Aint%20hash_chain_insert_resize(chaining_hashtable_t*%20ht%2C%20void*%20key%2C%20eq_t%20eq)%20%7B%0A%20%20%20%20if%20(ht-%3Esize%20%3E%20ht-%3Emax_load_factor%20*%20ht-%3Etable_length)%20%7B%0A%20%20%20%20%20%20%20%20ht-%3Etable_length%20*%3D%202%3B%0A%20%20%20%20%20%20%20%20assert%20(ht-%3Esize%20%3C%20ht-%3Emax_load_factor%20*%20ht-%3Etable_length)%3B%0A%20%20%20%20%20%20%20%20entry_t**%20old_table%20%3D%20ht-%3Etable%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20allocate%20new%20table%20and%20initialize%20to%200%0A%20%20%20%20%20%20%20%20ht-%3Etable%20%3D%20calloc(ht-%3Etable_length%2C%20sizeof(ht-%3Etable%5B0%5D))%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20go%20over%20old%20hash%20table%20and%20add%20each%20element%20to%20new%20table%0A%20%20%20%20%20%20%20%20rehash_table(ht%2C%20old_table)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20free%20old%20table%0A%20%20%20%20%20%20%20%20free(old_table)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20hash_chain_insert(ht%2C%20key%2C%20eq)%3B%0A%7D%0A%0Atypedef%20struct%20%7B%0A%20%20%20%20unsigned%20size%3B%0A%20%20%20%20unsigned%20table_length%3B%0A%20%20%20%20float%20max_load_factor%3B%0A%20%20%20%20hash_fct_t%20h%3B%0A%20%20%20%20void**%20table%3B%0A%7D%20open_addr_hashtable_t%3B%0A%0Aint%20open_addr_hashtable_search(open_addr_hashtable_t*%20ht%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20void%20*key%2C%20eq_t%20equals)%20%7B%0A%20%20%20%20for%20(unsigned%20i%20%3D%200%3B%20i%20%3C%20ht-%3Etable_length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20call%20probing%20function%20to%20compute%20bucket%20%0A%20%20%20%20%20%20%20%20%2F%2F%20of%20collision%20chain%20entry%0A%20%20%20%20%20%20%20%20unsigned%20bucket%20%3D%20h_prime(ht-%3Eh(key)%2C%20i)%3B%20%20%0A%20%20%20%20%20%20%20%20void*%20k%20%3D%20ht-%3Etable%5Bbucket%5D%3B%0A%20%20%20%20%20%20%20%20if%20(k%20%3D%3D%20NULL%20%7C%7C%20equals(k%2C%20key))%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20bucket%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20-1%3B%0A%7D%20">Run</a>
</div>
<figcaption><span class="type">Listing</span><span class="space"> </span><span class="codenumber">5.3.2<span class="period">.</span></span><span class="space"> </span>Searching in a hash table with separate chaining. The insert parameter will be set to the address of a pointer to an entry. This pointer can be used by the insertion function to chain-in a new entry.</figcaption></figure><figure class="listing figure-like" id="listing-29"><div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">/// Insert into a hash table with separate chaining.
int hash_chain_insert(chaining_hashtable_t* ht, void* key, eq_t equals) {
    entry_t** insert;
    int found = hash_chain_search(ht, key, equals, &amp;insert);
    if (found) {
        // the hash table did not change
        return 0;
    }
    // The search function sets insert to the address of 
    // the last next pointer in the collision chain
    assert (*insert == NULL);
    // here, we know that the element is not in the table
    // so we allocate a new list entry
    entry_t* e = malloc(sizeof(*e));
    // initialize the entry
    e-&gt;next = NULL;
    e-&gt;key = key;
    // and append it to the collision chain
    *insert = e; 
    ++ht-&gt;size;
    return 1;
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=%20%23include%20%3Cstdlib.h%3E%0A%0Atypedef%20int%20(*eq_t)(void*%20p%2C%20void*%20q)%3B%0Atypedef%20int%20(*hash_fct_t)(void*%20key)%3B%0A%0Atypedef%20struct%20entry_t%20%7B%0A%20%20%20%20void*%20key%3B%0A%20%20%20%20struct%20entry_t*%20next%3B%0A%7D%20entry_t%3B%0A%0Atypedef%20struct%20%7B%0A%20%20%20%20unsigned%20size%3B%20%20%20%20%20%20%20%20%20%20%2F%2F%20%23%20of%20keys%20in%20the%20table%0A%20%20%20%20unsigned%20table_length%3B%20%20%2F%2F%20length%20of%20the%20hash%20table%0A%20%20%20%20float%20max_load_factor%3B%20%20%2F%2F%20the%20maximal%20load%20factor%0A%20%20%20%20hash_fct_t%20h%3B%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20the%20hash%20function.%0A%20%20%20%20entry_t**%20table%3B%20%20%20%20%20%20%20%20%2F%2F%20an%20array%20of%20singly-linked%20entry%20lists%0A%7D%20chaining_hashtable_t%3B%0A%0A%2F%2F%2F%20This%20function%20searches%20for%20a%20key%20%0A%2F%2F%2F%20in%20a%20hash%20tab%20with%20separate%20chaining.%0A%2F%2F%2F%20@param%20ht%20The%20hash%20table%0A%2F%2F%2F%20@param%20key%20The%20key%20to%20search%20for%0A%2F%2F%2F%20@param%20hash%20The%20hash%20function%20value%20for%20key%0A%2F%2F%2F%20@param%20eq%20A%20function%20to%20compare%20two%20keys%20for%20equality%0A%2F%2F%2F%20@param%20insert%20The%20address%20of%20a%20pointer%20to%20an%20entry_t%20pointer.%0A%2F%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20There%2C%20we%20will%20put%20the%20address%20of%20the%20pointer%0A%2F%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20where%20the%20new%20collision%20chain%20entry%20should%20be%0A%2F%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20appended%20in%20the%20case%20where%20we%20insert%20a%20new%20key.%0Aint%20hash_chain_search(chaining_hashtable_t*%20ht%2C%20void*%20key%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20eq_t%20equals%2C%20entry_t***%20insert)%20%7B%0A%20%20%20%20unsigned%20bucket%20%3D%20ht-%3Eh(key)%20%25%20ht-%3Etable_length%3B%20%20%2F%2F%20compute%20h_m%0A%20%20%20%20*insert%20%3D%20ht-%3Etable%20%2B%20bucket%3B%20%20%20%20%20%20%20%0A%20%20%20%20for%20(entry_t*%20e%20%3D%20ht-%3Etable%5Bbucket%5D%3B%20e%20!%3D%20NULL%3B%20e%20%3D%20e-%3Enext)%20%7B%0A%20%20%20%20%20%20%20%20if%20(equals(e-%3Ekey%2C%20key))%0A%20%20%20%20%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%20%20%20%20*insert%20%3D%20%26e-%3Enext%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%200%3B%0A%7D%0A%0A%2F%2F%2F%20Insert%20into%20a%20hash%20table%20with%20separate%20chaining.%0Aint%20hash_chain_insert(chaining_hashtable_t*%20ht%2C%20void*%20key%2C%20eq_t%20equals)%20%7B%0A%20%20%20%20entry_t**%20insert%3B%0A%20%20%20%20int%20found%20%3D%20hash_chain_search(ht%2C%20key%2C%20equals%2C%20%26insert)%3B%0A%20%20%20%20if%20(found)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20the%20hash%20table%20did%20not%20change%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20The%20search%20function%20sets%20insert%20to%20the%20address%20of%20%0A%20%20%20%20%2F%2F%20the%20last%20next%20pointer%20in%20the%20collision%20chain%0A%20%20%20%20assert%20(*insert%20%3D%3D%20NULL)%3B%0A%20%20%20%20%2F%2F%20here%2C%20we%20know%20that%20the%20element%20is%20not%20in%20the%20table%0A%20%20%20%20%2F%2F%20so%20we%20allocate%20a%20new%20list%20entry%0A%20%20%20%20entry_t*%20e%20%3D%20malloc(sizeof(*e))%3B%0A%20%20%20%20%2F%2F%20initialize%20the%20entry%0A%20%20%20%20e-%3Enext%20%3D%20NULL%3B%0A%20%20%20%20e-%3Ekey%20%3D%20key%3B%0A%20%20%20%20%2F%2F%20and%20append%20it%20to%20the%20collision%20chain%0A%20%20%20%20*insert%20%3D%20e%3B%20%0A%20%20%20%20%2B%2Bht-%3Esize%3B%0A%20%20%20%20return%201%3B%0A%7D%0A%0Aint%20hash_chain_insert_resize(chaining_hashtable_t*%20ht%2C%20void*%20key%2C%20eq_t%20eq)%20%7B%0A%20%20%20%20if%20(ht-%3Esize%20%3E%20ht-%3Emax_load_factor%20*%20ht-%3Etable_length)%20%7B%0A%20%20%20%20%20%20%20%20ht-%3Etable_length%20*%3D%202%3B%0A%20%20%20%20%20%20%20%20assert%20(ht-%3Esize%20%3C%20ht-%3Emax_load_factor%20*%20ht-%3Etable_length)%3B%0A%20%20%20%20%20%20%20%20entry_t**%20old_table%20%3D%20ht-%3Etable%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20allocate%20new%20table%20and%20initialize%20to%200%0A%20%20%20%20%20%20%20%20ht-%3Etable%20%3D%20calloc(ht-%3Etable_length%2C%20sizeof(ht-%3Etable%5B0%5D))%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20go%20over%20old%20hash%20table%20and%20add%20each%20element%20to%20new%20table%0A%20%20%20%20%20%20%20%20rehash_table(ht%2C%20old_table)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20free%20old%20table%0A%20%20%20%20%20%20%20%20free(old_table)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20hash_chain_insert(ht%2C%20key%2C%20eq)%3B%0A%7D%0A%0Atypedef%20struct%20%7B%0A%20%20%20%20unsigned%20size%3B%0A%20%20%20%20unsigned%20table_length%3B%0A%20%20%20%20float%20max_load_factor%3B%0A%20%20%20%20hash_fct_t%20h%3B%0A%20%20%20%20void**%20table%3B%0A%7D%20open_addr_hashtable_t%3B%0A%0Aint%20open_addr_hashtable_search(open_addr_hashtable_t*%20ht%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20void%20*key%2C%20eq_t%20equals)%20%7B%0A%20%20%20%20for%20(unsigned%20i%20%3D%200%3B%20i%20%3C%20ht-%3Etable_length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20call%20probing%20function%20to%20compute%20bucket%20%0A%20%20%20%20%20%20%20%20%2F%2F%20of%20collision%20chain%20entry%0A%20%20%20%20%20%20%20%20unsigned%20bucket%20%3D%20h_prime(ht-%3Eh(key)%2C%20i)%3B%20%20%0A%20%20%20%20%20%20%20%20void*%20k%20%3D%20ht-%3Etable%5Bbucket%5D%3B%0A%20%20%20%20%20%20%20%20if%20(k%20%3D%3D%20NULL%20%7C%7C%20equals(k%2C%20key))%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20bucket%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20-1%3B%0A%7D%20">Run</a>
</div>
<figcaption><span class="type">Listing</span><span class="space"> </span><span class="codenumber">5.3.3<span class="period">.</span></span><span class="space"> </span>Inserting into a hash table with separate chaining.</figcaption></figure></section><section class="subsection" id="subsection-38"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">5.3.2</span> <span class="title">The Load Factor</span>
</h3>
<div class="para" id="p-566">Consider the situation that we were to add <span class="process-math">\(n\)</span>¬†keys into a hash table with <span class="process-math">\(m\)</span>¬†entries. Under the optimistic assumption that the hash function <span class="process-math">\(h(k)\mathrel{\%}m\)</span> distributed the <span class="process-math">\(n\)</span>¬†keys <em class="emphasis">evenly</em> across the hash table, each collision chain has length¬†<span class="process-math">\(\alpha=n/m\text{.}\)</span> This number¬†<span class="process-math">\(\alpha\)</span> is called the load factor of the hash table. The operations add, remove, search (check for containment) can, under this assumption, be carried out in¬†<span class="process-math">\(O(1+\alpha)\)</span> operations.</div>
<div class="para" id="p-567">Of course the assumption that the hash function distributes the data evenly across the table is in general hard to prove. Especially, for a given hash function, it depends on the concrete set of keys to be inserted how evenly the keys will be scattered over the table. And of course, because the hash function is in general not injective, by the <dfn class="terminology">pigeonhole principle</dfn><a href="" data-knowl="" class="id-ref fn-knowl original" data-refid="hk-fn-12" id="fn-12"><sup>‚Äâ12‚Äâ</sup></a>, for each bucket there exists a ‚Äúworst-case‚Äù of keys that all map to this bucket.</div>
<div class="para" id="p-568">In practice, one is interested in keeping <span class="process-math">\(\alpha\lt 1\)</span> which means that, in the ideal case, no collision contains more than one key. To achieve this, on each insertion operation the load factor is checked and if it passes a certain threshold (0.75 is a common value) the hash table is resized. Note that when the hash table is resized, <span class="process-math">\(h_m\)</span> also changes and all elements in have to be <em class="emphasis">rehashed</em> into the new table. Doubling the size of the table yields an amortized constant number of rehashing operations for the same argument made in <a href="sec-ds-lists.html#sec-ds-arraylist" class="internal" title="Subsection 5.1.1: Array Lists">Subsection¬†5.1.1</a>.</div>
<figure class="listing figure-like" id="listing-30"><div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">int hash_chain_insert_resize(chaining_hashtable_t* ht, void* key, eq_t eq) {
    if (ht-&gt;size &gt; ht-&gt;max_load_factor * ht-&gt;table_length) {
        ht-&gt;table_length *= 2;
        assert (ht-&gt;size &lt; ht-&gt;max_load_factor * ht-&gt;table_length);
        entry_t** old_table = ht-&gt;table;
        // allocate new table and initialize to 0
        ht-&gt;table = calloc(ht-&gt;table_length, sizeof(ht-&gt;table[0]));
        // go over old hash table and add each element to new table
        rehash_table(ht, old_table);
        // free old table
        free(old_table);
    }

    return hash_chain_insert(ht, key, eq);
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=%20%23include%20%3Cstdlib.h%3E%0A%0Atypedef%20int%20(*eq_t)(void*%20p%2C%20void*%20q)%3B%0Atypedef%20int%20(*hash_fct_t)(void*%20key)%3B%0A%0Atypedef%20struct%20entry_t%20%7B%0A%20%20%20%20void*%20key%3B%0A%20%20%20%20struct%20entry_t*%20next%3B%0A%7D%20entry_t%3B%0A%0Atypedef%20struct%20%7B%0A%20%20%20%20unsigned%20size%3B%20%20%20%20%20%20%20%20%20%20%2F%2F%20%23%20of%20keys%20in%20the%20table%0A%20%20%20%20unsigned%20table_length%3B%20%20%2F%2F%20length%20of%20the%20hash%20table%0A%20%20%20%20float%20max_load_factor%3B%20%20%2F%2F%20the%20maximal%20load%20factor%0A%20%20%20%20hash_fct_t%20h%3B%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20the%20hash%20function.%0A%20%20%20%20entry_t**%20table%3B%20%20%20%20%20%20%20%20%2F%2F%20an%20array%20of%20singly-linked%20entry%20lists%0A%7D%20chaining_hashtable_t%3B%0A%0A%2F%2F%2F%20This%20function%20searches%20for%20a%20key%20%0A%2F%2F%2F%20in%20a%20hash%20tab%20with%20separate%20chaining.%0A%2F%2F%2F%20@param%20ht%20The%20hash%20table%0A%2F%2F%2F%20@param%20key%20The%20key%20to%20search%20for%0A%2F%2F%2F%20@param%20hash%20The%20hash%20function%20value%20for%20key%0A%2F%2F%2F%20@param%20eq%20A%20function%20to%20compare%20two%20keys%20for%20equality%0A%2F%2F%2F%20@param%20insert%20The%20address%20of%20a%20pointer%20to%20an%20entry_t%20pointer.%0A%2F%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20There%2C%20we%20will%20put%20the%20address%20of%20the%20pointer%0A%2F%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20where%20the%20new%20collision%20chain%20entry%20should%20be%0A%2F%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20appended%20in%20the%20case%20where%20we%20insert%20a%20new%20key.%0Aint%20hash_chain_search(chaining_hashtable_t*%20ht%2C%20void*%20key%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20eq_t%20equals%2C%20entry_t***%20insert)%20%7B%0A%20%20%20%20unsigned%20bucket%20%3D%20ht-%3Eh(key)%20%25%20ht-%3Etable_length%3B%20%20%2F%2F%20compute%20h_m%0A%20%20%20%20*insert%20%3D%20ht-%3Etable%20%2B%20bucket%3B%20%20%20%20%20%20%20%0A%20%20%20%20for%20(entry_t*%20e%20%3D%20ht-%3Etable%5Bbucket%5D%3B%20e%20!%3D%20NULL%3B%20e%20%3D%20e-%3Enext)%20%7B%0A%20%20%20%20%20%20%20%20if%20(equals(e-%3Ekey%2C%20key))%0A%20%20%20%20%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%20%20%20%20*insert%20%3D%20%26e-%3Enext%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%200%3B%0A%7D%0A%0A%2F%2F%2F%20Insert%20into%20a%20hash%20table%20with%20separate%20chaining.%0Aint%20hash_chain_insert(chaining_hashtable_t*%20ht%2C%20void*%20key%2C%20eq_t%20equals)%20%7B%0A%20%20%20%20entry_t**%20insert%3B%0A%20%20%20%20int%20found%20%3D%20hash_chain_search(ht%2C%20key%2C%20equals%2C%20%26insert)%3B%0A%20%20%20%20if%20(found)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20the%20hash%20table%20did%20not%20change%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20The%20search%20function%20sets%20insert%20to%20the%20address%20of%20%0A%20%20%20%20%2F%2F%20the%20last%20next%20pointer%20in%20the%20collision%20chain%0A%20%20%20%20assert%20(*insert%20%3D%3D%20NULL)%3B%0A%20%20%20%20%2F%2F%20here%2C%20we%20know%20that%20the%20element%20is%20not%20in%20the%20table%0A%20%20%20%20%2F%2F%20so%20we%20allocate%20a%20new%20list%20entry%0A%20%20%20%20entry_t*%20e%20%3D%20malloc(sizeof(*e))%3B%0A%20%20%20%20%2F%2F%20initialize%20the%20entry%0A%20%20%20%20e-%3Enext%20%3D%20NULL%3B%0A%20%20%20%20e-%3Ekey%20%3D%20key%3B%0A%20%20%20%20%2F%2F%20and%20append%20it%20to%20the%20collision%20chain%0A%20%20%20%20*insert%20%3D%20e%3B%20%0A%20%20%20%20%2B%2Bht-%3Esize%3B%0A%20%20%20%20return%201%3B%0A%7D%0A%0Aint%20hash_chain_insert_resize(chaining_hashtable_t*%20ht%2C%20void*%20key%2C%20eq_t%20eq)%20%7B%0A%20%20%20%20if%20(ht-%3Esize%20%3E%20ht-%3Emax_load_factor%20*%20ht-%3Etable_length)%20%7B%0A%20%20%20%20%20%20%20%20ht-%3Etable_length%20*%3D%202%3B%0A%20%20%20%20%20%20%20%20assert%20(ht-%3Esize%20%3C%20ht-%3Emax_load_factor%20*%20ht-%3Etable_length)%3B%0A%20%20%20%20%20%20%20%20entry_t**%20old_table%20%3D%20ht-%3Etable%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20allocate%20new%20table%20and%20initialize%20to%200%0A%20%20%20%20%20%20%20%20ht-%3Etable%20%3D%20calloc(ht-%3Etable_length%2C%20sizeof(ht-%3Etable%5B0%5D))%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20go%20over%20old%20hash%20table%20and%20add%20each%20element%20to%20new%20table%0A%20%20%20%20%20%20%20%20rehash_table(ht%2C%20old_table)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20free%20old%20table%0A%20%20%20%20%20%20%20%20free(old_table)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20hash_chain_insert(ht%2C%20key%2C%20eq)%3B%0A%7D%0A%0Atypedef%20struct%20%7B%0A%20%20%20%20unsigned%20size%3B%0A%20%20%20%20unsigned%20table_length%3B%0A%20%20%20%20float%20max_load_factor%3B%0A%20%20%20%20hash_fct_t%20h%3B%0A%20%20%20%20void**%20table%3B%0A%7D%20open_addr_hashtable_t%3B%0A%0Aint%20open_addr_hashtable_search(open_addr_hashtable_t*%20ht%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20void%20*key%2C%20eq_t%20equals)%20%7B%0A%20%20%20%20for%20(unsigned%20i%20%3D%200%3B%20i%20%3C%20ht-%3Etable_length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20call%20probing%20function%20to%20compute%20bucket%20%0A%20%20%20%20%20%20%20%20%2F%2F%20of%20collision%20chain%20entry%0A%20%20%20%20%20%20%20%20unsigned%20bucket%20%3D%20h_prime(ht-%3Eh(key)%2C%20i)%3B%20%20%0A%20%20%20%20%20%20%20%20void*%20k%20%3D%20ht-%3Etable%5Bbucket%5D%3B%0A%20%20%20%20%20%20%20%20if%20(k%20%3D%3D%20NULL%20%7C%7C%20equals(k%2C%20key))%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20bucket%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20-1%3B%0A%7D%20">Run</a>
</div>
<figcaption><span class="type">Listing</span><span class="space"> </span><span class="codenumber">5.3.4<span class="period">.</span></span><span class="space"> </span>Inserting into a hash table with separate chaining with resizing of the hash table if the load factor threshold is exceeded. The function `rehash_table` traverses all collision chains of the old table and inserts the elements into the new table.</figcaption></figure></section><section class="subsection" id="subsection-39"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">5.3.3</span> <span class="title">Hash Tables and Mutability</span>
</h3>
<div class="para" id="p-569">When hashing mutable data (cf.¬†<a href="sec-java-immutable.html" class="internal" title="Section 8.6: References, Aliasing, and Immutable Objects">Section¬†8.6</a>) one has to be extremely cautious. Typically, the value of the hash function depends on the fields of the struct/class. Changing the values of the fields while a certain object is referenced from a hash table may suddenly make the hash value with which it was hashed in and therefore the hash table index invalid so that it cannot be found anymore.</div>
<div class="para" id="p-570">Consider the following example:</div>
<div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">typedef struct {
  int numerator, denominator;
} fraction_t;

int hash_fraction(fraction_t* f) {
  int d = f-&gt;d;
  int n = f-&gt;n;
  return (d + n) * (d + n + 1) / 2 + n;
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=%0Atypedef%20struct%20%7B%0A%20%20int%20numerator%2C%20denominator%3B%0A%7D%20fraction_t%3B%0A%0Aint%20hash_fraction(fraction_t*%20f)%20%7B%0A%20%20int%20d%20%3D%20f-%3Ed%3B%0A%20%20int%20n%20%3D%20f-%3En%3B%0A%20%20return%20(d%20%2B%20n)%20*%20(d%20%2B%20n%20%2B%201)%20%2F%202%20%2B%20n%3B%0A%7D%0A%20%20%20%20%20%20%20%20">Run</a>
</div>
<div class="para" id="p-571">Here, the hash value for a data type that represents fractions is computed using the fraction's numerator and denominator. For example, the fraction <span class="process-math">\(2/7\)</span> has the hash value¬†52. Assume that such a fraction is inserted to a hash table with a table length longer than¬†52. Then, it will be appended to the collision chain of bucket¬†52. If, after it has been inserted, the fraction is changed to, say, <span class="process-math">\(2/9\)</span> the hash value changes and the fraction is in the collision chain of the wrong bucket. Searching for <span class="process-math">\(2/7\)</span> in that hash table will consequently yield a negative result.</div></section><section class="subsection" id="subsection-40"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">5.3.4</span> <span class="title">Open Addressing</span>
</h3>
<div class="para" id="p-572">Chaining collisions in dedicated linked lists has the disadvantage that the linked lists incur additional memory overhead for the list elements and that linked lists have more or less random memory access patterns (see the discussion at the end of <a href="sec-ds-lists.html" class="internal" title="Section 5.1: Lists">Section¬†5.1</a>). Therefore, one often uses <dfn class="terminology">open addressing</dfn> (also known as <dfn class="terminology">probing</dfn>) where the collision chain is stored in the hash table itself.</div>
<div class="para logical" id="p-573">
<div class="para">To this end, we define a new function</div>
<div class="displaymath process-math">
\begin{equation*}
h':K\times\Nat\to\{0,\dots,m-1\}
\end{equation*}
</div>
<div class="para">which, in addition to the key, also takes a number¬†<span class="process-math">\(i\)</span> that serves as the position of key in its collision chain, and yields the table index where the <span class="process-math">\(i\)</span>-th element of <span class="process-math">\(k\)</span>'s collision chain shall be stored. When inserting a new key¬†<span class="process-math">\(k\)</span> into the hash table, we compute¬†<span class="process-math">\(h'(k,0)\)</span> and check if the hash table is occupied at this position. If not, we enter¬†<span class="process-math">\(k\)</span> there. If yes, we compute¬†<span class="process-math">\(h'(k,1)\)</span> and check again, and so on.</div>
</div>
<figure class="listing figure-like" id="lst-ds-hash-probe"><div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">typedef struct {
    unsigned size;
    unsigned table_length;
    float max_load_factor;
    hash_fct_t h;
    void** table;
} open_addr_hashtable_t;

int open_addr_hashtable_search(open_addr_hashtable_t* ht, 
                               void *key, eq_t equals) {
    for (unsigned i = 0; i &lt; ht-&gt;table_length; i++) {
        // call probing function to compute bucket 
        // of collision chain entry
        unsigned bucket = h_prime(ht-&gt;h(key), i);  
        void* k = ht-&gt;table[bucket];
        if (k == NULL || equals(k, key))
            return bucket;
    }
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=%20%23include%20%3Cstdlib.h%3E%0A%0Atypedef%20int%20(*eq_t)(void*%20p%2C%20void*%20q)%3B%0Atypedef%20int%20(*hash_fct_t)(void*%20key)%3B%0A%0Atypedef%20struct%20entry_t%20%7B%0A%20%20%20%20void*%20key%3B%0A%20%20%20%20struct%20entry_t*%20next%3B%0A%7D%20entry_t%3B%0A%0Atypedef%20struct%20%7B%0A%20%20%20%20unsigned%20size%3B%20%20%20%20%20%20%20%20%20%20%2F%2F%20%23%20of%20keys%20in%20the%20table%0A%20%20%20%20unsigned%20table_length%3B%20%20%2F%2F%20length%20of%20the%20hash%20table%0A%20%20%20%20float%20max_load_factor%3B%20%20%2F%2F%20the%20maximal%20load%20factor%0A%20%20%20%20hash_fct_t%20h%3B%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20the%20hash%20function.%0A%20%20%20%20entry_t**%20table%3B%20%20%20%20%20%20%20%20%2F%2F%20an%20array%20of%20singly-linked%20entry%20lists%0A%7D%20chaining_hashtable_t%3B%0A%0A%2F%2F%2F%20This%20function%20searches%20for%20a%20key%20%0A%2F%2F%2F%20in%20a%20hash%20tab%20with%20separate%20chaining.%0A%2F%2F%2F%20@param%20ht%20The%20hash%20table%0A%2F%2F%2F%20@param%20key%20The%20key%20to%20search%20for%0A%2F%2F%2F%20@param%20hash%20The%20hash%20function%20value%20for%20key%0A%2F%2F%2F%20@param%20eq%20A%20function%20to%20compare%20two%20keys%20for%20equality%0A%2F%2F%2F%20@param%20insert%20The%20address%20of%20a%20pointer%20to%20an%20entry_t%20pointer.%0A%2F%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20There%2C%20we%20will%20put%20the%20address%20of%20the%20pointer%0A%2F%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20where%20the%20new%20collision%20chain%20entry%20should%20be%0A%2F%2F%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20appended%20in%20the%20case%20where%20we%20insert%20a%20new%20key.%0Aint%20hash_chain_search(chaining_hashtable_t*%20ht%2C%20void*%20key%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20eq_t%20equals%2C%20entry_t***%20insert)%20%7B%0A%20%20%20%20unsigned%20bucket%20%3D%20ht-%3Eh(key)%20%25%20ht-%3Etable_length%3B%20%20%2F%2F%20compute%20h_m%0A%20%20%20%20*insert%20%3D%20ht-%3Etable%20%2B%20bucket%3B%20%20%20%20%20%20%20%0A%20%20%20%20for%20(entry_t*%20e%20%3D%20ht-%3Etable%5Bbucket%5D%3B%20e%20!%3D%20NULL%3B%20e%20%3D%20e-%3Enext)%20%7B%0A%20%20%20%20%20%20%20%20if%20(equals(e-%3Ekey%2C%20key))%0A%20%20%20%20%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%20%20%20%20*insert%20%3D%20%26e-%3Enext%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%200%3B%0A%7D%0A%0A%2F%2F%2F%20Insert%20into%20a%20hash%20table%20with%20separate%20chaining.%0Aint%20hash_chain_insert(chaining_hashtable_t*%20ht%2C%20void*%20key%2C%20eq_t%20equals)%20%7B%0A%20%20%20%20entry_t**%20insert%3B%0A%20%20%20%20int%20found%20%3D%20hash_chain_search(ht%2C%20key%2C%20equals%2C%20%26insert)%3B%0A%20%20%20%20if%20(found)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20the%20hash%20table%20did%20not%20change%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20%7D%0A%20%20%20%20%2F%2F%20The%20search%20function%20sets%20insert%20to%20the%20address%20of%20%0A%20%20%20%20%2F%2F%20the%20last%20next%20pointer%20in%20the%20collision%20chain%0A%20%20%20%20assert%20(*insert%20%3D%3D%20NULL)%3B%0A%20%20%20%20%2F%2F%20here%2C%20we%20know%20that%20the%20element%20is%20not%20in%20the%20table%0A%20%20%20%20%2F%2F%20so%20we%20allocate%20a%20new%20list%20entry%0A%20%20%20%20entry_t*%20e%20%3D%20malloc(sizeof(*e))%3B%0A%20%20%20%20%2F%2F%20initialize%20the%20entry%0A%20%20%20%20e-%3Enext%20%3D%20NULL%3B%0A%20%20%20%20e-%3Ekey%20%3D%20key%3B%0A%20%20%20%20%2F%2F%20and%20append%20it%20to%20the%20collision%20chain%0A%20%20%20%20*insert%20%3D%20e%3B%20%0A%20%20%20%20%2B%2Bht-%3Esize%3B%0A%20%20%20%20return%201%3B%0A%7D%0A%0Aint%20hash_chain_insert_resize(chaining_hashtable_t*%20ht%2C%20void*%20key%2C%20eq_t%20eq)%20%7B%0A%20%20%20%20if%20(ht-%3Esize%20%3E%20ht-%3Emax_load_factor%20*%20ht-%3Etable_length)%20%7B%0A%20%20%20%20%20%20%20%20ht-%3Etable_length%20*%3D%202%3B%0A%20%20%20%20%20%20%20%20assert%20(ht-%3Esize%20%3C%20ht-%3Emax_load_factor%20*%20ht-%3Etable_length)%3B%0A%20%20%20%20%20%20%20%20entry_t**%20old_table%20%3D%20ht-%3Etable%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20allocate%20new%20table%20and%20initialize%20to%200%0A%20%20%20%20%20%20%20%20ht-%3Etable%20%3D%20calloc(ht-%3Etable_length%2C%20sizeof(ht-%3Etable%5B0%5D))%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20go%20over%20old%20hash%20table%20and%20add%20each%20element%20to%20new%20table%0A%20%20%20%20%20%20%20%20rehash_table(ht%2C%20old_table)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20free%20old%20table%0A%20%20%20%20%20%20%20%20free(old_table)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20return%20hash_chain_insert(ht%2C%20key%2C%20eq)%3B%0A%7D%0A%0Atypedef%20struct%20%7B%0A%20%20%20%20unsigned%20size%3B%0A%20%20%20%20unsigned%20table_length%3B%0A%20%20%20%20float%20max_load_factor%3B%0A%20%20%20%20hash_fct_t%20h%3B%0A%20%20%20%20void**%20table%3B%0A%7D%20open_addr_hashtable_t%3B%0A%0Aint%20open_addr_hashtable_search(open_addr_hashtable_t*%20ht%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20void%20*key%2C%20eq_t%20equals)%20%7B%0A%20%20%20%20for%20(unsigned%20i%20%3D%200%3B%20i%20%3C%20ht-%3Etable_length%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20call%20probing%20function%20to%20compute%20bucket%20%0A%20%20%20%20%20%20%20%20%2F%2F%20of%20collision%20chain%20entry%0A%20%20%20%20%20%20%20%20unsigned%20bucket%20%3D%20h_prime(ht-%3Eh(key)%2C%20i)%3B%20%20%0A%20%20%20%20%20%20%20%20void*%20k%20%3D%20ht-%3Etable%5Bbucket%5D%3B%0A%20%20%20%20%20%20%20%20if%20(k%20%3D%3D%20NULL%20%7C%7C%20equals(k%2C%20key))%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20bucket%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20-1%3B%0A%7D%20">Run</a>
</div>
<figcaption><span class="type">Listing</span><span class="space"> </span><span class="codenumber">5.3.5<span class="period">.</span></span><span class="space"> </span>Inserting into a hash table with open addressing.</figcaption></figure><div class="para logical" id="p-574">
<div class="para">The function <code class="code-inline tex2jax_ignore">probing_hashtable_search</code> returns the table index of a key equal to¬†<code class="code-inline tex2jax_ignore">key</code> if such a key is in the table. If there is no such key, it returns the index in the hash table where¬†<code class="code-inline tex2jax_ignore">key</code> can be inserted. If all entries¬†<span class="process-math">\(h'(k,0),h'(k,1),\dots,h'(k,m-1)\)</span> are occupied it returns the error code¬†-1. The pressing question now is if the table really is full in this case, i.e. if <span class="process-math">\(h'\)</span> is <em class="emphasis">surjective</em> with respect to its second parameter for each key. This certainly depends on how we define¬†<span class="process-math">\(h'\text{.}\)</span> In the following, we will discuss two different ways of defining¬†<span class="process-math">\(h'\)</span> for which hold that</div>
<div class="displaymath process-math">
\begin{equation*}
\{h'(k,0),h'(k,1),\dots,h'(k,m-1) \}=\{0,\dots,m-1\}
\end{equation*}
</div>
<div class="para">i.e. that whenever the search function returns -1 the table is indeed full.</div>
</div>
<section class="paragraphs" id="paragraphs-27"><h4 class="heading"><span class="title">Linear Probing.</span></h4> <div class="para logical" id="p-575">
<div class="para">The simplest approach to surjective probing is <dfn class="terminology">linear probing</dfn>:</div>
<div class="displaymath process-math" data-contains-math-knowls="./knowl/lst-ds-hash-probe.html">
\begin{equation*}
h'(k,i)\defeq (h(k)+i)\mathrel{\%}m
\end{equation*}
</div>
<div class="para">Linear probing trivially guarantees that each bucket will be searched for¬†<span class="process-math">\(k\text{,}\)</span> i.e. if there is a free bucket, linear probing will find it. A disadvantage of linear probing is that in practice sometimes clusters will form at certain entries which can impede performance of the search operation (see <a href="" class="xref" data-knowl="./knowl/lst-ds-hash-probe.html" title="Listing 5.3.5">Listing¬†5.3.5</a>): The larger the clusters the further away from <span class="process-math">\(h'(k,0)\)</span> will be the actual bucket for a key¬†<span class="process-math">\(k\)</span> and the more the run time for searching increases. An advantage however is the linear access pattern in which the table is traversed. This may lead to better cache locality and favor several microarchitectural optimizations modern processors make.</div>
</div></section><section class="paragraphs" id="paragraphs-28"><h4 class="heading"><span class="title">Quadratic Probing.</span></h4> <div class="para logical" id="p-576">
<div class="para">
<dfn class="terminology">Quadratic probing</dfn> was introduced to solve the problem of cluster formation of linear probing. To this end, one introduces a quadratic term to ‚Äúpush‚Äù higher collision chain entries further away:</div>
<div class="displaymath process-math">
\begin{equation*}
h'(k,i)\defeq (h(k)+ci+di^2)\mathrel{\%}m
\end{equation*}
</div>
<div class="para">Now the question is can¬†<span class="process-math">\(c\)</span> and¬†<span class="process-math">\(d\)</span> chosen such that <span class="process-math">\(h'\)</span> is surjective on the table for each key. (Again, if it is not, this implies that we would not be able to add a key even if the table was not full.) The following theorem establishes that by setting <span class="process-math">\(c=d=1/2\)</span> makes¬†<span class="process-math">\(h'\)</span> <em class="emphasis">injective</em> on¬†<span class="process-math">\(\{0,\dots,s^k-1\}\)</span> for any¬†<span class="process-math">\(k\ge 0\text{.}\)</span>
</div>
</div> <article class="theorem theorem-like" id="thm-ds-hash-quadprobe"><h5 class="heading">
<span class="type">Theorem</span><span class="space"> </span><span class="codenumber">5.3.6</span><span class="period">.</span>
</h5>
<div class="para" id="p-577">
<span class="process-math">\(h_a'(i)\defeq (a+i(i+1)/2)\mathrel{\%}{2^k}\)</span> is injective on ¬†<span class="process-math">\(\{0,\dots,2^k-1\}\text{.}\)</span>
</div></article><article class="hiddenproof" id="proof-8"><a href="" data-knowl="" class="id-ref proof-knowl original" data-refid="hk-proof-8"><h5 class="heading"><span class="type">Proof<span class="period">.</span></span></h5></a></article><div class="hidden-content tex2jax_ignore" id="hk-proof-8"><article class="hiddenproof"><div class="para logical" id="p-578">
<div class="para">By contradiction: Assume there is <span class="process-math">\(h_a(i)=h_a(j)\)</span> for two numbers¬†<span class="process-math">\(i\ne j\)</span> in the set¬†<span class="process-math">\(\{0,\dots,2^k-1\}\text{.}\)</span> Then,</div>
<div class="displaymath process-math">
\begin{equation*}
a+i(i+1)/2\equiv a+j(j+1)/2\mod 2^k
\end{equation*}
</div>
<div class="para">and there is a <span class="process-math">\(q\in\mathbb Z\)</span> such that</div>
<div class="displaymath process-math" id="md-11">
\begin{align*}
\amp      \amp i(i+1)/2-j(j+1)/2 \amp = q\cdot 2^k\\
\amp \iff \amp i(i+1)-j(i+1)   \amp = q\cdot 2^{k+1}\\
\amp \iff \amp (i+j+1)(i-j)    \amp = q\cdot 2^{k+1}
\end{align*}
</div>
<div class="para">Now, the first observation is that for <span class="process-math">\(i\ne j\)</span> the product <span class="process-math">\((i+j+1)(i-j)\)</span> is also unequal to zero, so we have¬†<span class="process-math">\(q\ne 0\text{.}\)</span> Second, for all¬†<span class="process-math">\(i,j\)</span> holds that if <span class="process-math">\((i-j)\)</span> is odd, then <span class="process-math">\((i+j+1)\)</span> is even. This means that exactly one of both factors is a multiple of¬†<span class="process-math">\(2^{k+1}\text{.}\)</span> But since¬†<span class="process-math">\(i\)</span> and¬†<span class="process-math">\(j\)</span> are chosen from <span class="process-math">\(\{0,\dots,2^k-1\}\text{,}\)</span> both¬†<span class="process-math">\((i+j+1)\)</span> and¬†<span class="process-math">\((i-j)\)</span> are less than¬†<span class="process-math">\(2^{k+1}\)</span> which is a contradiction.</div>
</div></article></div> <article class="corollary theorem-like" id="corollary-1"><h5 class="heading">
<span class="type">Corollary</span><span class="space"> </span><span class="codenumber">5.3.7</span><span class="period">.</span>
</h5>
<div class="para" id="p-579">
<span class="process-math">\(h_a'(i)\defeq (a+i(i+1)/2)\mathrel{2^k}\)</span> is surjective on ¬†<span class="process-math">\(\{0,\dots,2^k-1\}\text{.}\)</span>
</div></article><article class="hiddenproof" id="proof-9"><a href="" data-knowl="" class="id-ref proof-knowl original" data-refid="hk-proof-9"><h5 class="heading"><span class="type">Proof<span class="period">.</span></span></h5></a></article><div class="hidden-content tex2jax_ignore" id="hk-proof-9"><article class="hiddenproof"><div class="para" id="p-580">Since the domain of¬†<span class="process-math">\(h_a'\)</span> is equal to the codomain, <a href="" class="xref" data-knowl="./knowl/thm-ds-hash-quadprobe.html" title="Theorem 5.3.6">Theorem¬†5.3.6</a> implies that <span class="process-math">\(h_a'\)</span> is a bijection and hence surjective.</div></article></div></section></section><section class="subsection" id="subsection-41"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">5.3.5</span> <span class="title">A Comprehensive Example</span>
</h3>
<div class="para" id="p-581">Let us contrast collision resolution by chaining, linear and quadratic probing. We successively add the following strings into the hash tables</div>
<pre class="code-block tex2jax_ignore">Hash Assertion Heap Hoare Binary
</pre>
<div class="para" id="p-582">For the sake of simplicity, we use the index of first letter in the alphabet as the hash value of the string, i.e. <span class="process-math">\(h(\mathtt{'A'})=0,h(\mathtt{'B'})=1\text{,}\)</span> etc. Note that in practice this is not a good hash function because it throws all strings that start with the same letter into the same bucket. Better hash functions would consider at least multiple characters of the string and maybe also weight them differently to differentiate permutations.</div>
<div class="sidebyside"><div class="sbsrow" style="margin-left:2%;margin-right:2%;">
<div class="sbspanel top" style="width:56.25%;"><figure class="figure figure-like" id="sec-ds-hash-ex-chain"><img src="generated/latex-image/image-26.svg" role="img" class="contained"><figcaption><span class="type">Figure</span><span class="space"> </span><span class="codenumber">5.3.8<span class="period">.</span></span><span class="space"> </span>Collision resolution with separate chaining.</figcaption></figure></div>
<div class="sbspanel top" style="width:20.8333333333333%;"><figure class="figure figure-like" id="sec-ds-hash-ex-linear"><img src="generated/latex-image/image-27.svg" role="img" class="contained"><figcaption><span class="type">Figure</span><span class="space"> </span><span class="codenumber">5.3.9<span class="period">.</span></span><span class="space"> </span>Collision resolution with open addressing and linear probing.</figcaption></figure></div>
<div class="sbspanel top" style="width:20.8333333333333%;"><figure class="figure figure-like" id="sec-ds-hash-ex-quadratic"><img src="generated/latex-image/image-28.svg" role="img" class="contained"><figcaption><span class="type">Figure</span><span class="space"> </span><span class="codenumber">5.3.10<span class="period">.</span></span><span class="space"> </span>Collision resolution with open addressing and quadratic probing.</figcaption></figure></div>
</div></div></section><section class="subsection" id="subsection-42"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">5.3.6</span> <span class="title">Deleting from a Hash Table with Open Addressing</span>
</h3>
<div class="para" id="p-583">An interesting situation arises when deleting an element from an open addressing hash table. Let us consider the example in <a href="" class="xref" data-knowl="./knowl/sec-ds-hash-ex-linear.html" title="Figure 5.3.9">Figure¬†5.3.9</a> and assume that we want to remove the key ‚ÄòHeap‚Äô after having inserted all the keys. If we just remove ‚ÄúHeap‚Äù from the table and set the table entry to <code class="code-inline tex2jax_ignore">NULL</code>, there will be a ‚Äúhole‚Äù in the linear probing sequence for entry <code class="code-inline tex2jax_ignore">Hoare</code>. So if we search for <code class="code-inline tex2jax_ignore">Hoare</code> after having removed <code class="code-inline tex2jax_ignore">Heap</code> this way, we would not find it anymore because the search function (<a href="" class="xref" data-knowl="./knowl/lst-ds-hash-probe.html" title="Listing 5.3.5">Listing¬†5.3.5</a>) would interpret the collision chain for <code class="code-inline tex2jax_ignore">Hoare</code> to be terminated at index¬†1.</div>
<div class="para" id="p-584">This problem can be solved by not setting the table entry of the removed key to <code class="code-inline tex2jax_ignore">NULL</code> but to a special value, sometimes called <dfn class="terminology">tombstone</dfn> to indicate that there <em class="emphasis">was</em> an entry. When searching for insertion points, tombstones count as empty entries, when searching for containment checking, they count as occupied entries.</div></section><section class="subsection" id="subsection-43"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">5.3.7</span> <span class="title">Summary</span>
</h3>
<div class="para" id="p-585">We have merely scratched the surface of hashing and only explained some of the basic concepts.</div>
<div class="para" id="p-586">Hashing is widely used in practice because it is very fast, typically faster than search trees. Especially open addressing hash tables, although on first sight less intuitive as separate chaining hash tables, are considered to perform very well mostly because they have very good memory access behavior due to their locality: everything is concentrated in one array. One may want also want to directly place the hashed key-value pairs into the table and not operate with <code class="code-inline tex2jax_ignore">void*</code> pointers as we did in our examples for the sake of simplicity. In practice that typically depends on the size of the key-value pair.</div>
<div class="para" id="p-587">We have said little about what makes a good hash function. This is a wide field and often also subject to empirical evaluations. Intuitively, a good hash function should scatter the data evenly across the hash table but it is not straightforward to say something substantial on specific hash functions.</div>
<div class="para" id="p-588">We have also omitted a solid formal derivation of worst-case run time bounds because this is in general not possible without making further assumptions. One very prominent formal approach is <em class="emphasis">universal hashing</em> where one draws <em class="emphasis">hash functions</em> randomly and is able to prove run time bounds for specific hash functions independent of the data.</div>
<div class="para" id="p-589">Although hashing is not easy to come by theoretically, it is, although there exit pathological worst-case scenarios, very popular in practice because it is very fast in the average case. We refer the interested reader to a recent extensive experimental study that explores many different dimensions in the hashing design space <a href="" class="xref" data-knowl="./knowl/dittrich-hash.html" title="Bibliographic Entry 15: A Seven-Dimensional Analysis of Hashing Methods and its Implications on Query Processing">[15]</a>.</div></section></section><div class="hidden-content tex2jax_ignore" id="hk-fn-12"><div class="fn">The pigeonhole principle says that if¬†<span class="process-math">\(n\)</span> keys are mapped to <span class="process-math">\(m\)</span>¬†entries with¬†<span class="process-math">\(n\ge m\text{,}\)</span> then at least one entry must contain more than one key.</div></div>
</div>
<div class="ptx-content-footer">
<input xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" id="toggle" name="darkmode" class="toggle save-cb-state" type="checkbox"><a class="previous-button button" href="sec-ds-trees.html" title="Previous"><span class="icon">&lt;</span><span class="name">Prev</span></a><a class="top-button button" href="#" title="Top"><span class="icon">^</span><span class="name">Top</span></a><a class="next-button button" href="sec-ds-dynpro.html" title="Next"><span class="name">Next</span><span class="icon">&gt;</span></a>
</div></main>
</div>
<div id="ptx-page-footer">
<a class="pretext-link" href="https://pretextbook.org" title="PreTeXt"><div class="logo"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="338 3000 8772 6866"><g style="stroke-width:.025in; stroke:black; fill:none"><polyline points="472,3590 472,9732 " style="stroke:#000000;stroke-width:174; stroke-linejoin:miter; stroke-linecap:round; "></polyline><path style="stroke:#000000;stroke-width:126;stroke-linecap:butt;" d="M 4724,9448 A 4660 4660  0  0  1  8598  9259"></path><path style="stroke:#000000;stroke-width:174;stroke-linecap:butt;" d="M 4488,9685 A 4228 4228  0  0  0   472  9732"></path><path style="stroke:#000000;stroke-width:126;stroke-linecap:butt;" d="M 4724,3590 A 4241 4241  0  0  1  8598  3496"></path><path style="stroke:#000000;stroke-width:126;stroke-linecap:round;" d="M 850,3496  A 4241 4241  0  0  1  4724  3590"></path><path style="stroke:#000000;stroke-width:126;stroke-linecap:round;" d="M 850,9259  A 4507 4507  0  0  1  4724  9448"></path><polyline points="5385,4299 4062,8125" style="stroke:#000000;stroke-width:300; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="8598,3496 8598,9259" style="stroke:#000000;stroke-width:126; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="850,3496 850,9259" style="stroke:#000000;stroke-width:126; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="4960,9685 4488,9685" style="stroke:#000000;stroke-width:174; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="3070,4582 1889,6141 3070,7700" style="stroke:#000000;stroke-width:300; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="6418,4582 7600,6141 6418,7700" style="stroke:#000000;stroke-width:300; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="8976,3590 8976,9732" style="stroke:#000000;stroke-width:174; stroke-linejoin:miter; stroke-linecap:round;"></polyline><path style="stroke:#000000;stroke-width:174;stroke-linecap:butt;" d="M 4960,9685 A 4228 4228  0  0  1  8976  9732"></path></g></svg></div></a><a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" class="runestone-link" href="https://cdltools.cs.uni-saarland.de/prog2interpreter/playground" title="CDL Programming Tools"><img class="logo" src="https://www.gravatar.com/avatar/f76d08beeac8604f40bdc5550339aeab?s=256"></a><a class="mathjax-link" href="https://www.mathjax.org" title="MathJax"><img class="logo" src="https://www.mathjax.org/badge/badge-square-2.png"></a>
</div>
<script src="external/custom.js"></script><script src="external/prism-line-numbers.js"></script>
</body>
</html>
