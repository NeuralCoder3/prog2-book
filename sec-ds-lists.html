<!DOCTYPE html>
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<html lang="en-US">
<head xmlns:og="http://ogp.me/ns#" xmlns:book="https://ogp.me/ns/book#">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Lists</title>
<meta name="Keywords" content="Authored in PreTeXt">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta property="og:type" content="book">
<meta property="book:title" content="An Introduction to Imperative Programming">
<meta property="book:author" content="Sebastian Hack">
<meta property="og:image" content="https://www.dropbox.com/s/c23qqtukzq2niqg/eule.png?raw=1">
<meta property="og:title" content="Lists">
<meta property="og:description" content="
      In this section, we discuss several simple data structures and their implementation in¬†C.
      We start with various list implementations, via arrays and pointer structures.
      Then, we briefly discuss binary trees.
    ">
<meta property="og:type" content="website">
<script>var runestoneMathReady = new Promise((resolve) => window.rsMathReady = resolve);
window.MathJax = {
  tex: {
    inlineMath: [['\\(','\\)']],
    tags: "none",
    tagSide: "right",
    tagIndent: ".8em",
    packages: {'[+]': ['base', 'mathtools', 'bussproofs', 'unicode', 'extpfeil', 'ams', 'amscd', 'color', 'newcommand', 'knowl']}
  },
  options: {
    ignoreHtmlClass: "tex2jax_ignore|ignore-math",
    processHtmlClass: "process-math",
  },
  chtml: {
    scale: 0.98,
    mtextInheritFont: true
  },
  loader: {
    load: ['input/asciimath', '[tex]/mathtools', '[tex]/bussproofs', '[tex]/unicode','[tex]/extpfeil', '[tex]/amscd', '[tex]/color', '[tex]/newcommand', '[pretext]/mathjaxknowl3.js'],
    paths: {pretext: "https://pretextbook.org/js/lib"},
  },
  startup: {
    pageReady() {
      return MathJax.startup.defaultPageReady().then(function () {
      console.log("in ready function");
      rsMathReady();
      }
    )}
  },
};
</script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/themes/prism.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-core.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/plugins/autoloader/prism-autoloader.min.js"></script><script src="https://unpkg.com/lunr/lunr.js"></script><script src="lunr-pretext-search-index.js" async=""></script><script src="https://pretextbook.org/js/0.2/pretext_search.js"></script><link href="https://pretextbook.org/css/0.6/pretext_search.css" rel="stylesheet" type="text/css">
<script>js_version = 0.2</script><script src="https://pretextbook.org/js/lib/jquery.min.js"></script><script src="https://pretextbook.org/js/lib/jquery.sticky.js"></script><script src="https://pretextbook.org/js/lib/jquery.espy.min.js"></script><script src="https://pretextbook.org/js/0.2/pretext.js"></script><script>miniversion=0.1</script><script src="https://pretextbook.org/js/0.2/pretext_add_on.js?x=1"></script><script src="https://pretextbook.org/js/0.2/user_preferences.js"></script><script src="https://pretextbook.org/js/lib/knowl.js"></script><!--knowl.js code controls Sage Cells within knowls--><script>sagecellEvalName='Evaluate (Sage)';
</script><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400;700&amp;family=Noto+Serif:ital,wght@0,400;0,700;1,400;1,700&amp;family=Tinos:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet">
<link href="https://fonts.cdnfonts.com/css/dejavu-serif" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Roboto+Serif:opsz,wdth,wght@8..144,50..150,100..900&amp;display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wdth,wght@75..100,300..800&amp;display=swap" rel="stylesheet">
<link href="https://pretextbook.org/css/0.6/pretext.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/pretext_add_on.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/shell_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/banner_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/navbar_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/toc_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/knowls_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/style_default.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/colors_blue_red.css" rel="stylesheet" type="text/css">
<link href="https://pretextbook.org/css/0.6/setcolors.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="external/custom.css">
<link rel="stylesheet" type="text/css" href="external/prism-line-numbers.css">
<script src="external/preload.js"></script><!--** eBookCongig is necessary to configure interactive       **-->
<!--** Runestone components to run locally in reader's browser **-->
<!--** No external communication:                              **-->
<!--**     log level is 0, Runestone Services are disabled     **-->
<script type="text/javascript">
eBookConfig = {};
eBookConfig.useRunestoneServices = false;
eBookConfig.host = 'http://127.0.0.1:8000';
eBookConfig.course = 'PTX_Course_Title_Here';
eBookConfig.basecourse = 'PTX_Base_Course';
eBookConfig.isLoggedIn = false;
eBookConfig.email = '';
eBookConfig.isInstructor = false;
eBookConfig.logLevel = 0;
eBookConfig.username = '';
eBookConfig.readings = null;
eBookConfig.activities = null;
eBookConfig.downloadsEnabled = false;
eBookConfig.allow_pairs = false;
eBookConfig.enableScratchAC = false;
eBookConfig.build_info = "";
eBookConfig.python3 = null;
eBookConfig.runestone_version = '7.3.3';
eBookConfig.jobehost = '';
eBookConfig.proxyuri_runs = '';
eBookConfig.proxyuri_files = '';
eBookConfig.enable_chatcodes =  false;
</script>
<!--*** Runestone Services ***-->
<script type="text/javascript" src="./external/dist/runtime.482e6203cf96ba73.bundle.js"></script><link rel="stylesheet" type="text/css" href="./external/dist/637.0fa6cababf056764.css">
<script type="text/javascript" src="./external/dist/637.d54be67956c5c660.bundle.js"></script><link rel="stylesheet" type="text/css" href="./external/dist/runestone.3eb60bc006ae9a54.css">
<script type="text/javascript" src="./external/dist/runestone.ecc6dff5cad8b815.bundle.js"></script><script src="external/custom.js"></script><script src="external/prism-line-numbers.js"></script>
</head>
<body class="pretext book ignore-math">
<a class="assistive" href="#ptx-content">Skip to main content</a><header id="ptx-masthead"><div class="ptx-banner">
<a id="logo-link" href="https://prog2.de/book" target="_blank"><img src="external/img/eule.png" alt="Logo image"></a><div class="title-container">
<h1 class="heading"><a href="prog2-book.html"><span class="title">An Introduction to Imperative Programming</span></a></h1>
<p class="byline">Sebastian Hack</p>
</div>
<div id="searchresultsplaceholder" style="display: none">
<button id="closesearchresults" onclick="document.getElementById('searchresultsplaceholder').style.display = 'none'; return false;">x</button><h2>Search Results: <span id="searchterms"></span>
</h2>
<div id="searchempty"><span>No results.</span></div>
<ol id="searchresults"></ol>
</div>
</div></header><nav id="ptx-navbar" class="navbar"><button class="toc-toggle button" aria-label="Show or hide table of contents"><span class="icon">‚ò∞</span><span class="name">Contents</span></button><a class="index-button button" href="index-1.html" title="Index"><span class="name">Index</span></a><button id="user-preferences-button" class="user-preferences-button button" title="Modify user preferences"><span id="theavatarbutton" class="name">You!</span><div id="preferences_menu_holder" class="hidden"><ol id="preferences_menu" style="font-family: 'Roboto Serif', serif;">
<li data-env="avatar" tabindex="-1">Choose avatar<div class="wrap_to_submenu"><span class="to_submenu">‚ñª</span></div>
<ol class="hidden avatar">
<li data-val="You!" tabindex="-1">
<span id="theYou!" class="avatarcheck">‚úîÔ∏è</span>You!</li>
<li data-val="üò∫" tabindex="-1">
<span id="theüò∫" class="avatarcheck"></span>üò∫</li>
<li data-val="üë§" tabindex="-1">
<span id="theüë§" class="avatarcheck"></span>üë§</li>
<li data-val="üëΩ" tabindex="-1">
<span id="theüëΩ" class="avatarcheck"></span>üëΩ</li>
<li data-val="üê∂" tabindex="-1">
<span id="theüê∂" class="avatarcheck"></span>üê∂</li>
<li data-val="üêº" tabindex="-1">
<span id="theüêº" class="avatarcheck"></span>üêº</li>
<li data-val="üåà" tabindex="-1">
<span id="theüåà" class="avatarcheck"></span>üåà</li>
</ol>
</li>
<li data-env="fontfamily" tabindex="-1">Font family<div class="wrap_to_submenu"><span class="to_submenu">‚ñª</span></div>
<ol class="hidden fontfamily">
<li data-val="face" data-change="OS" tabindex="-1" style="font-family: 'Open Sans'">
<span id="theOS" class="ffcheck">‚úîÔ∏è</span><span class="name">Open Sans</span><span class="sample">AaBbCc 123 PreTeXt</span>
</li>
<li data-val="face" data-change="RS" tabindex="-1" style="font-family: 'Roboto Serif'">
<span id="theRS" class="ffcheck"></span><span class="name">Roboto Serif</span><span class="sample">AaBbCc 123 PreTeXt</span>
</li>
</ol>
</li>
<li data-env="font" tabindex="-1">Adjust font<div class="wrap_to_submenu"><span class="to_submenu">‚ñª</span></div>
<ol class="hidden fonts">
<li>Size</li>
<li><span id="thesize">12</span></li>
<li data-val="size" data-change="-1" tabindex="-1" style="font-size: 80%">Smaller</li>
<li data-val="size" data-change="1" tabindex="-1" style="font-size: 110%">Larger</li>
<li>Width</li>
<li><span id="thewdth">100</span></li>
<li data-val="wdth" data-change="-5" tabindex="-1" style="font-variation-settings: 'wdth' 60">narrower</li>
<li data-val="wdth" data-change="5" tabindex="-1" style="font-variation-settings: 'wdth' 150">wider</li>
<li>Weight</li>
<li><span id="thewght">400</span></li>
<li data-val="wght" data-change="-50" tabindex="-1" style="font-weight: 200">thinner</li>
<li data-val="wght" data-change="50" tabindex="-1" style="font-weight: 700">heavier</li>
<li>Letter spacing</li>
<li>
<span id="thelspace">0</span><span class="byunits">/200</span>
</li>
<li data-val="lspace" data-change="-1" tabindex="-1">closer</li>
<li data-val="lspace" data-change="1" tabindex="-1">f a r t h e r</li>
<li>Word spacing</li>
<li>
<span id="thewspace">0</span><span class="byunits">/50</span>
</li>
<li data-val="wspace" data-change="-1" tabindex="-1">smaller‚ÄÖgap‚ÄÉ</li>
<li data-val="wspace" data-change="1" tabindex="-1">larger‚ÄÉgap</li>
<li>Line Spacing</li>
<li>
<span id="theheight">135</span><span class="byunits">/100</span>
</li>
<li data-val="height" data-change="-5" tabindex="-1" style="line-height: 1">closer<br>together</li>
<li data-val="height" data-change="5" tabindex="-1" style="line-height: 1.75">further<br>apart</li>
</ol>
</li>
<li data-env="atmosphere" tabindex="-1">Light/dark mode<div class="wrap_to_submenu"><span class="to_submenu">‚ñª</span></div>
<ol class="hidden atmosphere">
<li data-val="default" tabindex="-1">
<span id="thedefault" class="atmospherecheck">‚úîÔ∏è</span>default</li>
<li data-val="pastel" tabindex="-1">
<span id="thepastel" class="atmospherecheck"></span>pastel</li>
<li data-val="darktwilight" tabindex="-1">
<span id="thedarktwilight" class="atmospherecheck"></span>twilight</li>
<li data-val="dark" tabindex="-1">
<span id="thedark" class="atmospherecheck"></span>dark</li>
<li data-val="darkmidnight" tabindex="-1">
<span id="thedarkmidnight" class="atmospherecheck"></span>midnight</li>
</ol>
</li>
<li data-env="ruler" tabindex="-1">Reading ruler<div class="wrap_to_submenu"><span class="to_submenu">‚ñª</span></div>
<ol class="hidden ruler">
<li data-val="none" tabindex="-1">
<span id="thenone" class="rulercheck">‚úîÔ∏è</span>none</li>
<li data-val="underline" tabindex="-1">
<span id="theunderline" class="rulercheck"></span>underline</li>
<li data-val="lunderline" tabindex="-1">
<span id="thelunderline" class="rulercheck"></span>L-underline</li>
<li data-val="greybar" tabindex="-1">
<span id="thegreybar" class="rulercheck"></span>grey bar</li>
<li data-val="lightbox" tabindex="-1">
<span id="thelightbox" class="rulercheck"></span>light box</li>
<li data-val="sunrise" tabindex="-1">
<span id="thesunrise" class="rulercheck"></span>sunrise</li>
<li data-val="sunriseunderline" tabindex="-1">
<span id="thesunriseunderline" class="rulercheck"></span>sunrise underline</li>
<li class="moveQ">Motion by:</li>
<li data-val="mouse" tabindex="-1">
<span id="themouse" class="motioncheck">‚úîÔ∏è</span>follow the mouse</li>
<li data-val="arrow" tabindex="-1">
<span id="thearrow" class="motioncheck"></span>up/down arrows - not yet</li>
<li data-val="eye" tabindex="-1">
<span id="theeye" class="motioncheck"></span>eye tracking - not yet</li>
</ol>
</li>
</ol></div></button><span class="treebuttons"><input xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" id="toggle" name="darkmode" class="toggle save-cb-state" type="checkbox"><a class="previous-button button" href="sec-c-ds.html" title="Previous"><span class="icon">&lt;</span><span class="name">Prev</span></a><a class="up-button button" href="sec-c-ds.html" title="Up"><span class="icon">^</span><span class="name">Up</span></a><a class="next-button button" href="sec-ds-trees.html" title="Next"><span class="name">Next</span><span class="icon">&gt;</span></a></span><div class="searchbox"><div class="searchwidget">
<input id="ptxsearch" type="text" name="terms" placeholder="Search" onchange="doSearch()"><button id="searchbutton" type="button" onclick="doSearch()">üîç</button>
</div></div></nav><div id="latex-macros" class="hidden-content process-math" style="display:none"><span class="process-math">\(\newcommand{\powerset}[1]{\mathcal{P}(#1)}
\def\domain{\operatorname{dom}}
\def\codomain{\operatorname{cod}}
\def\funimage{\operatorname{img}}
\def\defeq{\coloneqq}
\def\eqdef{\eqqcolon}
\def\syndef{\Coloneqq}
\def\simp{\Rightarrow}


\newcommand{\edist}{\mathit{edist}}


\newcommand{\rd}{\$d}
\newcommand{\rs}{\$s}
\newcommand{\rt}{\$t}
\newcommand{\lo}{\mathit{lo}}
\newcommand{\hi}{\mathit{hi}}
\newcommand{\pc}{\mathit{pc}}
\newcommand{\shamt}{\mathit{n}}
\newcommand{\offset}{i}
\newcommand{\marke}{\mathit{label}}
\newcommand{\addr}{\mathit{addr}}
\newcommand{\imm}{\mathit{imm}}
\newcommand{\sext}{\mathrm{se}}
\newcommand{\zext}{\mathrm{ze}}
\newcommand{\sei}{\sext(i)}
\newcommand{\zei}{\zext(i)}
\newcommand{\bft}[2]{[#1:#2]}
\newcommand{\ite}[3]{\mathop{\mathit{if}}\,{#1}\mathrel{\mathit{then}}{#2}\mathrel{\mathit{ else }}{#3}}
\newcommand{\cbranch}{\mathit{cbr}}


\newcommand{\Nat}        {\mathbb{N}}
\newcommand{\Int}        {\mathbb{Z}}
\newcommand{\Bit}        {\mathbb{B}}
\newcommand{\bbase}      {B}
\newcommand{\bnine}      {A}
\newcommand{\bneg}   [1] {\overline{#1}}
\newcommand{\band}       {\mathrel{\&amp;}}
\newcommand{\bor}        {\mathrel{|}}
\newcommand{\bxor}       {\mathrel{\hat{\phantom{+}}}}
\newcommand{\badd}       {\mathrel{+}}
\newcommand{\blts}       {\mathrel{\lt_s}}
\newcommand{\bltu}       {\mathrel{\lt_u}}
\newcommand{\baddn}      {\mathrel{+_n}}
\newcommand{\bsubn}      {\mathrel{-_n}}
\newcommand{\bsll}       {\mathrel{\ll}}
\newcommand{\bsrl}       {\mathrel{\gg}}
\newcommand{\bsra}       {\mathrel{\overset s\gg}}
\newcommand{\bconcat}    {\,}
\newcommand{\bseqq}  [2] {{#1}_{#2}\dots {#1}_0}
\newcommand{\bseq}   [2] {{#1}_{#2-1}\dots {#1}_0}
\newcommand{\bsintp} [1] {[#1]}
\newcommand{\buintp} [1] {\langle #1\rangle}
\newcommand{\buintpb}[2] {\buintp{#1}_{#2}}



\def\Var{\mathit{Var}}
\def\Val{\mathit{Val}}
\def\Addr{\mathit{Addr}}
\def\Expr{\mathit{Expr}}
\def\LExpr{\mathit{LExpr}}
\def\ExprS{\mathit{ExprS}}
\def\Stmt{\mathit{Stmt}}
\def\Prg{\mathit{Prg}}
\def\Conf{\mathit{Conf}}
\def\Ty{\mathit{Ty}}
\def\Assert{\mathit{Assert}}

\newcommand{\TWhile}{\mathtt{While}}
\newcommand{\TIf}{\mathtt{If}}
\newcommand{\TBlock}{\mathtt{Block}}
\newcommand{\TAssign}{\mathtt{Assign}}
\newcommand{\TAbort}{\mathtt{Abort}}
\newcommand{\TVar}{\mathtt{Var}}
\newcommand{\TConst}{\mathtt{Const}}
\newcommand{\TBinary}{\mathtt{Binary}}
\newcommand{\TAddrOf}{\mathtt{Addr}}
\newcommand{\TIndir}{\mathtt{Indir}}
\newcommand{\TSeq}{\mathtt{Seq}}
\newcommand{\TTerm}{\mathtt{Term}}
\newcommand{\TCrash}{\mathtt{Crash}}

\newcommand{\AIf}[3]{\TIf\left[#1,#2,#3\right]}
\newcommand{\AWhile}[2]{\TWhile\left[#1,#2\right]}
\newcommand{\ABlock}[2]{\TBlock_{#1}\left[#2\right]}
\newcommand{\AAssign}[2]{\TAssign\left[#1,#2\right]}
\newcommand{\AAbort}{\TAbort}
\newcommand{\ASeq}[2]{\TSeq\left[#1,#2\right]}
\newcommand{\ATerm}{\TTerm}
\newcommand{\ACrash}{\TCrash}

\newcommand{\AVar}[1]{\mathtt{Var}_{#1}}
\newcommand{\ALVal}[1]{\mathtt{LVal}\left[#1\right]}
\newcommand{\AConst}[1]{\TConst_{#1}}
\newcommand{\ABinary}[3]{\TBinary_{#1}\left[#2,#3\right]}
\newcommand{\AAddrOf}[1]{\TAddrOf\left[#1\right]}
\newcommand{\AIndir}[1]{\TIndir\left[#1\right]}

\newcommand{\CIf}[3]{\mathtt{if}\,(#1)\,#2\,\mathtt{else}\,#3}
\newcommand{\CWhile}[2]{\mathtt{while}\,(#1)\,#2}
\newcommand{\CWhileInv}[3]{\mathtt{while}\,(#1)\,\mathtt{\_Inv}(#3)\,#2}
\newcommand{\CBlock}[1]{\{#1\}}
\newcommand{\CAssign}[2]{#1=#2;}
\newcommand{\CAbort}{\mathtt{abort();}}
\newcommand{\CBinary}[3]{#2\mathop{#1}#3}
\newcommand{\CAddrOf}[1]{\&amp;#1}
\newcommand{\CIndir}[1]{*#1}
\newcommand{\CSeq}[2]{{#1}\ {#2}}
\newcommand{\CTerm}{\varepsilon}
\newcommand{\CCrash}{\Lightning}
\newcommand{\CConcat}[2]{#1\mathop{+\!+}#2}
\newcommand{\CAssert}[1]{\mathtt{assert}(#1)}
\newcommand{\CAssume}[1]{\mathtt{assume}(#1)}
\newcommand{\CPtr}[1]{#1*}
\newcommand{\CAssnVV}[2]{\CAssign{\CVar #1}{\CVar #2}}
\newcommand{\CAssnVC}[2]{\CAssign{\CVar #1}{\CConst #2}}

\newcommand{\CSeqThree}[3]{\CSeq{#1}{\CSeq{#2}{#3}}}
\newcommand{\CSeqFour}[4]{\CSeq{#1}{\CSeqThree{#2}{#3}{#4}}}

\newcommand{\COp}[1]{\mathbin{\mathtt{#1}}}
\newcommand{\CVar}[1]{\mathtt{#1}}
\newcommand{\CConst}[1]{\mathtt{#1}}
\newcommand{\CPrg}[1]{\texttt{#1}}
\newcommand{\CInt}{\mathtt{int}}
\newcommand{\CChar}{\mathtt{char}}
\newcommand{\CVoid}{\mathtt{void}}

\newcommand{\tptr}[1]{#1\texttt{*}}
\def\pto{\rightharpoonup}
\def\steprel{\rightarrow}
\def\terminates{\mathrel{\downarrow}}
\newcommand\config[2]{\langle#1\mid #2\rangle}
\newcommand\configt[1]{\config{\CTerm}{#1}}
\def\castrel{\leftrightarrow}

\newcommand{\stmtjudge}[2]{{#1}\mathrel{\vdash}{#2}}
\newcommand{\stmtGamma}[1]{\stmtjudge{\Gamma}{#1}}
\newcommand{\typejudge}[3]{{#1}\mathrel{\vdash}{#2}\mathrel{:}{#3}}
\newcommand{\typeGamma}[2]{\typejudge{\Gamma}{#1}{#2}}


\newcommand{\codeE}[5]{\mathit{#1}\enspace #2\enspace #3\enspace #4 = #5}
\newcommand{\codeR}[3]{\codeE{codeR}{\mathit{offs}}{#1}{#2}{#3}}
\newcommand{\codeL}[3]{\codeE{codeL}{\mathit{offs}}{#1}{#2}{#3}}
\newcommand{\codeSO}[3]{\mathit{codeS}\enspace #1\enspace #2 = #3}
\newcommand{\codeS}[2]{\mathit{codeS}\enspace \mathit{offs}\enspace #1 = #2}
\newcommand{\codePO}[3]{\mathit{codeP}\enspace #1\enspace #2 = #3}
\newcommand{\codeP}[2]{\mathit{codeP}\enspace \mathit{offs}\enspace #1 = #2}

\newcommand{\mreg}[1]{\mathtt{\$#1}}
\newcommand{\lcc}{\mathbin{::}}
\def\rsl{r_1\lcc rs}
\def\rsls{r_1\lcc r_2\lcc rs}
\def\rlist{r\lcc{rs}}


\ifdefined\isLatex
  \def\adra{\bigtriangleup}
  \def\adrb{\pentagon}
  \def\adrc{\diamond}
  \def\adrd{\bigtriangledown}
  \def\adre{\bigstar}
  \def\adrf{\male}
  \def\adrg{\female}
  \let\oldLightning\Lightning
  \renewcommand{\Lightning}{\text{\oldLightning}}
  
  \newcommand{\denot}[1]{\llbracket {#1} \rrbracket}

\else
  \def\adra{\unicode{x25b3}}
  \def\adrb{\unicode{x2b20}}
  \def\adrc{\unicode{x25c7}}
  \def\adrd{\unicode{x25bd}}
  \def\adre{\unicode{x2605}}
  \def\adrf{\unicode{x2642}}
  \def\adrg{\unicode{x2640}}

  \def\Lightning{\unicode{x21af}}
  
  \newcommand{\denot}[1]{[\![{#1}]\!]}
\fi

\newcommand{\denotL}[1]{L\denot{#1}}
\newcommand{\denotR}[1]{R\denot{#1}}
\newcommand{\indetval}{\mathord{?}}


\def\adra{\bigtriangleup}
\def\adrb{\bigcirc}
\def\adrc{\lozenge}
\def\adrd{\bigtriangledown}
\def\adre{\bigstar}
\def\adrf{\dagger}
\def\adrg{\ddagger}

\newcommand{\cleave}{\mathbin{\blacksquare}}





\def\models{\vDash}
\def\limp{\Rightarrow}
\def\liff{\Leftrightarrow}
\def\lneg{\neg}
\def\bigstep{\mathrel{\Downarrow}}
\def\ltrue{\mathit{true}}
\def\lfalse{\mathit{false}}
\def\exprdef{\operatorname{def}}
\newcommand{\hpc}{\operatorname{pc}}
\newcommand{\hvc}{\operatorname{vc}}
\newcommand{\amodels}[1]{M\denot{#1}}
\newcommand{\hoare}[3]{\{#1\}\mathrel{#2}\{#3\}}
\newcommand{\hoaret}[3]{[#1]\mathrel{#2}[#3]}            
\newcommand{\passingt}[1]{{#1}_\checkmark}
\newcommand{\failingt}[1]{{#1}_\times}
\newcommand{\passing}{\passingt\sigma}
\newcommand{\failing}{\failingt\sigma}
\newcommand{\slabel}[1]{\mathit{lab}}


\newcommand{\subtyperel} {\mathrel{\le}}
\newcommand{\prgltr}{s}
\newcommand{\lt}{&lt;}
\newcommand{\gt}{&gt;}
\newcommand{\amp}{&amp;}
\definecolor{fillinmathshade}{gray}{0.9}
\newcommand{\fillinmath}[1]{\mathchoice{\colorbox{fillinmathshade}{$\displaystyle     \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\textstyle        \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\scriptstyle      \phantom{\,#1\,}$}}{\colorbox{fillinmathshade}{$\scriptscriptstyle\phantom{\,#1\,}$}}}
\)</span></div>
<div class="ptx-page">
<div id="ptx-sidebar"><nav id="ptx-toc" class="depth2"><ul class="structural">
<li>
<div class="toc-item"><a href="frontmatter.html" class="internal"><span class="title">Front Matter</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="colophon-1.html" class="internal"><span class="title">Colophon</span></a></div></li>
<li><div class="toc-item"><a href="preface.html" class="internal"><span class="title">Preface</span></a></div></li>
<li><div class="toc-item"><a href="acknowledgement-1.html" class="internal"><span class="title">Acknowledgements</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-arith.html" class="internal"><span class="codenumber">1</span> <span class="title">Computer Arithmetic</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-arith-positional.html" class="internal"><span class="codenumber">1.1</span> <span class="title">Positional Notation</span></a></div></li>
<li><div class="toc-item"><a href="sec-arith-binary.html" class="internal"><span class="codenumber">1.2</span> <span class="title">Binary Numbers</span></a></div></li>
<li><div class="toc-item"><a href="sec-arith-add.html" class="internal"><span class="codenumber">1.3</span> <span class="title">Addition and Subtraction</span></a></div></li>
<li><div class="toc-item"><a href="sec-arith-int.html" class="internal"><span class="codenumber">1.4</span> <span class="title">The Integers</span></a></div></li>
<li><div class="toc-item"><a href="section-5.html" class="internal"><span class="codenumber">1.5</span> <span class="title">Shifts</span></a></div></li>
<li><div class="toc-item"><a href="section-6.html" class="internal"><span class="codenumber">1.6</span> <span class="title">Summary</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-asm.html" class="internal"><span class="codenumber">2</span> <span class="title">Machine Code</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-asm-neumann.html" class="internal"><span class="codenumber">2.1</span> <span class="title">The von-Neumann Architecture</span></a></div></li>
<li><div class="toc-item"><a href="sec-asm-mips.html" class="internal"><span class="codenumber">2.2</span> <span class="title">The MIPS Processor</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-asm-asm.html" class="internal"><span class="codenumber">2.3</span> <span class="title">The Assembler</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-asm-asm.html#subsection-1" class="internal"><span class="codenumber">2.3.1</span> <span class="title">Overview</span></a></div></li>
<li><div class="toc-item"><a href="sec-asm-asm.html#subsection-2" class="internal"><span class="codenumber">2.3.2</span> <span class="title">An Example</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-asm-trace.html" class="internal"><span class="codenumber">2.4</span> <span class="title">Execution Traces</span></a></div></li>
<li><div class="toc-item"><a href="sec-asm-dataseg.html" class="internal"><span class="codenumber">2.5</span> <span class="title">The Data Segment</span></a></div></li>
<li><div class="toc-item"><a href="sec-asm-segments.html" class="internal"><span class="codenumber">2.6</span> <span class="title">Memory Segmentation</span></a></div></li>
<li><div class="toc-item"><a href="sec-asm-link.html" class="internal"><span class="codenumber">2.7</span> <span class="title">Linking</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-asm-call.html" class="internal"><span class="codenumber">2.8</span> <span class="title">Calling Functions</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-asm-call.html#subsection-3" class="internal"><span class="codenumber">2.8.1</span> <span class="title">Recursion</span></a></div></li>
<li><div class="toc-item"><a href="sec-asm-call.html#sec-asm-cc" class="internal"><span class="codenumber">2.8.2</span> <span class="title">The Calling Convention</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-simple-algo.html" class="internal"><span class="codenumber">3</span> <span class="title">Some Simple Algorithms</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="bsp-.html" class="internal"><span class="codenumber">3.1</span> <span class="title">Number Conversion</span></a></div></li>
<li><div class="toc-item"><a href="section-16.html" class="internal"><span class="codenumber">3.2</span> <span class="title">The Sieve of Eratosthenes</span></a></div></li>
<li>
<div class="toc-item"><a href="section-17.html" class="internal"><span class="codenumber">3.3</span> <span class="title">Insertion Sort</span></a></div>
<ul class="structural"><li><div class="toc-item"><a href="section-17.html#exercises-1" class="internal"><span class="codenumber">3.3</span> <span class="title">Exercises</span></a></div></li></ul>
</li>
<li><div class="toc-item"><a href="section-18.html" class="internal"><span class="codenumber">3.4</span> <span class="title">Evaluating Polynomials with Horner's Method</span></a></div></li>
<li><div class="toc-item"><a href="section-19.html" class="internal"><span class="codenumber">3.5</span> <span class="title">The Tortoise and the Hare</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-c.html" class="internal"><span class="codenumber">4</span> <span class="title">Introduction to C</span></a></div>
<ul class="structural">
<li>
<div class="toc-item"><a href="sec-c-basics.html" class="internal"><span class="codenumber">4.1</span> <span class="title">Basics</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c-basics.html#subsection-5" class="internal"><span class="codenumber">4.1.1</span> <span class="title">Static Properties</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-basics.html#subsection-6" class="internal"><span class="codenumber">4.1.2</span> <span class="title">Dynamic Properties</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-c-trace.html" class="internal"><span class="codenumber">4.2</span> <span class="title">Execution Traces</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-c-object.html" class="internal"><span class="codenumber">4.3</span> <span class="title">Imperative Variables</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c-object.html#subsection-7" class="internal"><span class="codenumber">4.3.1</span> <span class="title">Local Variables</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-object.html#subsection-8" class="internal"><span class="codenumber">4.3.2</span> <span class="title">Global Variables</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-object.html#subsection-9" class="internal"><span class="codenumber">4.3.3</span> <span class="title">Dynamically Allocated Containers</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-c-memmodel.html" class="internal"><span class="codenumber">4.4</span> <span class="title">The C¬†Memory Model</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-c-tu.html" class="internal"><span class="codenumber">4.5</span> <span class="title">Translation Units</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c-tu.html#subsection-10" class="internal"><span class="codenumber">4.5.1</span> <span class="title">main</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-tu.html#sec-c-call_tu" class="internal"><span class="codenumber">4.5.2</span> <span class="title">Calling Functions from Other Translation Units</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-tu.html#subsection-12" class="internal"><span class="codenumber">4.5.3</span> <span class="title">Makefiles</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-c-numty.html" class="internal"><span class="codenumber">4.6</span> <span class="title">Number Types</span></a></div></li>
<li>
<div class="toc-item"><a href="section-26.html" class="internal"><span class="codenumber">4.7</span> <span class="title">Control Flow</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="section-26.html#subsection-13" class="internal"><span class="codenumber">4.7.1</span> <span class="title">Selection Statements</span></a></div></li>
<li><div class="toc-item"><a href="section-26.html#sec-c-loops" class="internal"><span class="codenumber">4.7.2</span> <span class="title">Loops</span></a></div></li>
<li><div class="toc-item"><a href="section-26.html#subsection-15" class="internal"><span class="codenumber">4.7.3</span> <span class="title">Function Return</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-c-expr.html" class="internal"><span class="codenumber">4.8</span> <span class="title">Expressions</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c-expr.html#subsection-16" class="internal"><span class="codenumber">4.8.1</span> <span class="title">Implicit Type Conversions</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-expr.html#sec-c-lval" class="internal"><span class="codenumber">4.8.2</span> <span class="title">L- and R-Evaluation of Expressions</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-expr.html#sec-c-sideeffects" class="internal"><span class="codenumber">4.8.3</span> <span class="title">Side Effects</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-expr.html#subsection-19" class="internal"><span class="codenumber">4.8.4</span> <span class="title">Lazy Evaluation</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-expr.html#subsection-20" class="internal"><span class="codenumber">4.8.5</span> <span class="title">Exercises</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="section-28.html" class="internal"><span class="codenumber">4.9</span> <span class="title">Calling Functions</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-c-ptr.html" class="internal"><span class="codenumber">4.10</span> <span class="title">Pointers</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c-ptr.html#sec-c-array" class="internal"><span class="codenumber">4.10.1</span> <span class="title">Arrays</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-ptr.html#subsection-22" class="internal"><span class="codenumber">4.10.2</span> <span class="title">const</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-ptr.html#exercises-2" class="internal"><span class="codenumber">4.10.3</span> <span class="title">Exercises</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="section-30.html" class="internal"><span class="codenumber">4.11</span> <span class="title">Examples</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-c-dyn-mem-management.html" class="internal"><span class="codenumber">4.12</span> <span class="title">Dynamic Memory Management</span></a></div>
<ul class="structural"><li><div class="toc-item"><a href="sec-c-dyn-mem-management.html#subsection-23" class="internal"><span class="codenumber">4.12.1</span> <span class="title">realloc</span></a></div></li></ul>
</li>
<li>
<div class="toc-item"><a href="sec-c-structs.html" class="internal"><span class="codenumber">4.13</span> <span class="title">Structs</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c-structs.html#subsection-24" class="internal"><span class="codenumber">4.13.1</span> <span class="title">typedef</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-structs.html#subsection-25" class="internal"><span class="codenumber">4.13.2</span> <span class="title">Incomplete Structs</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-structs.html#exercises-3" class="internal"><span class="codenumber">4.13.3</span> <span class="title">Exercises</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-c-io.html" class="internal"><span class="codenumber">4.14</span> <span class="title">Input and Output</span></a></div>
<ul class="structural"><li><div class="toc-item"><a href="sec-c-io.html#subsection-26" class="internal"><span class="codenumber">4.14.1</span> <span class="title">Format Strings</span></a></div></li></ul>
</li>
<li>
<div class="toc-item"><a href="sec-c-undef.html" class="internal"><span class="codenumber">4.15</span> <span class="title">Undefined Behavior</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c-undef.html#subsection-27" class="internal"><span class="codenumber">4.15.1</span> <span class="title">Unspecified and Implementation-Defined Behavior</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-undef.html#subsection-28" class="internal"><span class="codenumber">4.15.2</span> <span class="title">Security Problems</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-undef.html#subsection-29" class="internal"><span class="codenumber">4.15.3</span> <span class="title">Undefined Behavior and the Compiler</span></a></div></li>
<li><div class="toc-item"><a href="sec-c-undef.html#subsection-30" class="internal"><span class="codenumber">4.15.4</span> <span class="title">Practical Examples</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-c-ds.html" class="internal"><span class="codenumber">5</span> <span class="title">Algorithms and Data Structures</span></a></div>
<ul class="structural">
<li class="active">
<div class="toc-item"><a href="sec-ds-lists.html" class="internal"><span class="codenumber">5.1</span> <span class="title">Lists</span></a></div>
<ul class="structural">
<li>
<div class="toc-item"><a href="sec-ds-lists.html#sec-ds-arraylist" class="internal"><span class="codenumber">5.1.1</span> <span class="title">Array Lists</span></a></div>
<ul class="structural"><li><div class="toc-item"><a href="sec-ds-lists.html#exercises-4" class="internal"><span class="codenumber">5.1.1</span> <span class="title">Exercises</span></a></div></li></ul>
</li>
<li><div class="toc-item"><a href="sec-ds-lists.html#sec-ds-sllists" class="internal"><span class="codenumber">5.1.2</span> <span class="title">Singly-Linked Lists</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-lists.html#sec-ds-dllists" class="internal"><span class="codenumber">5.1.3</span> <span class="title">Doubly-Linked Lists</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-ds-trees.html" class="internal"><span class="codenumber">5.2</span> <span class="title">Trees</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-ds-trees.html#subsection-34" class="internal"><span class="codenumber">5.2.1</span> <span class="title">General Notions and Algorithms</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-trees.html#sec-ds-bst" class="internal"><span class="codenumber">5.2.2</span> <span class="title">Binary Search Trees</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-trees.html#sec-ds-tries" class="internal"><span class="codenumber">5.2.3</span> <span class="title">Tries</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-ds-hash.html" class="internal"><span class="codenumber">5.3</span> <span class="title">Hashing</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-ds-hash.html#subsection-37" class="internal"><span class="codenumber">5.3.1</span> <span class="title">Separate Chaining</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-hash.html#subsection-38" class="internal"><span class="codenumber">5.3.2</span> <span class="title">The Load Factor</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-hash.html#subsection-39" class="internal"><span class="codenumber">5.3.3</span> <span class="title">Hash Tables and Mutability</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-hash.html#subsection-40" class="internal"><span class="codenumber">5.3.4</span> <span class="title">Open Addressing</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-hash.html#subsection-41" class="internal"><span class="codenumber">5.3.5</span> <span class="title">A Comprehensive Example</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-hash.html#subsection-42" class="internal"><span class="codenumber">5.3.6</span> <span class="title">Deleting from a Hash Table with Open Addressing</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-hash.html#subsection-43" class="internal"><span class="codenumber">5.3.7</span> <span class="title">Summary</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-ds-dynpro.html" class="internal"><span class="codenumber">5.4</span> <span class="title">Dynamic Programming</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-ds-dynpro.html#sec-ds-fib" class="internal"><span class="codenumber">5.4.1</span> <span class="title">Computing Fibonacci Numbers</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-dynpro.html#sec-ds-binomial" class="internal"><span class="codenumber">5.4.2</span> <span class="title">Computing Binomial Coefficients</span></a></div></li>
<li><div class="toc-item"><a href="sec-ds-dynpro.html#sec-ds-edist" class="internal"><span class="codenumber">5.4.3</span> <span class="title">Computing the Minimum Edit Distance</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-c0.html" class="internal"><span class="codenumber">6</span> <span class="title">Formal Semantics</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c0-syntax-general.html" class="internal"><span class="codenumber">6.1</span> <span class="title">The Syntax of Programming Languages</span></a></div></li>
<li><div class="toc-item"><a href="sec-c0-syntax.html" class="internal"><span class="codenumber">6.2</span> <span class="title">The Abstract Syntax of C0</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-c0-sem.html" class="internal"><span class="codenumber">6.3</span> <span class="title">The Semantics of C0</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c0-sem.html#subsection-47" class="internal"><span class="codenumber">6.3.1</span> <span class="title">The State</span></a></div></li>
<li><div class="toc-item"><a href="sec-c0-sem.html#subsection-48" class="internal"><span class="codenumber">6.3.2</span> <span class="title">Expressions</span></a></div></li>
<li><div class="toc-item"><a href="sec-c0-sem.html#subsection-49" class="internal"><span class="codenumber">6.3.3</span> <span class="title">Statements</span></a></div></li>
<li><div class="toc-item"><a href="sec-c0-sem.html#subsection-50" class="internal"><span class="codenumber">6.3.4</span> <span class="title">Digression: Getting Stuck</span></a></div></li>
<li><div class="toc-item"><a href="sec-c0-sem.html#sec-c0-ex" class="internal"><span class="codenumber">6.3.5</span> <span class="title">Some Examples</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-c0-pointers.html" class="internal"><span class="codenumber">6.4</span> <span class="title">Pointers (C0p)</span></a></div></li>
<li><div class="toc-item"><a href="sec-c0-scopes.html" class="internal"><span class="codenumber">6.5</span> <span class="title">Scopes (C0b)</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-c0-type.html" class="internal"><span class="codenumber">6.6</span> <span class="title">A Simple Type System (C0t)</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-c0-type.html#subsection-52" class="internal"><span class="codenumber">6.6.1</span> <span class="title">Expressions</span></a></div></li>
<li><div class="toc-item"><a href="sec-c0-type.html#subsection-53" class="internal"><span class="codenumber">6.6.2</span> <span class="title">Statements and Programs</span></a></div></li>
<li><div class="toc-item"><a href="sec-c0-type.html#subsection-54" class="internal"><span class="codenumber">6.6.3</span> <span class="title">Examples</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="section-45.html" class="internal"><span class="codenumber">6.7</span> <span class="title">Summary and Further Reading</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-corr.html" class="internal"><span class="codenumber">7</span> <span class="title">Testing and Verification</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-corr-functional.html" class="internal"><span class="codenumber">7.1</span> <span class="title">Functional Correctness</span></a></div></li>
<li><div class="toc-item"><a href="sec-corr-failures.html" class="internal"><span class="codenumber">7.2</span> <span class="title">Failures</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-corr-testing.html" class="internal"><span class="codenumber">7.3</span> <span class="title">Testing</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-corr-testing.html#subsection-55" class="internal"><span class="codenumber">7.3.1</span> <span class="title">The Oracle Problem</span></a></div></li>
<li><div class="toc-item"><a href="sec-corr-testing.html#subsection-56" class="internal"><span class="codenumber">7.3.2</span> <span class="title">Black-box Testing</span></a></div></li>
<li><div class="toc-item"><a href="sec-corr-testing.html#sec-corr-coverage" class="internal"><span class="codenumber">7.3.3</span> <span class="title">White-box Testing and Coverage</span></a></div></li>
<li><div class="toc-item"><a href="sec-corr-testing.html#subsection-58" class="internal"><span class="codenumber">7.3.4</span> <span class="title">Fuzzing</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-corr-hoare.html" class="internal"><span class="codenumber">7.4</span> <span class="title">Verification</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-corr-hoare.html#sec-corr-hoare-logic" class="internal"><span class="codenumber">7.4.1</span> <span class="title">Hoare Logic</span></a></div></li>
<li><div class="toc-item"><a href="sec-corr-hoare.html#sec-corr-hoare-mech" class="internal"><span class="codenumber">7.4.2</span> <span class="title">Mechanizing Verification</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="section-50.html" class="internal"><span class="codenumber">7.5</span> <span class="title">Summary and Further Reading</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-java.html" class="internal"><span class="codenumber">8</span> <span class="title">Object-Oriented Programming with Java</span></a></div>
<ul class="structural">
<li>
<div class="toc-item"><a href="sec-java-overview.html" class="internal"><span class="codenumber">8.1</span> <span class="title">Compilation, Main Method, Packages</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-java-overview.html#subsection-61" class="internal"><span class="codenumber">8.1.1</span> <span class="title">Multiple Classes</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-overview.html#subsection-62" class="internal"><span class="codenumber">8.1.2</span> <span class="title">Packages</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-java-types.html" class="internal"><span class="codenumber">8.2</span> <span class="title">Types</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-java-reftypes.html" class="internal"><span class="codenumber">8.3</span> <span class="title">Reference Types</span></a></div>
<ul class="structural"><li><div class="toc-item"><a href="sec-java-reftypes.html#subsection-63" class="internal"><span class="codenumber">8.3.1</span> <span class="title">Arrays</span></a></div></li></ul>
</li>
<li>
<div class="toc-item"><a href="sec-java-oo.html" class="internal"><span class="codenumber">8.4</span> <span class="title">Classes</span></a></div>
<ul class="structural"><li><div class="toc-item"><a href="sec-java-oo.html#subsection-64" class="internal"><span class="codenumber">8.4.1</span> <span class="title">Constructors</span></a></div></li></ul>
</li>
<li><div class="toc-item"><a href="sec-java-encapsulation.html" class="internal"><span class="codenumber">8.5</span> <span class="title">Encapsulation</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-java-immutable.html" class="internal"><span class="codenumber">8.6</span> <span class="title">References, Aliasing, and Immutable Objects</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-java-immutable.html#subsection-65" class="internal"><span class="codenumber">8.6.1</span> <span class="title">Aliases</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-immutable.html#subsection-66" class="internal"><span class="codenumber">8.6.2</span> <span class="title">Immutable Classes</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-immutable.html#subsection-67" class="internal"><span class="codenumber">8.6.3</span> <span class="title">When to Use Immutable Classes?</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-java-inherit.html" class="internal"><span class="codenumber">8.7</span> <span class="title">Inheritance</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-java-inherit.html#subsection-68" class="internal"><span class="codenumber">8.7.1</span> <span class="title">Interfaces</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-inherit.html#subsection-69" class="internal"><span class="codenumber">8.7.2</span> <span class="title">Overriding Methods</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-inherit.html#subsection-70" class="internal"><span class="codenumber">8.7.3</span> <span class="title">Calling a Method</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-inherit.html#subsection-71" class="internal"><span class="codenumber">8.7.4</span> <span class="title">The Class <code class="code-inline tex2jax_ignore">Object</code></span></a></div></li>
<li><div class="toc-item"><a href="sec-java-inherit.html#subsection-72" class="internal"><span class="codenumber">8.7.5</span> <span class="title"><code class="code-inline tex2jax_ignore">equals</code></span></a></div></li>
<li><div class="toc-item"><a href="sec-java-inherit.html#sec-equals-hashCode" class="internal"><span class="codenumber">8.7.6</span> <span class="title"><code class="code-inline tex2jax_ignore">hashCode</code></span></a></div></li>
<li><div class="toc-item"><a href="sec-java-inherit.html#subsection-74" class="internal"><span class="codenumber">8.7.7</span> <span class="title"><code class="code-inline tex2jax_ignore">toString</code></span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-java-overload.html" class="internal"><span class="codenumber">8.8</span> <span class="title">Overloading Methods</span></a></div>
<ul class="structural"><li><div class="toc-item"><a href="sec-java-overload.html#subsection-75" class="internal"><span class="codenumber">8.8.1</span> <span class="title">Overloading and overriding</span></a></div></li></ul>
</li>
<li>
<div class="toc-item"><a href="sec-java-collections.html" class="internal"><span class="codenumber">8.9</span> <span class="title">The Java Collections Framework</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-java-collections.html#subsection-76" class="internal"><span class="codenumber">8.9.1</span> <span class="title">Maps</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-collections.html#subsection-77" class="internal"><span class="codenumber">8.9.2</span> <span class="title">Hash Sets</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-collections.html#subsection-78" class="internal"><span class="codenumber">8.9.3</span> <span class="title">Iteration</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-collections.html#subsection-79" class="internal"><span class="codenumber">8.9.4</span> <span class="title">Genericity</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-java-proper-oo.html" class="internal"><span class="codenumber">8.10</span> <span class="title">Using Object Orientation Properly</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-java-expr-problem.html" class="internal"><span class="codenumber">8.11</span> <span class="title">The Expression Problem and the Visitor Pattern</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-java-expr-problem.html#subsection-80" class="internal"><span class="codenumber">8.11.1</span> <span class="title">Extensions</span></a></div></li>
<li><div class="toc-item"><a href="sec-java-expr-problem.html#subsection-81" class="internal"><span class="codenumber">8.11.2</span> <span class="title">The Visitor Pattern</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-java-oo-with-c.html" class="internal"><span class="codenumber">8.12</span> <span class="title">Object-Oriented Programming with C</span></a></div></li>
</ul>
</li>
<li>
<div class="toc-item"><a href="sec-comp.html" class="internal"><span class="codenumber">9</span> <span class="title">A Simple Compiler</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-comp-synana.html" class="internal"><span class="codenumber">9.1</span> <span class="title">A Brief Overview of Syntactic Analysis</span></a></div></li>
<li><div class="toc-item"><a href="sec-comp-tychk.html" class="internal"><span class="codenumber">9.2</span> <span class="title">Type Checking</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-comp-codegen.html" class="internal"><span class="codenumber">9.3</span> <span class="title">Syntax-Directed Code Generation</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="sec-comp-codegen.html#subsection-82" class="internal"><span class="codenumber">9.3.1</span> <span class="title">Expressions</span></a></div></li>
<li><div class="toc-item"><a href="sec-comp-codegen.html#subsection-83" class="internal"><span class="codenumber">9.3.2</span> <span class="title">Statements</span></a></div></li>
<li><div class="toc-item"><a href="sec-comp-codegen.html#sec-comp-codegen-prg" class="internal"><span class="codenumber">9.3.3</span> <span class="title">Programs</span></a></div></li>
<li><div class="toc-item"><a href="sec-comp-codegen.html#subsection-85" class="internal"><span class="codenumber">9.3.4</span> <span class="title">The Function Prologue and Epilogue</span></a></div></li>
</ul>
</li>
</ul>
</li>
<li>
<div class="toc-item"><a href="backmatter.html" class="internal"><span class="title">Backmatter</span></a></div>
<ul class="structural">
<li>
<div class="toc-item"><a href="sec-mipsref.html" class="internal"><span class="codenumber">A</span> <span class="title">MIPS Assembler Reference</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="app-mips-ref-insn.html" class="internal"><span class="codenumber">A.1</span> <span class="title">Instruction Set Reference</span></a></div></li>
<li><div class="toc-item"><a href="app-mips-ref-os.html" class="internal"><span class="codenumber">A.2</span> <span class="title">OS Calls</span></a></div></li>
<li><div class="toc-item"><a href="section-68.html" class="internal"><span class="codenumber">A.3</span> <span class="title">Assembler Directives</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="sec-ascii.html" class="internal"><span class="codenumber">B</span> <span class="title">ASCII Table</span></a></div></li>
<li>
<div class="toc-item"><a href="sec-schedule.html" class="internal"><span class="codenumber">C</span> <span class="title">Course Structure</span></a></div>
<ul class="structural">
<li><div class="toc-item"><a href="section-69.html" class="internal"><span class="codenumber">C.1</span> <span class="title">I: Course Introduction</span></a></div></li>
<li><div class="toc-item"><a href="section-70.html" class="internal"><span class="codenumber">C.2</span> <span class="title">R1: Computer Arithmetic</span></a></div></li>
<li><div class="toc-item"><a href="section-71.html" class="internal"><span class="codenumber">C.3</span> <span class="title">R2: Computer Arithmetic</span></a></div></li>
<li><div class="toc-item"><a href="section-72.html" class="internal"><span class="codenumber">C.4</span> <span class="title">M1: Introduction to Machine Code Programming</span></a></div></li>
<li><div class="toc-item"><a href="section-73.html" class="internal"><span class="codenumber">C.5</span> <span class="title">M2: Simple Algorithms in Machine Code</span></a></div></li>
<li><div class="toc-item"><a href="section-74.html" class="internal"><span class="codenumber">C.6</span> <span class="title">M3: Function Calls</span></a></div></li>
<li><div class="toc-item"><a href="section-75.html" class="internal"><span class="codenumber">C.7</span> <span class="title">C1: Introduction to C</span></a></div></li>
<li><div class="toc-item"><a href="section-76.html" class="internal"><span class="codenumber">C.8</span> <span class="title">C2: Expressions and Pointers</span></a></div></li>
<li><div class="toc-item"><a href="section-77.html" class="internal"><span class="codenumber">C.9</span> <span class="title">C3: Arrays, Structs, I/O</span></a></div></li>
<li><div class="toc-item"><a href="section-78.html" class="internal"><span class="codenumber">C.10</span> <span class="title">A1: Lists and Trees</span></a></div></li>
<li><div class="toc-item"><a href="section-79.html" class="internal"><span class="codenumber">C.11</span> <span class="title">A2: Dynamic Programming</span></a></div></li>
<li><div class="toc-item"><a href="section-80.html" class="internal"><span class="codenumber">C.12</span> <span class="title">S1: C0 Syntax and Semantics</span></a></div></li>
<li><div class="toc-item"><a href="section-81.html" class="internal"><span class="codenumber">C.13</span> <span class="title">S2: Extending C0 to Pointers and Scopes</span></a></div></li>
<li><div class="toc-item"><a href="section-82.html" class="internal"><span class="codenumber">C.14</span> <span class="title">S3: Correctness</span></a></div></li>
<li><div class="toc-item"><a href="section-83.html" class="internal"><span class="codenumber">C.15</span> <span class="title">S4: Testing</span></a></div></li>
<li><div class="toc-item"><a href="section-84.html" class="internal"><span class="codenumber">C.16</span> <span class="title">J1: Intro to Java</span></a></div></li>
<li><div class="toc-item"><a href="section-85.html" class="internal"><span class="codenumber">C.17</span> <span class="title">J2: Immutable Objects, Interfaces, Subtyping</span></a></div></li>
<li><div class="toc-item"><a href="section-86.html" class="internal"><span class="codenumber">C.18</span> <span class="title">J3: Abstract Classes, <code class="code-inline tex2jax_ignore">Object</code>, Overriding and Overloading Methods</span></a></div></li>
<li><div class="toc-item"><a href="section-87.html" class="internal"><span class="codenumber">C.19</span> <span class="title">J4: Using OO Properly, OO in C, The Expression Problem, Visitor Pattern</span></a></div></li>
<li><div class="toc-item"><a href="section-88.html" class="internal"><span class="codenumber">C.20</span> <span class="title">A3: Java Collections Framework and Hashing</span></a></div></li>
<li><div class="toc-item"><a href="section-89.html" class="internal"><span class="codenumber">C.21</span> <span class="title">A4: Project Specific</span></a></div></li>
<li><div class="toc-item"><a href="section-90.html" class="internal"><span class="codenumber">C.22</span> <span class="title">O1: Compiler Introduction (Syntax Analysis, Static Semantics)</span></a></div></li>
<li><div class="toc-item"><a href="section-91.html" class="internal"><span class="codenumber">C.23</span> <span class="title">O2: Type Checking Examples, Implementation of Type Checking</span></a></div></li>
<li><div class="toc-item"><a href="section-92.html" class="internal"><span class="codenumber">C.24</span> <span class="title">O3: Syntax-Directed Code Generation</span></a></div></li>
<li><div class="toc-item"><a href="section-93.html" class="internal"><span class="codenumber">C.25</span> <span class="title">V1: Hoare Logics</span></a></div></li>
<li><div class="toc-item"><a href="section-94.html" class="internal"><span class="codenumber">C.26</span> <span class="title">V2: Loop Invariants and Mechanizing Verification</span></a></div></li>
</ul>
</li>
<li><div class="toc-item"><a href="appendix-4.html" class="internal"><span class="codenumber">D</span> <span class="title">List of Symbols</span></a></div></li>
<li><div class="toc-item"><a href="index-1.html" class="internal"><span class="title">Index</span></a></div></li>
<li><div class="toc-item"><a href="references.html" class="internal"><span class="title">Literature</span></a></div></li>
</ul>
</li>
</ul></nav></div>
<main class="ptx-main"><div id="ptx-content" class="ptx-content"><section class="section" id="sec-ds-lists"><h2 class="heading hide-type">
<span class="type">Section</span> <span class="codenumber">5.1</span> <span class="title">Lists</span>
</h2>
<section class="introduction" id="introduction-18"><div class="para logical" id="p-472">
<div class="para"> One of the simplest data structures are lists. Lists represent an ordered collection of several elements in which, unlike a set, an element can appear multiple times. Typical operations of lists are:</div>
<ul class="disc">
<li id="li-51"><div class="para" id="p-473">Get length</div></li>
<li id="li-52"><div class="para" id="p-474">Append element</div></li>
<li id="li-53"><div class="para" id="p-475">Remove element</div></li>
<li id="li-54"><div class="para" id="p-476">Get/set element at position</div></li>
</ul>
</div> <div class="para" id="p-477">Lists can have different implementations. These implementations differ in how the list is represented (the data structure itself) and partly also in the run time complexity of the list operations.</div></section><section class="subsection" id="sec-ds-arraylist"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">5.1.1</span> <span class="title">Array Lists</span>
</h3>
<div class="para" id="p-478">A very straightforward list implementation uses plain arrays. The idea is to put all elements in a list into an array. In addition to storing the elements in an array, we also need to memorize the length of the array because C¬†arrays are just containers holding multiple elements and we cannot inquire a container for its size.</div>
<div class="para" id="p-479">One decision that we have to make is how we handle resizing the array when elements are appended or removed. One way to handle this is to always match the length of the array with the length of the list. Then, for each append and each remove, the array has to be resized. As we discussed before, containers (remember an array is just a container) cannot change their size. To get a bigger container, we need to allocate a new one and copy the data there. So matching the array size to the length of the list would have the overhead of reallocating the array each time and worse, copying all elements in the list over to the new array. Especially when adding a large number of elements to a list (a very common operation), reallocation/copying would have to occur each time when a new element is added.</div>
<div class="para" id="p-480">A more pragmatic way that is very common in practice is to double the size of the array as soon as it is full and to not change the container when an element is removed. This has the drawback that we often reserve more memory than we actually need (the container has more space than we need for the list) at the benefit of less frequent reallocations. Before considering the implementation of the list operations in detail, let us first theoretically investigate the number of element copies that this policy incurs. It is a simple example of what is called <dfn class="terminology">amortized runtime analysis</dfn>. </div>
<div class="para" id="p-481">Let us call the length of the array the <dfn class="terminology">capacity</dfn> of the array list. So, assume that initially the array has capacity¬†1 and the list is empty, i.e. has length¬†0. (One could start with a higher capacity to optimize away some of the initial reallocations, but let us ignore that for the sake of simplicity.) Since we double the size of the array only when we want to add an element <em class="emphasis">and</em> the capacity equals the list size, the capacity will always be a power of two. Assume we are in this situation and the capacity (and the list length) is¬†<span class="process-math">\(2^n\text{.}\)</span> If we now add one more element to the array list, we will allocate a new array of size¬†<span class="process-math">\(2^{n+1}\)</span> and copy all¬†<span class="process-math">\(2^n\)</span> elements over to the new array. So, in general, if the array capacity equals¬†<span class="process-math">\(2^m\text{,}\)</span> we have copied <span class="process-math">\(2^0+2^1+\cdots+2^{m-1}=2^{m}-1\)</span> elements. However, if the capacity is¬†<span class="process-math">\(2^m\text{,}\)</span> the array list contains at least¬†<span class="process-math">\(2^{m-1}+1\)</span> elements. So in total (<em class="emphasis">amortized</em> over all insertions) after inserting¬†<span class="process-math">\(2^{m-1}\lt M\le 2^m\)</span> elements to the array list, we have performed at most¬†<span class="process-math">\(2M\)</span> copy operations.</div>
<figure class="figure figure-like" id="figure-19"><div class="sidebyside"><div class="sbsrow" style="margin-left:0.25%;margin-right:0.25%;">
<div class="sbspanel top" style="width:38.1909547738693%;"><figure class="figure figure-like" id="figure-20"><img src="generated/latex-image/image-19.svg" role="img" class="contained"><figcaption><span class="codenumber">(a)</span><span class="space"> </span>Extending the array by one element upon appending leads to a quadratic amount of copy operations.</figcaption></figure></div>
<div class="sbspanel top" style="width:61.3065326633166%;"><figure class="figure figure-like" id="figure-21"><img src="generated/latex-image/image-20.svg" role="img" class="contained"><figcaption><span class="codenumber">(b)</span><span class="space"> </span>Doubling the capacity of the array leads to an amortized constant count of copy operations per element.</figcaption></figure></div>
</div></div>
<figcaption><span class="type">Figure</span><span class="space"> </span><span class="codenumber">5.1.1<span class="period">.</span></span><span class="space"> </span>Evolution of array after appending five elements. Each row shows array after re-allocation. Arrows indicate copying of cells.</figcaption></figure><div class="para" id="p-482">This analysis is <em class="emphasis">amortized</em> because it does not considers the complexity of a single append to the list, which can be expensive because we might copy the entire array, but a sequence of insertions over which the run time is amortized.</div>
<section class="paragraphs" id="paragraphs-7"><h4 class="heading"><span class="title">Basic Data Structure and Initialization.</span></h4> <div class="para" id="p-483">An array list consists of an array holding the list elements, represented by a pointer holding the address of the array container. Here, we will focus on integer elements and we discuss below (<a href="" class="xref" data-knowl="./knowl/sec-ds-genericity.html" title="Paragraphs: Genericity">Genericity</a>) how this can be generalized to arbitrary data types. Additionally, we need to memorize the current length of the list and the capacity of the array.</div> <div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c"> struct array_list_t {
    int* data;       // payload
    int size;        // number of elements in list
    int capacity;    // size of array;
};

typedef struct array_list_t array_list_t;
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=struct%20array_list_t%20%7B%0A%20%20%20%20int*%20data%3B%20%20%20%20%20%20%20%2F%2F%20payload%0A%20%20%20%20int%20size%3B%20%20%20%20%20%20%20%20%2F%2F%20number%20of%20elements%20in%20list%0A%20%20%20%20int%20capacity%3B%20%20%20%20%2F%2F%20size%20of%20array%3B%0A%7D%3B%0A%0Atypedef%20struct%20array_list_t%20array_list_t%3B%0A%0Avoid%20ensure_capacity(array_list_t*%20l%2C%20int%20new_capacity)%20%7B%0A%20%20%20%20if%20(l-%3Esize%20%3D%3D%20l-%3Ecapacity)%20%7B%0A%20%20%20%20%20%20%20%20_assert%20(new_capacity%20%3E%20l-%3Ecapacity%2C%20%22The%20capacity%20should%20be%20monotone.%22)%3B%0A%20%20%20%20%20%20%20%20l-%3Ecapacity%20%3D%20new_capacity%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20l-%3Edata%20%3D%20relloc(l-%3Edata%2Csizeof(l-%3Edata%5B0%5D)%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20manual%20fix%20as%20realloc%20is%20not%20implemented%0A%20%20%20%20%20%20%20%20%20%20int*%20newData%20%3D%20malloc(sizeof(l-%3Edata%5B0%5D)%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(int%20i%20%3D%200%3B%20i%20%3C%20l-%3Esize%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newData%5Bi%5D%3Dl-%3Edata%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20free(l-%3Edata)%3B%0A%20%20%20%20%20%20%20%20%20%20l-%3Edata%3DnewData%3B%0A%20%20%20%20%7D%0A%7D%0A%0Aarray_list_t*%20array_list_new(array_list_t*%20l%2C%20int%20initial_capacity)%20%7B%0A%20%20%20%20_assert(initial_capacity%20%3E%200%2C%20%22The%20array%20should%20have%20a%20positive%20size.%22)%3B%0A%20%20%20%20l-%3Esize%20%3D%20l-%3Ecapacity%20%3D%200%3B%0A%20%20%20%20l-%3Edata%20%3D%20NULL%3B%0A%20%20%20%20ensure_capacity(l%2C%20initial_capacity)%3B%0A%20%20%20%20return%20l%3B%0A%7D%0A%0Avoid%20array_list_free(array_list_t*%20l)%20%7B%0A%20%20%20%20free(l-%3Edata)%3B%0A%7D%0A%0Avoid%20array_list_append(array_list_t*%20l%2C%20int%20element)%20%7B%0A%20%20%20%20ensure_capacity(l%2C%202%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20l-%3Edata%5Bl-%3Esize%2B%2B%5D%20%3D%20element%3B%0A%20%20%20%20_assert(l-%3Esize%20%3C%3D%20l-%3Ecapacity%2C%20%22The%20size%20should%20not%20exceed%20the%20capacity.%22)%3B%0A%7D%0A%0Aint%20array_list_size(array_list_t*%20l)%20%7B%0A%20%20%20%20return%20l-%3Esize%3B%0A%7D%0A%0Aint*%20array_list_get(array_list_t%20*l%2C%20int%20idx)%20%7B%0A%20%20%20%20return%20idx%20%3C%20l-%3Esize%20%3F%20%26(l-%3Edata%5Bidx%5D)%20%3A%20NULL%3B%0A%7D%0A%0Aint%20array_list_find(array_list_t*%20l%2C%20int%20element)%20%7B%0A%20%20%20%20for%20(int%20i%20%3D%200%3B%20i%20%3C%20l-%3Esize%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20if%20(l-%3Edata%5Bi%5D%20%3D%3D%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20array_list_size(l)%3B%0A%7D%0A%0Aint%20array_list_remove(array_list_t*%20l%2C%20int%20idx)%20%7B%0A%20%20%20%20if%20(idx%20%3E%3D%20array_list_size(l))%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20for%20(int%20j%20%3D%20idx%3B%20j%2B1%20%3C%20l-%3Esize%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20l-%3Edata%5Bj%5D%20%3D%20l-%3Edata%5Bj%20%2B%201%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20--l-%3Esize%3B%0A%20%20%20%20return%201%3B%0A%7D%0A%0A%0Aint%20main()%20%7B%0A%20%20%20%20array_list_t%20l%3B%0A%20%20%20%20array_list_new(%26l%2C5)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_append(%26l%2C1)%3B%0A%20%20%20%20array_list_append(%26l%2C2)%3B%0A%20%20%20%20array_list_append(%26l%2C3)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_append(%26l%2C32)%3B%0A%20%20%20%20array_list_append(%26l%2C42)%3B%0A%20%20%20%20array_list_append(%26l%2C125)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_remove(%26l%2C2)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20printf(%22Pos%20of%2042%20%25d%5Cn%22%2C%20array_list_find(%26l%2C42))%3B%0A%20%20%20%20printf(%22%233%20%25d%5Cn%22%2C%20*(array_list_get(%26l%2C2)))%3B%0A%20%20%20%20%0A%20%20%20%20array_list_free(%26l)%3B%0A%20%20%20%20return%200%3B%0A%7D%20">Run</a>
</div>  <div class="para" id="p-484">Programmers can just declare variables of the above type. However, to function properly, they have to be initialized: The array has to be allocated and size and capacity have to be properly set. This is achieved by the following function. It takes a pointer to an (uninitialized) array list and an initial capacity and initializes the data structure accordingly.</div> <div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">static void ensure_capacity(array_list_t* l, int new_capacity) {
    if (l-&gt;size == l-&gt;capacity) {
        assert (new_capacity &gt; l-&gt;capacity);
        l-&gt;capacity = new_capacity;
        l-&gt;data = realloc(l-&gt;data, sizeof(l-&gt;data[0]) * l-&gt;capacity);
    }
}

array_list_t* array_list_new(array_list_t* l, int initial_capacity) {
    assert(initial_capacity &gt; 0);
    l-&gt;size = l-&gt;capacity = 0;
    l-&gt;data = NULL;
    ensure_capacity(l, initial_capacity);
    return l;
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=struct%20array_list_t%20%7B%0A%20%20%20%20int*%20data%3B%20%20%20%20%20%20%20%2F%2F%20payload%0A%20%20%20%20int%20size%3B%20%20%20%20%20%20%20%20%2F%2F%20number%20of%20elements%20in%20list%0A%20%20%20%20int%20capacity%3B%20%20%20%20%2F%2F%20size%20of%20array%3B%0A%7D%3B%0A%0Atypedef%20struct%20array_list_t%20array_list_t%3B%0A%0Avoid%20ensure_capacity(array_list_t*%20l%2C%20int%20new_capacity)%20%7B%0A%20%20%20%20if%20(l-%3Esize%20%3D%3D%20l-%3Ecapacity)%20%7B%0A%20%20%20%20%20%20%20%20_assert%20(new_capacity%20%3E%20l-%3Ecapacity%2C%20%22The%20capacity%20should%20be%20monotone.%22)%3B%0A%20%20%20%20%20%20%20%20l-%3Ecapacity%20%3D%20new_capacity%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20l-%3Edata%20%3D%20relloc(l-%3Edata%2Csizeof(l-%3Edata%5B0%5D)%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20manual%20fix%20as%20realloc%20is%20not%20implemented%0A%20%20%20%20%20%20%20%20%20%20int*%20newData%20%3D%20malloc(sizeof(l-%3Edata%5B0%5D)%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(int%20i%20%3D%200%3B%20i%20%3C%20l-%3Esize%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newData%5Bi%5D%3Dl-%3Edata%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20free(l-%3Edata)%3B%0A%20%20%20%20%20%20%20%20%20%20l-%3Edata%3DnewData%3B%0A%20%20%20%20%7D%0A%7D%0A%0Aarray_list_t*%20array_list_new(array_list_t*%20l%2C%20int%20initial_capacity)%20%7B%0A%20%20%20%20_assert(initial_capacity%20%3E%200%2C%20%22The%20array%20should%20have%20a%20positive%20size.%22)%3B%0A%20%20%20%20l-%3Esize%20%3D%20l-%3Ecapacity%20%3D%200%3B%0A%20%20%20%20l-%3Edata%20%3D%20NULL%3B%0A%20%20%20%20ensure_capacity(l%2C%20initial_capacity)%3B%0A%20%20%20%20return%20l%3B%0A%7D%0A%0Avoid%20array_list_free(array_list_t*%20l)%20%7B%0A%20%20%20%20free(l-%3Edata)%3B%0A%7D%0A%0Avoid%20array_list_append(array_list_t*%20l%2C%20int%20element)%20%7B%0A%20%20%20%20ensure_capacity(l%2C%202%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20l-%3Edata%5Bl-%3Esize%2B%2B%5D%20%3D%20element%3B%0A%20%20%20%20_assert(l-%3Esize%20%3C%3D%20l-%3Ecapacity%2C%20%22The%20size%20should%20not%20exceed%20the%20capacity.%22)%3B%0A%7D%0A%0Aint%20array_list_size(array_list_t*%20l)%20%7B%0A%20%20%20%20return%20l-%3Esize%3B%0A%7D%0A%0Aint*%20array_list_get(array_list_t%20*l%2C%20int%20idx)%20%7B%0A%20%20%20%20return%20idx%20%3C%20l-%3Esize%20%3F%20%26(l-%3Edata%5Bidx%5D)%20%3A%20NULL%3B%0A%7D%0A%0Aint%20array_list_find(array_list_t*%20l%2C%20int%20element)%20%7B%0A%20%20%20%20for%20(int%20i%20%3D%200%3B%20i%20%3C%20l-%3Esize%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20if%20(l-%3Edata%5Bi%5D%20%3D%3D%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20array_list_size(l)%3B%0A%7D%0A%0Aint%20array_list_remove(array_list_t*%20l%2C%20int%20idx)%20%7B%0A%20%20%20%20if%20(idx%20%3E%3D%20array_list_size(l))%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20for%20(int%20j%20%3D%20idx%3B%20j%2B1%20%3C%20l-%3Esize%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20l-%3Edata%5Bj%5D%20%3D%20l-%3Edata%5Bj%20%2B%201%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20--l-%3Esize%3B%0A%20%20%20%20return%201%3B%0A%7D%0A%0A%0Aint%20main()%20%7B%0A%20%20%20%20array_list_t%20l%3B%0A%20%20%20%20array_list_new(%26l%2C5)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_append(%26l%2C1)%3B%0A%20%20%20%20array_list_append(%26l%2C2)%3B%0A%20%20%20%20array_list_append(%26l%2C3)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_append(%26l%2C32)%3B%0A%20%20%20%20array_list_append(%26l%2C42)%3B%0A%20%20%20%20array_list_append(%26l%2C125)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_remove(%26l%2C2)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20printf(%22Pos%20of%2042%20%25d%5Cn%22%2C%20array_list_find(%26l%2C42))%3B%0A%20%20%20%20printf(%22%233%20%25d%5Cn%22%2C%20*(array_list_get(%26l%2C2)))%3B%0A%20%20%20%20%0A%20%20%20%20array_list_free(%26l)%3B%0A%20%20%20%20return%200%3B%0A%7D%20">Run</a>
</div> <article class="remark remark-like" id="remark-27"><h5 class="heading">
<span class="type">Remark</span><span class="space"> </span><span class="codenumber">5.1.2</span><span class="period">.</span><span class="space"> </span><span class="title">Allocation.</span>
</h5> <div class="para" id="p-485">You might ask yourself if it would be easier if <code class="code-inline tex2jax_ignore">array_list_new</code> also allocated the memory for the <code class="code-inline tex2jax_ignore">array_list_t</code> itself instead of requiring the user to give a pointer to it. This is pretty common in C programs because it gives the user more flexibility on where to allocate the memory for the variable. If <code class="code-inline tex2jax_ignore">array_list_new</code> also allocated memory, it would have to use <code class="code-inline tex2jax_ignore">malloc</code> which may not be what the user wants. Maybe they wanted a local or global variable instead.</div></article> <div class="para" id="p-486">Of course there also needs to be function that disposes all the allocated memory of an array list. Since this is just the array containing the list elements, this is a simple free. Note that it is still a good idea to provide a function for this because it relieves and prevents the programmer from studying the internals of the <code class="code-inline tex2jax_ignore">array_list_t</code> data structure and <em class="emphasis">encapsulates</em> its inner working. </div> <div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">void array_list_free(array_list_t* l) {
    free(l-&gt;data);
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=struct%20array_list_t%20%7B%0A%20%20%20%20int*%20data%3B%20%20%20%20%20%20%20%2F%2F%20payload%0A%20%20%20%20int%20size%3B%20%20%20%20%20%20%20%20%2F%2F%20number%20of%20elements%20in%20list%0A%20%20%20%20int%20capacity%3B%20%20%20%20%2F%2F%20size%20of%20array%3B%0A%7D%3B%0A%0Atypedef%20struct%20array_list_t%20array_list_t%3B%0A%0Avoid%20ensure_capacity(array_list_t*%20l%2C%20int%20new_capacity)%20%7B%0A%20%20%20%20if%20(l-%3Esize%20%3D%3D%20l-%3Ecapacity)%20%7B%0A%20%20%20%20%20%20%20%20_assert%20(new_capacity%20%3E%20l-%3Ecapacity%2C%20%22The%20capacity%20should%20be%20monotone.%22)%3B%0A%20%20%20%20%20%20%20%20l-%3Ecapacity%20%3D%20new_capacity%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20l-%3Edata%20%3D%20relloc(l-%3Edata%2Csizeof(l-%3Edata%5B0%5D)%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20manual%20fix%20as%20realloc%20is%20not%20implemented%0A%20%20%20%20%20%20%20%20%20%20int*%20newData%20%3D%20malloc(sizeof(l-%3Edata%5B0%5D)%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(int%20i%20%3D%200%3B%20i%20%3C%20l-%3Esize%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newData%5Bi%5D%3Dl-%3Edata%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20free(l-%3Edata)%3B%0A%20%20%20%20%20%20%20%20%20%20l-%3Edata%3DnewData%3B%0A%20%20%20%20%7D%0A%7D%0A%0Aarray_list_t*%20array_list_new(array_list_t*%20l%2C%20int%20initial_capacity)%20%7B%0A%20%20%20%20_assert(initial_capacity%20%3E%200%2C%20%22The%20array%20should%20have%20a%20positive%20size.%22)%3B%0A%20%20%20%20l-%3Esize%20%3D%20l-%3Ecapacity%20%3D%200%3B%0A%20%20%20%20l-%3Edata%20%3D%20NULL%3B%0A%20%20%20%20ensure_capacity(l%2C%20initial_capacity)%3B%0A%20%20%20%20return%20l%3B%0A%7D%0A%0Avoid%20array_list_free(array_list_t*%20l)%20%7B%0A%20%20%20%20free(l-%3Edata)%3B%0A%7D%0A%0Avoid%20array_list_append(array_list_t*%20l%2C%20int%20element)%20%7B%0A%20%20%20%20ensure_capacity(l%2C%202%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20l-%3Edata%5Bl-%3Esize%2B%2B%5D%20%3D%20element%3B%0A%20%20%20%20_assert(l-%3Esize%20%3C%3D%20l-%3Ecapacity%2C%20%22The%20size%20should%20not%20exceed%20the%20capacity.%22)%3B%0A%7D%0A%0Aint%20array_list_size(array_list_t*%20l)%20%7B%0A%20%20%20%20return%20l-%3Esize%3B%0A%7D%0A%0Aint*%20array_list_get(array_list_t%20*l%2C%20int%20idx)%20%7B%0A%20%20%20%20return%20idx%20%3C%20l-%3Esize%20%3F%20%26(l-%3Edata%5Bidx%5D)%20%3A%20NULL%3B%0A%7D%0A%0Aint%20array_list_find(array_list_t*%20l%2C%20int%20element)%20%7B%0A%20%20%20%20for%20(int%20i%20%3D%200%3B%20i%20%3C%20l-%3Esize%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20if%20(l-%3Edata%5Bi%5D%20%3D%3D%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20array_list_size(l)%3B%0A%7D%0A%0Aint%20array_list_remove(array_list_t*%20l%2C%20int%20idx)%20%7B%0A%20%20%20%20if%20(idx%20%3E%3D%20array_list_size(l))%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20for%20(int%20j%20%3D%20idx%3B%20j%2B1%20%3C%20l-%3Esize%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20l-%3Edata%5Bj%5D%20%3D%20l-%3Edata%5Bj%20%2B%201%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20--l-%3Esize%3B%0A%20%20%20%20return%201%3B%0A%7D%0A%0A%0Aint%20main()%20%7B%0A%20%20%20%20array_list_t%20l%3B%0A%20%20%20%20array_list_new(%26l%2C5)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_append(%26l%2C1)%3B%0A%20%20%20%20array_list_append(%26l%2C2)%3B%0A%20%20%20%20array_list_append(%26l%2C3)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_append(%26l%2C32)%3B%0A%20%20%20%20array_list_append(%26l%2C42)%3B%0A%20%20%20%20array_list_append(%26l%2C125)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_remove(%26l%2C2)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20printf(%22Pos%20of%2042%20%25d%5Cn%22%2C%20array_list_find(%26l%2C42))%3B%0A%20%20%20%20printf(%22%233%20%25d%5Cn%22%2C%20*(array_list_get(%26l%2C2)))%3B%0A%20%20%20%20%0A%20%20%20%20array_list_free(%26l)%3B%0A%20%20%20%20return%200%3B%0A%7D%20">Run</a>
</div></section><section class="paragraphs" id="paragraphs-8"><h4 class="heading"><span class="title">Simple Functions.</span></h4> <div class="para" id="p-487">For a useful list implementation we also want functions to query the list size and get the element at the i-th position. These functions are very easy to implement and could be carried out by the user directly on the data structure. However, to ensure encapsulation, we provide functions nonetheless.</div> <div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">int array_list_size(const array_list_t* l) {
    return l-&gt;size;
}

void* array_list_get(const array_list_t *l, int idx) {
    return idx &lt; l-&gt;size ? l-&gt;data[idx] : NULL;
}

int array_list_find(array_list_t* l, int element) {
    for (int i = 0; i &lt; l-&gt;size; i++) {
        if (l-&gt;data[i] == element) {
            return i;
        }
    }
    return array_list_size(l);
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=struct%20array_list_t%20%7B%0A%20%20%20%20int*%20data%3B%20%20%20%20%20%20%20%2F%2F%20payload%0A%20%20%20%20int%20size%3B%20%20%20%20%20%20%20%20%2F%2F%20number%20of%20elements%20in%20list%0A%20%20%20%20int%20capacity%3B%20%20%20%20%2F%2F%20size%20of%20array%3B%0A%7D%3B%0A%0Atypedef%20struct%20array_list_t%20array_list_t%3B%0A%0Avoid%20ensure_capacity(array_list_t*%20l%2C%20int%20new_capacity)%20%7B%0A%20%20%20%20if%20(l-%3Esize%20%3D%3D%20l-%3Ecapacity)%20%7B%0A%20%20%20%20%20%20%20%20_assert%20(new_capacity%20%3E%20l-%3Ecapacity%2C%20%22The%20capacity%20should%20be%20monotone.%22)%3B%0A%20%20%20%20%20%20%20%20l-%3Ecapacity%20%3D%20new_capacity%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20l-%3Edata%20%3D%20relloc(l-%3Edata%2Csizeof(l-%3Edata%5B0%5D)%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20manual%20fix%20as%20realloc%20is%20not%20implemented%0A%20%20%20%20%20%20%20%20%20%20int*%20newData%20%3D%20malloc(sizeof(l-%3Edata%5B0%5D)%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(int%20i%20%3D%200%3B%20i%20%3C%20l-%3Esize%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newData%5Bi%5D%3Dl-%3Edata%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20free(l-%3Edata)%3B%0A%20%20%20%20%20%20%20%20%20%20l-%3Edata%3DnewData%3B%0A%20%20%20%20%7D%0A%7D%0A%0Aarray_list_t*%20array_list_new(array_list_t*%20l%2C%20int%20initial_capacity)%20%7B%0A%20%20%20%20_assert(initial_capacity%20%3E%200%2C%20%22The%20array%20should%20have%20a%20positive%20size.%22)%3B%0A%20%20%20%20l-%3Esize%20%3D%20l-%3Ecapacity%20%3D%200%3B%0A%20%20%20%20l-%3Edata%20%3D%20NULL%3B%0A%20%20%20%20ensure_capacity(l%2C%20initial_capacity)%3B%0A%20%20%20%20return%20l%3B%0A%7D%0A%0Avoid%20array_list_free(array_list_t*%20l)%20%7B%0A%20%20%20%20free(l-%3Edata)%3B%0A%7D%0A%0Avoid%20array_list_append(array_list_t*%20l%2C%20int%20element)%20%7B%0A%20%20%20%20ensure_capacity(l%2C%202%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20l-%3Edata%5Bl-%3Esize%2B%2B%5D%20%3D%20element%3B%0A%20%20%20%20_assert(l-%3Esize%20%3C%3D%20l-%3Ecapacity%2C%20%22The%20size%20should%20not%20exceed%20the%20capacity.%22)%3B%0A%7D%0A%0Aint%20array_list_size(array_list_t*%20l)%20%7B%0A%20%20%20%20return%20l-%3Esize%3B%0A%7D%0A%0Aint*%20array_list_get(array_list_t%20*l%2C%20int%20idx)%20%7B%0A%20%20%20%20return%20idx%20%3C%20l-%3Esize%20%3F%20%26(l-%3Edata%5Bidx%5D)%20%3A%20NULL%3B%0A%7D%0A%0Aint%20array_list_find(array_list_t*%20l%2C%20int%20element)%20%7B%0A%20%20%20%20for%20(int%20i%20%3D%200%3B%20i%20%3C%20l-%3Esize%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20if%20(l-%3Edata%5Bi%5D%20%3D%3D%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20array_list_size(l)%3B%0A%7D%0A%0Aint%20array_list_remove(array_list_t*%20l%2C%20int%20idx)%20%7B%0A%20%20%20%20if%20(idx%20%3E%3D%20array_list_size(l))%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20for%20(int%20j%20%3D%20idx%3B%20j%2B1%20%3C%20l-%3Esize%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20l-%3Edata%5Bj%5D%20%3D%20l-%3Edata%5Bj%20%2B%201%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20--l-%3Esize%3B%0A%20%20%20%20return%201%3B%0A%7D%0A%0A%0Aint%20main()%20%7B%0A%20%20%20%20array_list_t%20l%3B%0A%20%20%20%20array_list_new(%26l%2C5)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_append(%26l%2C1)%3B%0A%20%20%20%20array_list_append(%26l%2C2)%3B%0A%20%20%20%20array_list_append(%26l%2C3)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_append(%26l%2C32)%3B%0A%20%20%20%20array_list_append(%26l%2C42)%3B%0A%20%20%20%20array_list_append(%26l%2C125)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_remove(%26l%2C2)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20printf(%22Pos%20of%2042%20%25d%5Cn%22%2C%20array_list_find(%26l%2C42))%3B%0A%20%20%20%20printf(%22%233%20%25d%5Cn%22%2C%20*(array_list_get(%26l%2C2)))%3B%0A%20%20%20%20%0A%20%20%20%20array_list_free(%26l)%3B%0A%20%20%20%20return%200%3B%0A%7D%20">Run</a>
</div></section><section class="paragraphs" id="paragraphs-9"><h4 class="heading"><span class="title">Appending to an Array List.</span></h4> <div class="para" id="p-488">Appending implements the resizing of the array when the capacity is exhausted as discussed above. To this end, it uses the C standard library function <code class="code-inline tex2jax_ignore">realloc</code> which takes a pointer to an existing container and a size in bytes and gives us back a pointer to a new container that has the given size and copies as much of the old data as will fit into the new container.</div> <div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">void array_list_append(array_list_t* l, int element) {
    ensure_capacity(l, 2 * l-&gt;capacity);
    l-&gt;data[l-&gt;size++] = element;
    assert(l-&gt;size &lt;= l-&gt;capacity);
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=struct%20array_list_t%20%7B%0A%20%20%20%20int*%20data%3B%20%20%20%20%20%20%20%2F%2F%20payload%0A%20%20%20%20int%20size%3B%20%20%20%20%20%20%20%20%2F%2F%20number%20of%20elements%20in%20list%0A%20%20%20%20int%20capacity%3B%20%20%20%20%2F%2F%20size%20of%20array%3B%0A%7D%3B%0A%0Atypedef%20struct%20array_list_t%20array_list_t%3B%0A%0Avoid%20ensure_capacity(array_list_t*%20l%2C%20int%20new_capacity)%20%7B%0A%20%20%20%20if%20(l-%3Esize%20%3D%3D%20l-%3Ecapacity)%20%7B%0A%20%20%20%20%20%20%20%20_assert%20(new_capacity%20%3E%20l-%3Ecapacity%2C%20%22The%20capacity%20should%20be%20monotone.%22)%3B%0A%20%20%20%20%20%20%20%20l-%3Ecapacity%20%3D%20new_capacity%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20l-%3Edata%20%3D%20relloc(l-%3Edata%2Csizeof(l-%3Edata%5B0%5D)%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20manual%20fix%20as%20realloc%20is%20not%20implemented%0A%20%20%20%20%20%20%20%20%20%20int*%20newData%20%3D%20malloc(sizeof(l-%3Edata%5B0%5D)%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(int%20i%20%3D%200%3B%20i%20%3C%20l-%3Esize%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newData%5Bi%5D%3Dl-%3Edata%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20free(l-%3Edata)%3B%0A%20%20%20%20%20%20%20%20%20%20l-%3Edata%3DnewData%3B%0A%20%20%20%20%7D%0A%7D%0A%0Aarray_list_t*%20array_list_new(array_list_t*%20l%2C%20int%20initial_capacity)%20%7B%0A%20%20%20%20_assert(initial_capacity%20%3E%200%2C%20%22The%20array%20should%20have%20a%20positive%20size.%22)%3B%0A%20%20%20%20l-%3Esize%20%3D%20l-%3Ecapacity%20%3D%200%3B%0A%20%20%20%20l-%3Edata%20%3D%20NULL%3B%0A%20%20%20%20ensure_capacity(l%2C%20initial_capacity)%3B%0A%20%20%20%20return%20l%3B%0A%7D%0A%0Avoid%20array_list_free(array_list_t*%20l)%20%7B%0A%20%20%20%20free(l-%3Edata)%3B%0A%7D%0A%0Avoid%20array_list_append(array_list_t*%20l%2C%20int%20element)%20%7B%0A%20%20%20%20ensure_capacity(l%2C%202%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20l-%3Edata%5Bl-%3Esize%2B%2B%5D%20%3D%20element%3B%0A%20%20%20%20_assert(l-%3Esize%20%3C%3D%20l-%3Ecapacity%2C%20%22The%20size%20should%20not%20exceed%20the%20capacity.%22)%3B%0A%7D%0A%0Aint%20array_list_size(array_list_t*%20l)%20%7B%0A%20%20%20%20return%20l-%3Esize%3B%0A%7D%0A%0Aint*%20array_list_get(array_list_t%20*l%2C%20int%20idx)%20%7B%0A%20%20%20%20return%20idx%20%3C%20l-%3Esize%20%3F%20%26(l-%3Edata%5Bidx%5D)%20%3A%20NULL%3B%0A%7D%0A%0Aint%20array_list_find(array_list_t*%20l%2C%20int%20element)%20%7B%0A%20%20%20%20for%20(int%20i%20%3D%200%3B%20i%20%3C%20l-%3Esize%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20if%20(l-%3Edata%5Bi%5D%20%3D%3D%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20array_list_size(l)%3B%0A%7D%0A%0Aint%20array_list_remove(array_list_t*%20l%2C%20int%20idx)%20%7B%0A%20%20%20%20if%20(idx%20%3E%3D%20array_list_size(l))%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20for%20(int%20j%20%3D%20idx%3B%20j%2B1%20%3C%20l-%3Esize%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20l-%3Edata%5Bj%5D%20%3D%20l-%3Edata%5Bj%20%2B%201%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20--l-%3Esize%3B%0A%20%20%20%20return%201%3B%0A%7D%0A%0A%0Aint%20main()%20%7B%0A%20%20%20%20array_list_t%20l%3B%0A%20%20%20%20array_list_new(%26l%2C5)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_append(%26l%2C1)%3B%0A%20%20%20%20array_list_append(%26l%2C2)%3B%0A%20%20%20%20array_list_append(%26l%2C3)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_append(%26l%2C32)%3B%0A%20%20%20%20array_list_append(%26l%2C42)%3B%0A%20%20%20%20array_list_append(%26l%2C125)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_remove(%26l%2C2)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20printf(%22Pos%20of%2042%20%25d%5Cn%22%2C%20array_list_find(%26l%2C42))%3B%0A%20%20%20%20printf(%22%233%20%25d%5Cn%22%2C%20*(array_list_get(%26l%2C2)))%3B%0A%20%20%20%20%0A%20%20%20%20array_list_free(%26l)%3B%0A%20%20%20%20return%200%3B%0A%7D%20">Run</a>
</div></section><section class="paragraphs" id="paragraphs-10"><h4 class="heading"><span class="title">Removing an Element.</span></h4> <div class="para" id="p-489">Removing an element from a list involves copying ‚Äúdown‚Äù all subsequent elements with the element immediately following the one to be removed overwriting it. This is implemented by a simple for-loop. Note, that it is vital that the function also checks that the index is in bounds. Otherwise, undefined behavior (see <a href="sec-c-undef.html" class="internal" title="Section 4.15: Undefined Behavior">Section¬†4.15</a>) may occur when <code class="code-inline tex2jax_ignore">idx</code> is out of bounds.</div> <div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">int array_list_remove(array_list_t* l, int idx) {
    if (idx &gt;= array_list_size(l))
        return 0;
    for (int j = idx; j+1 &lt; l-&gt;size; j++) {
        l-&gt;data[j] = l-&gt;data[j + 1];
    }
    --l-&gt;size;
    return 1;
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=struct%20array_list_t%20%7B%0A%20%20%20%20int*%20data%3B%20%20%20%20%20%20%20%2F%2F%20payload%0A%20%20%20%20int%20size%3B%20%20%20%20%20%20%20%20%2F%2F%20number%20of%20elements%20in%20list%0A%20%20%20%20int%20capacity%3B%20%20%20%20%2F%2F%20size%20of%20array%3B%0A%7D%3B%0A%0Atypedef%20struct%20array_list_t%20array_list_t%3B%0A%0Avoid%20ensure_capacity(array_list_t*%20l%2C%20int%20new_capacity)%20%7B%0A%20%20%20%20if%20(l-%3Esize%20%3D%3D%20l-%3Ecapacity)%20%7B%0A%20%20%20%20%20%20%20%20_assert%20(new_capacity%20%3E%20l-%3Ecapacity%2C%20%22The%20capacity%20should%20be%20monotone.%22)%3B%0A%20%20%20%20%20%20%20%20l-%3Ecapacity%20%3D%20new_capacity%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20l-%3Edata%20%3D%20relloc(l-%3Edata%2Csizeof(l-%3Edata%5B0%5D)%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20manual%20fix%20as%20realloc%20is%20not%20implemented%0A%20%20%20%20%20%20%20%20%20%20int*%20newData%20%3D%20malloc(sizeof(l-%3Edata%5B0%5D)%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(int%20i%20%3D%200%3B%20i%20%3C%20l-%3Esize%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newData%5Bi%5D%3Dl-%3Edata%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20free(l-%3Edata)%3B%0A%20%20%20%20%20%20%20%20%20%20l-%3Edata%3DnewData%3B%0A%20%20%20%20%7D%0A%7D%0A%0Aarray_list_t*%20array_list_new(array_list_t*%20l%2C%20int%20initial_capacity)%20%7B%0A%20%20%20%20_assert(initial_capacity%20%3E%200%2C%20%22The%20array%20should%20have%20a%20positive%20size.%22)%3B%0A%20%20%20%20l-%3Esize%20%3D%20l-%3Ecapacity%20%3D%200%3B%0A%20%20%20%20l-%3Edata%20%3D%20NULL%3B%0A%20%20%20%20ensure_capacity(l%2C%20initial_capacity)%3B%0A%20%20%20%20return%20l%3B%0A%7D%0A%0Avoid%20array_list_free(array_list_t*%20l)%20%7B%0A%20%20%20%20free(l-%3Edata)%3B%0A%7D%0A%0Avoid%20array_list_append(array_list_t*%20l%2C%20int%20element)%20%7B%0A%20%20%20%20ensure_capacity(l%2C%202%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20l-%3Edata%5Bl-%3Esize%2B%2B%5D%20%3D%20element%3B%0A%20%20%20%20_assert(l-%3Esize%20%3C%3D%20l-%3Ecapacity%2C%20%22The%20size%20should%20not%20exceed%20the%20capacity.%22)%3B%0A%7D%0A%0Aint%20array_list_size(array_list_t*%20l)%20%7B%0A%20%20%20%20return%20l-%3Esize%3B%0A%7D%0A%0Aint*%20array_list_get(array_list_t%20*l%2C%20int%20idx)%20%7B%0A%20%20%20%20return%20idx%20%3C%20l-%3Esize%20%3F%20%26(l-%3Edata%5Bidx%5D)%20%3A%20NULL%3B%0A%7D%0A%0Aint%20array_list_find(array_list_t*%20l%2C%20int%20element)%20%7B%0A%20%20%20%20for%20(int%20i%20%3D%200%3B%20i%20%3C%20l-%3Esize%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20if%20(l-%3Edata%5Bi%5D%20%3D%3D%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20array_list_size(l)%3B%0A%7D%0A%0Aint%20array_list_remove(array_list_t*%20l%2C%20int%20idx)%20%7B%0A%20%20%20%20if%20(idx%20%3E%3D%20array_list_size(l))%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20for%20(int%20j%20%3D%20idx%3B%20j%2B1%20%3C%20l-%3Esize%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20l-%3Edata%5Bj%5D%20%3D%20l-%3Edata%5Bj%20%2B%201%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20--l-%3Esize%3B%0A%20%20%20%20return%201%3B%0A%7D%0A%0A%0Aint%20main()%20%7B%0A%20%20%20%20array_list_t%20l%3B%0A%20%20%20%20array_list_new(%26l%2C5)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_append(%26l%2C1)%3B%0A%20%20%20%20array_list_append(%26l%2C2)%3B%0A%20%20%20%20array_list_append(%26l%2C3)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_append(%26l%2C32)%3B%0A%20%20%20%20array_list_append(%26l%2C42)%3B%0A%20%20%20%20array_list_append(%26l%2C125)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_remove(%26l%2C2)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20printf(%22Pos%20of%2042%20%25d%5Cn%22%2C%20array_list_find(%26l%2C42))%3B%0A%20%20%20%20printf(%22%233%20%25d%5Cn%22%2C%20*(array_list_get(%26l%2C2)))%3B%0A%20%20%20%20%0A%20%20%20%20array_list_free(%26l)%3B%0A%20%20%20%20return%200%3B%0A%7D%20">Run</a>
</div></section><section class="paragraphs" id="sec-ds-genericity"><h4 class="heading"><span class="title">Genericity.</span></h4> <div class="para" id="p-490">So far, our list elements were ints. However, one typically does not only want lists of ints but lists holding elements of an arbitrary type. We also say that the list (or the data structure in general) shall be <dfn class="terminology">generic</dfn>. This means that the type of the elements is not known beforehand but the data structure is <em class="emphasis">parametric</em> in that data type, meaning that the data structure can be <em class="emphasis">instantiated</em> for arbitrary element types.</div> <div class="para" id="p-491">Genericity cannot be achieved very elegantly in¬†C because C's type system does not provide a mechanism where types can be parameters to another type declaration like the declaration of the <code class="code-inline tex2jax_ignore">array_list_t</code> struct. The standard way of attaining genericity in¬†C is by using void pointers. By substituting <code class="code-inline tex2jax_ignore">int element</code> by <code class="code-inline tex2jax_ignore">void* element</code>, we indicate that the list element resides somewhere else in memory (not directly <em class="emphasis">inside</em> the array that holds the list). This makes the array list work with arbitrary element types.</div> <div class="para" id="p-492">However, the type system of¬†C is too weak to provide helpful guarantees. Other programming languages like C++, Java, ML, and many others provide some sort of parametricity where the programmer can indicate that the list is actually a list of elements of some type <span class="process-math">\(T\text{.}\)</span> Such type systems then ensure that the programmer can only add elements of type¬†<span class="process-math">\(T\)</span> to the list and, in turn guarantees that everything that is taken out of the list is also of type¬†<span class="process-math">\(T\text{.}\)</span> From a type system perspective, when using void pointers, we are essentially forgetting everything about the type so it is up to the programmer to cast the void pointer into appropriate element pointers.</div></section><section class="paragraphs" id="paragraphs-12"><h4 class="heading"><span class="title">Summary and Complexity Analysis.</span></h4> <div class="para" id="p-493">Array lists are very frequently used in practice. The amortized complexity of appending an element is constant as argued above. However, some append operations may take as many operations as there are elements in the list. Getting the i-th element can be done in a single operation by virtue of address arithmetic: We just index the array at index¬†i. Removing and finding an element costs¬†<span class="process-math">\(n\)</span> copy operations in the worst case.</div> <div class="para" id="p-494">In terms of memory, array lists allocate twice as much memory as needed in the worst case.</div> <div class="para" id="p-495">Very important in practice is that the list elements lie contiguously in memory. Various hardware mechanisms (fetching cache lines, prefetching) are optimized for contiguously accessing arrays which makes array lists very fast in practice.</div></section><section class="exercises" id="exercises-4"><h4 class="heading hide-type">
<span class="type">Exercises</span> <span class="codenumber"></span> <span class="title">Exercises</span>
</h4>
<article class="exercise exercise-like" id="exercise-12"><h5 class="heading"><span class="codenumber">1<span class="period">.</span></span></h5>
<div class="para" id="p-496">Modify the <div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">struct array_list_t {
    int* data;       // payload
    int size;        // number of elements in list
    int capacity;    // size of array;
};

typedef struct array_list_t array_list_t;

void ensure_capacity(array_list_t* l, int new_capacity) {
    if (l-&gt;size == l-&gt;capacity) {
        _assert (new_capacity &gt; l-&gt;capacity, "The capacity should be monotone.");
        l-&gt;capacity = new_capacity;
        // l-&gt;data = relloc(l-&gt;data,sizeof(l-&gt;data[0]) * l-&gt;capacity);
        // manual fix as realloc is not implemented
          int* newData = malloc(sizeof(l-&gt;data[0]) * l-&gt;capacity);
          for (int i = 0; i &lt; l-&gt;size; i++) {
              newData[i]=l-&gt;data[i];
          }
          free(l-&gt;data);
          l-&gt;data=newData;
    }
}

array_list_t* array_list_new(array_list_t* l, int initial_capacity) {
    _assert(initial_capacity &gt; 0, "The array should have a positive size.");
    l-&gt;size = l-&gt;capacity = 0;
    l-&gt;data = NULL;
    ensure_capacity(l, initial_capacity);
    return l;
}

void array_list_free(array_list_t* l) {
    free(l-&gt;data);
}

void array_list_append(array_list_t* l, int element) {
    ensure_capacity(l, 2 * l-&gt;capacity);
    l-&gt;data[l-&gt;size++] = element;
    _assert(l-&gt;size &lt;= l-&gt;capacity, "The size should not exceed the capacity.");
}

int array_list_size(array_list_t* l) {
    return l-&gt;size;
}

int* array_list_get(array_list_t *l, int idx) {
    return idx &lt; l-&gt;size ? &amp;(l-&gt;data[idx]) : NULL;
}

int array_list_find(array_list_t* l, int element) {
    for (int i = 0; i &lt; l-&gt;size; i++) {
        if (l-&gt;data[i] == element) {
            return i;
        }
    }
    return array_list_size(l);
}

int array_list_remove(array_list_t* l, int idx) {
    if (idx &gt;= array_list_size(l))
        return 0;
    for (int j = idx; j+1 &lt; l-&gt;size; j++) {
        l-&gt;data[j] = l-&gt;data[j + 1];
    }
    --l-&gt;size;
    return 1;
}


int main() {
    array_list_t l;
    array_list_new(&amp;l,5);
    printf("Size %d\n", array_list_size(&amp;l));
    array_list_append(&amp;l,1);
    array_list_append(&amp;l,2);
    array_list_append(&amp;l,3);
    printf("Size %d\n", array_list_size(&amp;l));
    array_list_append(&amp;l,32);
    array_list_append(&amp;l,42);
    array_list_append(&amp;l,125);
    printf("Size %d\n", array_list_size(&amp;l));
    array_list_remove(&amp;l,2);
    printf("Size %d\n", array_list_size(&amp;l));
    printf("Pos of 42 %d\n", array_list_find(&amp;l,42));
    printf("#3 %d\n", *(array_list_get(&amp;l,2)));
    
    array_list_free(&amp;l);
    return 0;
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=struct%20array_list_t%20%7B%0A%20%20%20%20int*%20data%3B%20%20%20%20%20%20%20%2F%2F%20payload%0A%20%20%20%20int%20size%3B%20%20%20%20%20%20%20%20%2F%2F%20number%20of%20elements%20in%20list%0A%20%20%20%20int%20capacity%3B%20%20%20%20%2F%2F%20size%20of%20array%3B%0A%7D%3B%0A%0Atypedef%20struct%20array_list_t%20array_list_t%3B%0A%0Avoid%20ensure_capacity(array_list_t*%20l%2C%20int%20new_capacity)%20%7B%0A%20%20%20%20if%20(l-%3Esize%20%3D%3D%20l-%3Ecapacity)%20%7B%0A%20%20%20%20%20%20%20%20_assert%20(new_capacity%20%3E%20l-%3Ecapacity%2C%20%22The%20capacity%20should%20be%20monotone.%22)%3B%0A%20%20%20%20%20%20%20%20l-%3Ecapacity%20%3D%20new_capacity%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20l-%3Edata%20%3D%20relloc(l-%3Edata%2Csizeof(l-%3Edata%5B0%5D)%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20%20%20%20%20%2F%2F%20manual%20fix%20as%20realloc%20is%20not%20implemented%0A%20%20%20%20%20%20%20%20%20%20int*%20newData%20%3D%20malloc(sizeof(l-%3Edata%5B0%5D)%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20%20%20%20%20%20%20for%20(int%20i%20%3D%200%3B%20i%20%3C%20l-%3Esize%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20newData%5Bi%5D%3Dl-%3Edata%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20free(l-%3Edata)%3B%0A%20%20%20%20%20%20%20%20%20%20l-%3Edata%3DnewData%3B%0A%20%20%20%20%7D%0A%7D%0A%0Aarray_list_t*%20array_list_new(array_list_t*%20l%2C%20int%20initial_capacity)%20%7B%0A%20%20%20%20_assert(initial_capacity%20%3E%200%2C%20%22The%20array%20should%20have%20a%20positive%20size.%22)%3B%0A%20%20%20%20l-%3Esize%20%3D%20l-%3Ecapacity%20%3D%200%3B%0A%20%20%20%20l-%3Edata%20%3D%20NULL%3B%0A%20%20%20%20ensure_capacity(l%2C%20initial_capacity)%3B%0A%20%20%20%20return%20l%3B%0A%7D%0A%0Avoid%20array_list_free(array_list_t*%20l)%20%7B%0A%20%20%20%20free(l-%3Edata)%3B%0A%7D%0A%0Avoid%20array_list_append(array_list_t*%20l%2C%20int%20element)%20%7B%0A%20%20%20%20ensure_capacity(l%2C%202%20*%20l-%3Ecapacity)%3B%0A%20%20%20%20l-%3Edata%5Bl-%3Esize%2B%2B%5D%20%3D%20element%3B%0A%20%20%20%20_assert(l-%3Esize%20%3C%3D%20l-%3Ecapacity%2C%20%22The%20size%20should%20not%20exceed%20the%20capacity.%22)%3B%0A%7D%0A%0Aint%20array_list_size(array_list_t*%20l)%20%7B%0A%20%20%20%20return%20l-%3Esize%3B%0A%7D%0A%0Aint*%20array_list_get(array_list_t%20*l%2C%20int%20idx)%20%7B%0A%20%20%20%20return%20idx%20%3C%20l-%3Esize%20%3F%20%26(l-%3Edata%5Bidx%5D)%20%3A%20NULL%3B%0A%7D%0A%0Aint%20array_list_find(array_list_t*%20l%2C%20int%20element)%20%7B%0A%20%20%20%20for%20(int%20i%20%3D%200%3B%20i%20%3C%20l-%3Esize%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20if%20(l-%3Edata%5Bi%5D%20%3D%3D%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20i%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20array_list_size(l)%3B%0A%7D%0A%0Aint%20array_list_remove(array_list_t*%20l%2C%20int%20idx)%20%7B%0A%20%20%20%20if%20(idx%20%3E%3D%20array_list_size(l))%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20for%20(int%20j%20%3D%20idx%3B%20j%2B1%20%3C%20l-%3Esize%3B%20j%2B%2B)%20%7B%0A%20%20%20%20%20%20%20%20l-%3Edata%5Bj%5D%20%3D%20l-%3Edata%5Bj%20%2B%201%5D%3B%0A%20%20%20%20%7D%0A%20%20%20%20--l-%3Esize%3B%0A%20%20%20%20return%201%3B%0A%7D%0A%0A%0Aint%20main()%20%7B%0A%20%20%20%20array_list_t%20l%3B%0A%20%20%20%20array_list_new(%26l%2C5)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_append(%26l%2C1)%3B%0A%20%20%20%20array_list_append(%26l%2C2)%3B%0A%20%20%20%20array_list_append(%26l%2C3)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_append(%26l%2C32)%3B%0A%20%20%20%20array_list_append(%26l%2C42)%3B%0A%20%20%20%20array_list_append(%26l%2C125)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20array_list_remove(%26l%2C2)%3B%0A%20%20%20%20printf(%22Size%20%25d%5Cn%22%2C%20array_list_size(%26l))%3B%0A%20%20%20%20printf(%22Pos%20of%2042%20%25d%5Cn%22%2C%20array_list_find(%26l%2C42))%3B%0A%20%20%20%20printf(%22%233%20%25d%5Cn%22%2C%20*(array_list_get(%26l%2C2)))%3B%0A%20%20%20%20%0A%20%20%20%20array_list_free(%26l)%3B%0A%20%20%20%20return%200%3B%0A%7D%20">Run</a>
</div> to provide genericity by using void pointers and write a small demo program that builds a list and uses the functions outlined above on it.</div></article><article class="exercise exercise-like" id="exercise-13"><h5 class="heading"><span class="codenumber">2<span class="period">.</span></span></h5>
<div class="para" id="p-497">The drawback of void pointer genericity is that we force the programmer to allocate the memory of the list elements elsewhere because the list only contains void pointers to the list elements. Come up with an implementation where the elements are stored inside the array. To this end, you have to change the implementation more drastically.</div>
<div class="debug">202408041548</div>
<div class="solutions">
<a href="" data-knowl="" class="id-ref hint-knowl original" data-refid="hk-hint-4" id="hint-4"><span class="type">Hint</span><span class="period">.</span></a><div class="hidden-content tex2jax_ignore" id="hk-hint-4"><div class="hint solution-like"><div class="para" id="p-498">Figure out what the type of Introduce another field <code class="code-inline tex2jax_ignore">element_size</code> that holds the size of an array element. Use this in the allocation function instead</div></div></div>
</div></article></section></section><section class="subsection" id="sec-ds-sllists"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">5.1.2</span> <span class="title">Singly-Linked Lists</span>
</h3>
<div class="para" id="p-499">Array lists get you very far in practice and they are, for example, the implementation behind Python's lists, C++'s <code class="code-inline tex2jax_ignore">std::vector</code>, and Java's <code class="code-inline tex2jax_ignore">ArrayList</code>. As discussed above, modern hardware also goes to great lengths to optimize array processing which makes array lists very fast.</div>
<div class="para" id="p-500">However, in some scenarios one does not want to pay the price of allocating potentially too much memory or the linear time complexity of removing elements from the list. In such cases, linked lists are practical.</div>
<div class="para" id="p-501">A linked list uses pointers to create a chain of list elements. The list itself consists of nodes of which each contains a payload (the element) and, in case of a singly-linked list, a pointer to the next node in the list. If there is no next node, that next pointer is set to <code class="code-inline tex2jax_ignore">NULL</code>. Each node is a container of its own that resides somewhere in memory. So there is no array that contains all nodes which makes it also impossible to access the i-th element in constant time because we need to chase the first <span class="process-math">\(i-1\)</span> pointers to get get to the i-th node.</div>
<div class="para" id="p-502"></div>
<section class="paragraphs" id="paragraphs-13"><h4 class="heading"><span class="title">Basic Data Structure.</span></h4> <div class="para" id="p-503">A list node is typically a struct that consists of one field that carries the payload data; in our example a single <code class="code-inline tex2jax_ignore">int</code> and another field that is a pointer to the next list node in the list. There may be variations to this scheme which we discuss below.</div> <div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c"> struct list_node_t {
    int element;
    struct list_node_t* next;
}; 
typedef struct list_node_t list_node_t;
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=%20struct%20list_node_t%20%7B%0A%20%20%20%20int%20element%3B%0A%20%20%20%20struct%20list_node_t*%20next%3B%0A%7D%3B%20%0Atypedef%20struct%20list_node_t%20list_node_t%3B%0A%20%20%20%20%0Alist_node_t*%20list_insert_behind(list_node_t*%20where%2C%20int%20element)%20%7B%0A%20%20%20%20list_node_t*%20n%20%3D%20malloc(sizeof(*n))%3B%0A%20%20%20%20n-%3Eelement%20%20%3D%20element%3B%0A%20%20%20%20n-%3Enext%20%20%20%20%20%3D%20where-%3Enext%3B%0A%20%20%20%20where-%3Enext%20%3D%20n%3B%0A%20%20%20%20return%20n%3B%0A%7D%0A%0Aint%20list_remove_behind(list_node_t*%20where)%20%7B%0A%20%20%20%20list_node_t*%20to_be_removed%20%3D%20where-%3Enext%3B%0A%20%20%20%20if%20(where-%3Enext%20%3D%3D%20NULL)%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20where-%3Enext%20%3D%20to_be_removed-%3Enext%3B%0A%20%20%20%20free(to_be_removed)%3B%0A%20%20%20%20return%201%3B%0A%7D%0A%0Alist_node_t*%20list_search(list_node_t*%20root%2C%20int%20value)%20%7B%0A%20%20%20%20list_node_t*%20n%20%3D%20root-%3Enext%3B%0A%20%20%20%20while(n%20!%3D%20NULL)%20%7B%0A%20%20%20%20%20%20%20%20if%20(n-%3Eelement%20%3D%3D%20value)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20n%3B%0A%20%20%20%20%20%20%20%20n%20%3D%20n-%3Enext%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20NULL%3B%0A%7D%0A%0Aint%20main()%20%7B%0A%20%20%20%20list_node_t%20head%3B%0A%20%20%20%20head.element%20%3D%2042%3B%0A%20%20%20%20head.next%20%3D%20NULL%3B%0A%20%20%20%20list_node_t*%20tail%20%3D%20%26head%3B%0A%20%20%20%20tail%20%3D%20list_insert_behind(tail%2C32)%3B%0A%20%20%20%20tail%20%3D%20list_insert_behind(tail%2C22)%3B%0A%20%20%20%20list_insert_behind(%26head%2C41)%3B%0A%20%20%20%20tail%20%3D%20list_insert_behind(tail%2C12)%3B%0A%20%20%20%20list_node_t*%20n22%20%3D%20list_search(%26head%2C22)%3B%0A%20%20%20%20list_node_t*%20n32%20%3D%20list_search(%26head%2C32)%3B%0A%20%20%20%20list_remove_behind(n32)%3B%0A%20%20%20%20return%200%3B%0A%7D%20">Run</a>
</div> <div class="para" id="p-504">The pointer to the first element of the list is called the <dfn class="terminology">root</dfn> of the linked list. This can be a <code class="code-inline tex2jax_ignore">list_node_t</code> with an unused <code class="code-inline tex2jax_ignore">element</code> field or a separate variable of type <code class="code-inline tex2jax_ignore">list_node_t*</code>. The first alternative makes the following code more concise but wastes the space of the unused element field; a drawback that one can typically live with.</div></section><section class="paragraphs" id="paragraphs-14"><h4 class="heading"><span class="title">Inserting an Element behind Another Element.</span></h4> <div class="para" id="p-505">Inserting an element behind another element is simple for singly-linked lists and can be done in constant time. The only thing to do is to allocate a new list node, set its next pointer to the current first list node, and set the root to the freshly inserted element.</div> <div class="para" id="p-506">When using a ‚Äúdummy‚Äù list node as the list root, the insert-behind operation can also be used to prepend an element to the list (insert it at the front). This makes using a list node for the root appealing because it saves an extra function that handles the special case for inserting at the front of the list.</div> <div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">list_node_t* list_insert_behind(list_node_t* where, int element) {
    list_node_t* n = malloc(sizeof(*n));
    n-&gt;element  = element;
    n-&gt;next     = where-&gt;next;
    where-&gt;next = n;
    return n;
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=%20struct%20list_node_t%20%7B%0A%20%20%20%20int%20element%3B%0A%20%20%20%20struct%20list_node_t*%20next%3B%0A%7D%3B%20%0Atypedef%20struct%20list_node_t%20list_node_t%3B%0A%20%20%20%20%0Alist_node_t*%20list_insert_behind(list_node_t*%20where%2C%20int%20element)%20%7B%0A%20%20%20%20list_node_t*%20n%20%3D%20malloc(sizeof(*n))%3B%0A%20%20%20%20n-%3Eelement%20%20%3D%20element%3B%0A%20%20%20%20n-%3Enext%20%20%20%20%20%3D%20where-%3Enext%3B%0A%20%20%20%20where-%3Enext%20%3D%20n%3B%0A%20%20%20%20return%20n%3B%0A%7D%0A%0Aint%20list_remove_behind(list_node_t*%20where)%20%7B%0A%20%20%20%20list_node_t*%20to_be_removed%20%3D%20where-%3Enext%3B%0A%20%20%20%20if%20(where-%3Enext%20%3D%3D%20NULL)%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20where-%3Enext%20%3D%20to_be_removed-%3Enext%3B%0A%20%20%20%20free(to_be_removed)%3B%0A%20%20%20%20return%201%3B%0A%7D%0A%0Alist_node_t*%20list_search(list_node_t*%20root%2C%20int%20value)%20%7B%0A%20%20%20%20list_node_t*%20n%20%3D%20root-%3Enext%3B%0A%20%20%20%20while(n%20!%3D%20NULL)%20%7B%0A%20%20%20%20%20%20%20%20if%20(n-%3Eelement%20%3D%3D%20value)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20n%3B%0A%20%20%20%20%20%20%20%20n%20%3D%20n-%3Enext%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20NULL%3B%0A%7D%0A%0Aint%20main()%20%7B%0A%20%20%20%20list_node_t%20head%3B%0A%20%20%20%20head.element%20%3D%2042%3B%0A%20%20%20%20head.next%20%3D%20NULL%3B%0A%20%20%20%20list_node_t*%20tail%20%3D%20%26head%3B%0A%20%20%20%20tail%20%3D%20list_insert_behind(tail%2C32)%3B%0A%20%20%20%20tail%20%3D%20list_insert_behind(tail%2C22)%3B%0A%20%20%20%20list_insert_behind(%26head%2C41)%3B%0A%20%20%20%20tail%20%3D%20list_insert_behind(tail%2C12)%3B%0A%20%20%20%20list_node_t*%20n22%20%3D%20list_search(%26head%2C22)%3B%0A%20%20%20%20list_node_t*%20n32%20%3D%20list_search(%26head%2C32)%3B%0A%20%20%20%20list_remove_behind(n32)%3B%0A%20%20%20%20return%200%3B%0A%7D%20">Run</a>
</div></section><section class="paragraphs" id="paragraphs-15"><h4 class="heading"><span class="title">Removing an Element behind Another Element.</span></h4> <div class="para" id="p-507">Removing an element from the list is equally simple: We just have to detach it from the list by redirecting the next pointer of the preceding element to the element following the one that is to be removed. Of course, we also need to free the memory allocated for the list node.</div> <div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">int list_remove_behind(list_node_t* where) {
    list_node_t* to_be_removed = where-&gt;next;
    if (where-&gt;next == NULL)
        return 0;
    where-&gt;next = to_be_removed-&gt;next;
    free(to_be_removed);
    return 1;
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=%20struct%20list_node_t%20%7B%0A%20%20%20%20int%20element%3B%0A%20%20%20%20struct%20list_node_t*%20next%3B%0A%7D%3B%20%0Atypedef%20struct%20list_node_t%20list_node_t%3B%0A%20%20%20%20%0Alist_node_t*%20list_insert_behind(list_node_t*%20where%2C%20int%20element)%20%7B%0A%20%20%20%20list_node_t*%20n%20%3D%20malloc(sizeof(*n))%3B%0A%20%20%20%20n-%3Eelement%20%20%3D%20element%3B%0A%20%20%20%20n-%3Enext%20%20%20%20%20%3D%20where-%3Enext%3B%0A%20%20%20%20where-%3Enext%20%3D%20n%3B%0A%20%20%20%20return%20n%3B%0A%7D%0A%0Aint%20list_remove_behind(list_node_t*%20where)%20%7B%0A%20%20%20%20list_node_t*%20to_be_removed%20%3D%20where-%3Enext%3B%0A%20%20%20%20if%20(where-%3Enext%20%3D%3D%20NULL)%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20where-%3Enext%20%3D%20to_be_removed-%3Enext%3B%0A%20%20%20%20free(to_be_removed)%3B%0A%20%20%20%20return%201%3B%0A%7D%0A%0Alist_node_t*%20list_search(list_node_t*%20root%2C%20int%20value)%20%7B%0A%20%20%20%20list_node_t*%20n%20%3D%20root-%3Enext%3B%0A%20%20%20%20while(n%20!%3D%20NULL)%20%7B%0A%20%20%20%20%20%20%20%20if%20(n-%3Eelement%20%3D%3D%20value)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20n%3B%0A%20%20%20%20%20%20%20%20n%20%3D%20n-%3Enext%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20NULL%3B%0A%7D%0A%0Aint%20main()%20%7B%0A%20%20%20%20list_node_t%20head%3B%0A%20%20%20%20head.element%20%3D%2042%3B%0A%20%20%20%20head.next%20%3D%20NULL%3B%0A%20%20%20%20list_node_t*%20tail%20%3D%20%26head%3B%0A%20%20%20%20tail%20%3D%20list_insert_behind(tail%2C32)%3B%0A%20%20%20%20tail%20%3D%20list_insert_behind(tail%2C22)%3B%0A%20%20%20%20list_insert_behind(%26head%2C41)%3B%0A%20%20%20%20tail%20%3D%20list_insert_behind(tail%2C12)%3B%0A%20%20%20%20list_node_t*%20n22%20%3D%20list_search(%26head%2C22)%3B%0A%20%20%20%20list_node_t*%20n32%20%3D%20list_search(%26head%2C32)%3B%0A%20%20%20%20list_remove_behind(n32)%3B%0A%20%20%20%20return%200%3B%0A%7D%20">Run</a>
</div></section><section class="paragraphs" id="paragraphs-16"><h4 class="heading"><span class="title">Finding an Element.</span></h4> <div class="para" id="p-508">Finding the list node for a certain element value (for example to check, if an element is in the list) takes linear time in worst case (in the worst case the element we are looking for is the last one in the list). The implementation traverses the list by ‚Äúchasing‚Äù the next pointers until the end of the list is reached which is indicated by a next pointer of <code class="code-inline tex2jax_ignore">NULL</code>. In C-style this can be written very compactly:</div> <div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">list_node_t* list_search(list_node_t* root, int value) {
    list_node_t* n = root-&gt;next;
    while(n != NULL) {
        if (n-&gt;element == value)
            return n;
        n = n-&gt;next;
    }
    return NULL;
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=%20struct%20list_node_t%20%7B%0A%20%20%20%20int%20element%3B%0A%20%20%20%20struct%20list_node_t*%20next%3B%0A%7D%3B%20%0Atypedef%20struct%20list_node_t%20list_node_t%3B%0A%20%20%20%20%0Alist_node_t*%20list_insert_behind(list_node_t*%20where%2C%20int%20element)%20%7B%0A%20%20%20%20list_node_t*%20n%20%3D%20malloc(sizeof(*n))%3B%0A%20%20%20%20n-%3Eelement%20%20%3D%20element%3B%0A%20%20%20%20n-%3Enext%20%20%20%20%20%3D%20where-%3Enext%3B%0A%20%20%20%20where-%3Enext%20%3D%20n%3B%0A%20%20%20%20return%20n%3B%0A%7D%0A%0Aint%20list_remove_behind(list_node_t*%20where)%20%7B%0A%20%20%20%20list_node_t*%20to_be_removed%20%3D%20where-%3Enext%3B%0A%20%20%20%20if%20(where-%3Enext%20%3D%3D%20NULL)%0A%20%20%20%20%20%20%20%20return%200%3B%0A%20%20%20%20where-%3Enext%20%3D%20to_be_removed-%3Enext%3B%0A%20%20%20%20free(to_be_removed)%3B%0A%20%20%20%20return%201%3B%0A%7D%0A%0Alist_node_t*%20list_search(list_node_t*%20root%2C%20int%20value)%20%7B%0A%20%20%20%20list_node_t*%20n%20%3D%20root-%3Enext%3B%0A%20%20%20%20while(n%20!%3D%20NULL)%20%7B%0A%20%20%20%20%20%20%20%20if%20(n-%3Eelement%20%3D%3D%20value)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20n%3B%0A%20%20%20%20%20%20%20%20n%20%3D%20n-%3Enext%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20NULL%3B%0A%7D%0A%0Aint%20main()%20%7B%0A%20%20%20%20list_node_t%20head%3B%0A%20%20%20%20head.element%20%3D%2042%3B%0A%20%20%20%20head.next%20%3D%20NULL%3B%0A%20%20%20%20list_node_t*%20tail%20%3D%20%26head%3B%0A%20%20%20%20tail%20%3D%20list_insert_behind(tail%2C32)%3B%0A%20%20%20%20tail%20%3D%20list_insert_behind(tail%2C22)%3B%0A%20%20%20%20list_insert_behind(%26head%2C41)%3B%0A%20%20%20%20tail%20%3D%20list_insert_behind(tail%2C12)%3B%0A%20%20%20%20list_node_t*%20n22%20%3D%20list_search(%26head%2C22)%3B%0A%20%20%20%20list_node_t*%20n32%20%3D%20list_search(%26head%2C32)%3B%0A%20%20%20%20list_remove_behind(n32)%3B%0A%20%20%20%20return%200%3B%0A%7D%20">Run</a>
</div> <div class="para" id="p-509">Determining the length or getting the i-th element can be implemented in a similar style.</div></section><section class="paragraphs" id="paragraphs-17"><h4 class="heading"><span class="title">Genericity.</span></h4> <div class="para" id="p-510">With respect to genericity, the linked list implementation we discussed here suffers from similar problems as the array lists discussed in the previous section: There is no way to specify the list node data structure <em class="emphasis">parametric</em> to the data type of the payload. C¬†forces us to give a concrete type like <code class="code-inline tex2jax_ignore">int</code> which we used in the discussion above. Similar to array lists, void pointer genericity can be applied, making the elements void pointers to some data.</div> <div class="para" id="p-511">Another way that is also common in practice is to remove the <code class="code-inline tex2jax_ignore">element</code> field from the list node struct and make this struct a member of the element data type like so:</div> <div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">typedef struct {
  char* name;
  char* surname;
  struct {
    int day, month, year;
  } birthday;
  list_node_t list;
} person_t;
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=%0A%20%20typedef%20struct%20%7B%0A%20%20%20%20char*%20name%3B%0A%20%20%20%20char*%20surname%3B%0A%20%20%20%20struct%20%7B%0A%20%20%20%20%20%20int%20day%2C%20month%2C%20year%3B%0A%20%20%20%20%7D%20birthday%3B%0A%20%20%20%20list_node_t%20list%3B%0A%20%20%7D%20person_t%3B%0A%20%20%20%20%20%20%20%20%20%20">Run</a>
</div> <div class="para" id="p-512">The advantage is that the list functions can be generic, i.e. independent of the payload data structure. The drawback is that the <code class="code-inline tex2jax_ignore">person_t</code> gets ‚Äúcontaminated‚Äù with the next pointer that is actually not part of a person.</div></section><section class="paragraphs" id="paragraphs-18"><h4 class="heading"><span class="title">Summary.</span></h4> <div class="para" id="p-513">Linked list have constant complexity for inserting and removing as opposed to array lists which have linear complexity for removing and <em class="emphasis">amortized</em> constant complexity for insertion. However, in contrast, the i-th element cannot be obtained in constant time in linked lists because, in general, there is no computation that takes <span class="process-math">\(i\)</span> and returns the address of the i-th list node (like address arithmetic in the array list case).</div> <div class="para" id="p-514">Linked lists have a significant practical drawback compared to array lists: Since every list node is allocated individually, the list nodes are not guaranteed to sit contiguously in memory. This makes a lot of the machinery in modern microprocessors which are optimized for processing arrays useless. So searching and inserting are typically a lot faster on array lists than on linked lists although their theoretical complexity is identical.</div> <div class="para" id="p-515">In summary, the following table sums up the differences in complexity for array and singly-linked lists:</div> <div class="tabular-box natural-width"><table class="tabular">
<tr>
<td class="l m b1 r1 l0 t0 lines">Operation</td>
<td class="l m b1 r1 l0 t0 lines">Array List</td>
<td class="l m b1 r0 l0 t0 lines">Linked List</td>
</tr>
<tr>
<td class="l m b0 r1 l0 t0 lines">Appending</td>
<td class="l m b0 r1 l0 t0 lines">amortized <span class="process-math">\(O(1)\)</span>
</td>
<td class="l m b0 r0 l0 t0 lines"><span class="process-math">\(O(1)\)</span></td>
</tr>
<tr>
<td class="l m b0 r1 l0 t0 lines">Inserting after i-th</td>
<td class="l m b0 r1 l0 t0 lines"><span class="process-math">\(O(n)\)</span></td>
<td class="l m b0 r0 l0 t0 lines"><span class="process-math">\(O(1)\)</span></td>
</tr>
<tr>
<td class="l m b0 r1 l0 t0 lines">Removing i-th</td>
<td class="l m b0 r1 l0 t0 lines"><span class="process-math">\(O(n)\)</span></td>
<td class="l m b0 r0 l0 t0 lines"><span class="process-math">\(O(1)\)</span></td>
</tr>
<tr>
<td class="l m b0 r1 l0 t0 lines">Getting pointer to i-th</td>
<td class="l m b0 r1 l0 t0 lines"><span class="process-math">\(O(1)\)</span></td>
<td class="l m b0 r0 l0 t0 lines"><span class="process-math">\(O(n)\)</span></td>
</tr>
<tr>
<td class="l m b0 r1 l0 t0 lines">Get size</td>
<td class="l m b0 r1 l0 t0 lines"><span class="process-math">\(O(1)\)</span></td>
<td class="l m b0 r0 l0 t0 lines"><span class="process-math">\(O(n)\)</span></td>
</tr>
</table></div> <div class="para" id="p-516">One issue of <em class="emphasis">singly</em> linked lists is that inserting and removing <em class="emphasis">in front</em> of a given element is not directly possible because there are only next pointers and no pointers to previous elements. This can be remedied by using doubly-linked lists which we discuss in the next section.</div></section></section><section class="subsection" id="sec-ds-dllists"><h3 class="heading hide-type">
<span class="type">Subsection</span> <span class="codenumber">5.1.3</span> <span class="title">Doubly-Linked Lists</span>
</h3>
<div class="para" id="p-517">As mentioned in the previous section, singly-linked lists have the problem that inserting before a given list node is complicated because there are no back pointers. Doubly-linked lists provide these.</div>
<div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c"> struct list_node_t {
    int element;
    struct list_node_t* prev;
    struct list_node_t* next;
};
typedef struct list_node_t list_node_t;

list_node_t* list_root_init(list_node_t* n) {
    n-&gt;next = n;
    n-&gt;prev = n;
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=%20struct%20list_node_t%20%7B%0A%20%20%20%20int%20element%3B%0A%20%20%20%20struct%20list_node_t*%20prev%3B%0A%20%20%20%20struct%20list_node_t*%20next%3B%0A%7D%3B%0Atypedef%20struct%20list_node_t%20list_node_t%3B%0A%0Alist_node_t*%20list_root_init(list_node_t*%20n)%20%7B%0A%20%20%20%20n-%3Enext%20%3D%20n%3B%0A%20%20%20%20n-%3Eprev%20%3D%20n%3B%0A%7D%0A%0Alist_node_t*%20list_append(list_node_t*%20where%2C%20int%20element)%20%7B%0A%20%20%20%20list_node_t*%20n%20%3D%20malloc(sizeof(*n))%3B%0A%20%20%20%20n-%3Eelement%20%20%20%20%3D%20element%3B%0A%20%20%20%20n-%3Enext%20%20%20%20%20%20%20%3D%20where-%3Enext%3B%0A%20%20%20%20n-%3Eprev%20%20%20%20%20%20%20%3D%20where%3B%0A%20%20%20%20where-%3Enext%20%20%20%3D%20n%3B%0A%20%20%20%20n-%3Enext-%3Eprev%20%3D%20n%3B%0A%20%20%20%20return%20n%3B%0A%7D%0A%0Avoid%20list_remove(list_node_t*%20n)%20%7B%0A%20%20%20%20n-%3Enext-%3Eprev%20%3D%20n-%3Eprev%3B%0A%20%20%20%20n-%3Eprev-%3Enext%20%3D%20n-%3Enext%3B%0A%20%20%20%20free(n)%3B%0A%7D%0A%0Alist_node_t*%20list_search(list_node_t*%20root%2C%20int%20value)%20%7B%0A%20%20%20%20list_node_t*%20n%20%3D%20root-%3Enext%3B%0A%20%20%20%20while(n%20!%3D%20root)%20%7B%0A%20%20%20%20%20%20%20%20if%20(n-%3Eelement%20%3D%3D%20value)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20n%3B%0A%20%20%20%20%20%20%20%20n%20%3D%20n-%3Enext%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20NULL%3B%0A%7D%0A%0Aint%20main()%20%7B%0A%20%20%20%20list_node_t%20head%3B%0A%20%20%20%20list_root_init(%26head)%3B%0A%20%20%20%20list_node_t*%20tail%20%3D%20%26head%3B%0A%20%20%20%20tail%20%3D%20list_append(tail%2C%2032)%3B%0A%20%20%20%20tail%20%3D%20list_append(tail%2C%2022)%3B%0A%20%20%20%20list_append(%26head%2C%2041)%3B%0A%20%20%20%20tail%20%3D%20list_append(tail%2C%2012)%3B%0A%20%20%20%20list_node_t*%20n%20%3D%20list_search(%26head%2C%2022)%3B%0A%20%20%20%20list_remove(n)%3B%0A%20%20%20%20return%200%3B%0A%7D%20">Run</a>
</div>
<div class="para" id="p-518">In the same way as with singly-linked lists, using a dummy list node for the list root is advisable because it keeps the algorithms simpler. In contrast however, we organize the list as a <em class="emphasis">ring</em> such that if the prev pointer of an element is the root that element is the first element in the list and analogously if the next pointer of an element is the root, that element is the last element. Initially, the root's next and prev pointer point to the root itself. This way, inserting and removing do not need special case handling for the first and last element of the list. </div>
<div class="para" id="p-519">We will briefly discuss insertion and removal. Searching and the other simple algorithms are similar to singly-linked lists.</div>
<section class="paragraphs" id="paragraphs-19"><h4 class="heading"><span class="title">Insertion.</span></h4> <div class="para" id="p-520">Inserting into a doubly-linked list involves entering a freshly allocated list node into the link structure. Note that it doesn't really matter if we implement appending (inserting behind a node) or prepending (inserting before a node) because prepending to a node becomes appending to its predecessor which always always exists if we use a dummy element as a root because the doubly-linked list then effectively becomes a ring.</div> <div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">list_node_t* list_append(list_node_t* where, int element) {
    list_node_t* n = malloc(sizeof(*n));
    n-&gt;element    = element;
    n-&gt;next       = where-&gt;next;
    n-&gt;prev       = where;
    where-&gt;next   = n;
    n-&gt;next-&gt;prev = n;
    return n;
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=%20struct%20list_node_t%20%7B%0A%20%20%20%20int%20element%3B%0A%20%20%20%20struct%20list_node_t*%20prev%3B%0A%20%20%20%20struct%20list_node_t*%20next%3B%0A%7D%3B%0Atypedef%20struct%20list_node_t%20list_node_t%3B%0A%0Alist_node_t*%20list_root_init(list_node_t*%20n)%20%7B%0A%20%20%20%20n-%3Enext%20%3D%20n%3B%0A%20%20%20%20n-%3Eprev%20%3D%20n%3B%0A%7D%0A%0Alist_node_t*%20list_append(list_node_t*%20where%2C%20int%20element)%20%7B%0A%20%20%20%20list_node_t*%20n%20%3D%20malloc(sizeof(*n))%3B%0A%20%20%20%20n-%3Eelement%20%20%20%20%3D%20element%3B%0A%20%20%20%20n-%3Enext%20%20%20%20%20%20%20%3D%20where-%3Enext%3B%0A%20%20%20%20n-%3Eprev%20%20%20%20%20%20%20%3D%20where%3B%0A%20%20%20%20where-%3Enext%20%20%20%3D%20n%3B%0A%20%20%20%20n-%3Enext-%3Eprev%20%3D%20n%3B%0A%20%20%20%20return%20n%3B%0A%7D%0A%0Avoid%20list_remove(list_node_t*%20n)%20%7B%0A%20%20%20%20n-%3Enext-%3Eprev%20%3D%20n-%3Eprev%3B%0A%20%20%20%20n-%3Eprev-%3Enext%20%3D%20n-%3Enext%3B%0A%20%20%20%20free(n)%3B%0A%7D%0A%0Alist_node_t*%20list_search(list_node_t*%20root%2C%20int%20value)%20%7B%0A%20%20%20%20list_node_t*%20n%20%3D%20root-%3Enext%3B%0A%20%20%20%20while(n%20!%3D%20root)%20%7B%0A%20%20%20%20%20%20%20%20if%20(n-%3Eelement%20%3D%3D%20value)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20n%3B%0A%20%20%20%20%20%20%20%20n%20%3D%20n-%3Enext%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20NULL%3B%0A%7D%0A%0Aint%20main()%20%7B%0A%20%20%20%20list_node_t%20head%3B%0A%20%20%20%20list_root_init(%26head)%3B%0A%20%20%20%20list_node_t*%20tail%20%3D%20%26head%3B%0A%20%20%20%20tail%20%3D%20list_append(tail%2C%2032)%3B%0A%20%20%20%20tail%20%3D%20list_append(tail%2C%2022)%3B%0A%20%20%20%20list_append(%26head%2C%2041)%3B%0A%20%20%20%20tail%20%3D%20list_append(tail%2C%2012)%3B%0A%20%20%20%20list_node_t*%20n%20%3D%20list_search(%26head%2C%2022)%3B%0A%20%20%20%20list_remove(n)%3B%0A%20%20%20%20return%200%3B%0A%7D%20">Run</a>
</div></section><section class="paragraphs" id="paragraphs-20"><h4 class="heading"><span class="title">Removal.</span></h4> <div class="para" id="p-521">When removing a node, we specify the node directly and dismount it from the list by setting the next pointer of its predecessor to its next node and the previous pointer of its next element to its previous element:</div> <div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">void list_remove(list_node_t* n) {
    n-&gt;next-&gt;prev = n-&gt;prev;
    n-&gt;prev-&gt;next = n-&gt;next;
    free(n);
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=%20struct%20list_node_t%20%7B%0A%20%20%20%20int%20element%3B%0A%20%20%20%20struct%20list_node_t*%20prev%3B%0A%20%20%20%20struct%20list_node_t*%20next%3B%0A%7D%3B%0Atypedef%20struct%20list_node_t%20list_node_t%3B%0A%0Alist_node_t*%20list_root_init(list_node_t*%20n)%20%7B%0A%20%20%20%20n-%3Enext%20%3D%20n%3B%0A%20%20%20%20n-%3Eprev%20%3D%20n%3B%0A%7D%0A%0Alist_node_t*%20list_append(list_node_t*%20where%2C%20int%20element)%20%7B%0A%20%20%20%20list_node_t*%20n%20%3D%20malloc(sizeof(*n))%3B%0A%20%20%20%20n-%3Eelement%20%20%20%20%3D%20element%3B%0A%20%20%20%20n-%3Enext%20%20%20%20%20%20%20%3D%20where-%3Enext%3B%0A%20%20%20%20n-%3Eprev%20%20%20%20%20%20%20%3D%20where%3B%0A%20%20%20%20where-%3Enext%20%20%20%3D%20n%3B%0A%20%20%20%20n-%3Enext-%3Eprev%20%3D%20n%3B%0A%20%20%20%20return%20n%3B%0A%7D%0A%0Avoid%20list_remove(list_node_t*%20n)%20%7B%0A%20%20%20%20n-%3Enext-%3Eprev%20%3D%20n-%3Eprev%3B%0A%20%20%20%20n-%3Eprev-%3Enext%20%3D%20n-%3Enext%3B%0A%20%20%20%20free(n)%3B%0A%7D%0A%0Alist_node_t*%20list_search(list_node_t*%20root%2C%20int%20value)%20%7B%0A%20%20%20%20list_node_t*%20n%20%3D%20root-%3Enext%3B%0A%20%20%20%20while(n%20!%3D%20root)%20%7B%0A%20%20%20%20%20%20%20%20if%20(n-%3Eelement%20%3D%3D%20value)%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20n%3B%0A%20%20%20%20%20%20%20%20n%20%3D%20n-%3Enext%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20NULL%3B%0A%7D%0A%0Aint%20main()%20%7B%0A%20%20%20%20list_node_t%20head%3B%0A%20%20%20%20list_root_init(%26head)%3B%0A%20%20%20%20list_node_t*%20tail%20%3D%20%26head%3B%0A%20%20%20%20tail%20%3D%20list_append(tail%2C%2032)%3B%0A%20%20%20%20tail%20%3D%20list_append(tail%2C%2022)%3B%0A%20%20%20%20list_append(%26head%2C%2041)%3B%0A%20%20%20%20tail%20%3D%20list_append(tail%2C%2012)%3B%0A%20%20%20%20list_node_t*%20n%20%3D%20list_search(%26head%2C%2022)%3B%0A%20%20%20%20list_remove(n)%3B%0A%20%20%20%20return%200%3B%0A%7D%20">Run</a>
</div></section><article class="exercise exercise-like" id="exercise-14"><a href="" data-knowl="" class="id-ref exercise-knowl original" data-refid="hk-exercise-14"><h4 class="heading">
<span class="type">Checkpoint</span><span class="space"> </span><span class="codenumber">5.1.3</span><span class="period">.</span><span class="space"> </span><span class="title">Doubly Linked Lists.</span>
</h4></a></article><div class="hidden-content tex2jax_ignore" id="hk-exercise-14"><article class="exercise exercise-like"> <div class="para logical" id="p-522">
<div class="para">Implement insertion and removal for doubly linked lists without using a dummy list element. Make sure that:</div>
<ul class="disc">
<li id="li-55"><div class="para" id="p-derived-li-55">
<code class="code-inline tex2jax_ignore">prev</code> of the first element and <code class="code-inline tex2jax_ignore">next</code> of the last element are both always <code class="code-inline tex2jax_ignore">NULL</code> (in contrast to the implementation <em class="emphasis">as a ring</em> in the lecture notes).</div></li>
<li id="li-56"><div class="para" id="p-derived-li-56">
<code class="code-inline tex2jax_ignore">head</code> always points to the first element of the list and <code class="code-inline tex2jax_ignore">tail</code> to the last unless the list is empty, in that case both should be <code class="code-inline tex2jax_ignore">NULL</code> .</div></li>
</ul>
<div class="para">Use the following struct and implement the five declared functions.</div>
</div> <div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">#include &lt;stdlib.h&gt;
#include &lt;assert.h&gt;

struct list_node_t {
    int element;
    struct list_node_t* prev;
    struct list_node_t* next;
};
typedef struct list_node_t list_node_t;

list_node_t* list_root_init(list_node_t** head, list_node_t** tail) {
    *head = NULL;
    *tail = NULL;
}
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=%23include%20%3Cstdlib.h%3E%0A%23include%20%3Cassert.h%3E%0A%0Astruct%20list_node_t%20%7B%0A%20%20%20%20int%20element%3B%0A%20%20%20%20struct%20list_node_t*%20prev%3B%0A%20%20%20%20struct%20list_node_t*%20next%3B%0A%7D%3B%0Atypedef%20struct%20list_node_t%20list_node_t%3B%0A%0Alist_node_t*%20list_root_init(list_node_t**%20head%2C%20list_node_t**%20tail)%20%7B%0A%20%20%20%20*head%20%3D%20NULL%3B%0A%20%20%20%20*tail%20%3D%20NULL%3B%0A%7D%0A%0Alist_node_t*%20list_prepend_at_head(list_node_t**%20head%2C%20list_node_t**%20tail%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20int%20element)%20%7B%0A%20%20%20%20list_node_t*%20n%20%3D%20malloc(sizeof(*n))%3B%0A%20%20%20%20n-%3Eelement%20%20%20%20%20%3D%20element%3B%0A%20%20%20%20n-%3Eprev%20%20%20%20%20%20%20%20%3D%20NULL%3B%0A%20%20%20%20n-%3Enext%20%20%20%20%20%20%20%20%3D%20*head%3B%20%2F%2F%20no%20matter%20whether%20%60*head%20%3D%3D%20NULL%60%0A%20%20%20%20if%20(*head%20!%3D%20NULL)%20%7B%0A%20%20%20%20%20%20%20%20(*head)-%3Eprev%20%3D%20n%3B%0A%20%20%20%20%7D%20else%20%7B%20%2F%2F%20list%20was%20empty%2C%20now%20singleton%0A%20%20%20%20%20%20%20%20assert(*tail%20%3D%3D%20NULL)%3B%0A%20%20%20%20%20%20%20%20*tail%20%3D%20n%3B%0A%20%20%20%20%7D%0A%20%20%20%20*head%20%3D%20n%3B%20%2F%2F%20no%20matter%20whether%20%60*head%20%3D%3D%20NULL%60%0A%20%20%20%20return%20n%3B%0A%7D%0A%0Alist_node_t*%20list_append_at_tail(list_node_t**%20head%2C%20list_node_t**%20tail%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20int%20element)%20%7B%0A%20%20%20%20list_node_t*%20n%20%3D%20malloc(sizeof(*n))%3B%0A%20%20%20%20n-%3Eelement%20%20%20%20%20%3D%20element%3B%0A%20%20%20%20n-%3Eprev%20%20%20%20%20%20%20%20%3D%20*tail%3B%20%2F%2F%20no%20matter%20wheter%20%60*tail%20%3D%3D%20NULL%60%0A%20%20%20%20n-%3Enext%20%20%20%20%20%20%20%20%3D%20NULL%3B%0A%20%20%20%20if%20(*tail%20!%3D%20NULL)%20%7B%0A%20%20%20%20%20%20%20%20(*tail)-%3Enext%20%3D%20n%3B%0A%20%20%20%20%7D%20else%20%7B%20%2F%2F%20list%20was%20empty%2C%20now%20singleton%0A%20%20%20%20%20%20%20%20assert(*head%20%3D%3D%20NULL)%3B%0A%20%20%20%20%20%20%20%20*head%20%3D%20n%3B%0A%20%20%20%20%7D%0A%20%20%20%20*tail%20%3D%20n%3B%0A%20%20%20%20return%20n%3B%0A%7D%0A%0Alist_node_t*%20list_prepend_at(list_node_t**%20head%2C%20list_node_t**%20tail%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20list_node_t*%20where%2C%20int%20element)%20%7B%0A%20%20%20%20if%20(where-%3Eprev%20%3D%3D%20NULL)%20%7B%20%2F%2F%20where%20%3D%3D%20*head%0A%20%20%20%20%20%20%20%20return%20list_prepend_at_head(head%2C%20tail%2C%20element)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20list_node_t*%20n%20%3D%20malloc(sizeof(*n))%3B%0A%20%20%20%20%20%20%20%20n-%3Eelement%20%20%20%20%20%3D%20element%3B%0A%20%20%20%20%20%20%20%20n-%3Eprev%20%20%20%20%20%20%20%20%3D%20where-%3Eprev%3B%0A%20%20%20%20%20%20%20%20n-%3Enext%20%20%20%20%20%20%20%20%3D%20where%3B%0A%20%20%20%20%20%20%20%20where-%3Eprev%20%20%20%20%3D%20n%3B%0A%20%20%20%20%20%20%20%20where-%3Eprev-%3Enext%20%3D%20n%3B%0A%20%20%20%20%20%20%20%20return%20n%3B%0A%20%20%20%20%7D%0A%7D%0A%0Alist_node_t*%20list_append_at(list_node_t**%20head%2C%20list_node_t**%20tail%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20list_node_t*%20where%2C%20int%20element)%20%7B%0A%20%20%20%20if%20(where-%3Enext%20%3D%3D%20NULL)%20%7B%20%2F%2F%20where%20%3D%3D%20*tail%0A%20%20%20%20%20%20%20%20return%20list_append_at_tail(head%2C%20tail%2C%20element)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20return%20list_prepend_at(head%2C%20tail%2C%20where-%3Enext%2C%20element)%3B%0A%20%20%20%20%7D%0A%7D%0A%0Avoid%20list_remove(list_node_t**%20head%2C%20list_node_t**%20tail%2C%20list_node_t*%20n)%20%7B%0A%20%20%20%20if%20(n-%3Eprev%20!%3D%20NULL)%20%7B%0A%20%20%20%20%20%20%20%20n-%3Eprev-%3Enext%20%3D%20n-%3Enext%3B%0A%20%20%20%20%7D%20else%20%7B%20%2F%2F%20n%20%3D%20*head%0A%20%20%20%20%20%20%20%20*head%20%3D%20n-%3Enext%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20(n-%3Enext%20!%3D%20NULL)%20%7B%0A%20%20%20%20%20%20%20%20n-%3Enext-%3Eprev%20%3D%20n-%3Eprev%3B%0A%20%20%20%20%7D%20else%20%7B%20%2F%2F%20n%20%3D%20*tail%0A%20%20%20%20%20%20%20%20*tail%20%3D%20n-%3Eprev%3B%0A%20%20%20%20%7D%0A%20%20%20%20free(n)%3B%0A%7D%0A%0Aint%20main()%20%7B%0A%20%20%20%20return%200%3B%0A%7D">Run</a>
</div> <div class="para" id="p-523">Compare your implementation with the one in the lecture notes:</div> <ul class="disc">
<li id="li-57"><div class="para" id="p-derived-li-57">Why do you need the arguments <code class="code-inline tex2jax_ignore">head</code> and <code class="code-inline tex2jax_ignore">tail</code> in contrast to the implementation as a ring, where the root element is not passed to in the functions for insertion and removal?</div></li>
<li id="li-58"><div class="para" id="p-derived-li-58">Why do you need a separate function to prepend an element, but don't need it in the other implementation?</div></li>
<li id="li-59"><div class="para" id="p-derived-li-59">Why do you need functions for prepending (appending) at head (tail)?</div></li>
</ul>
<div class="debug">202408041548</div>
<div class="solutions">
<a href="" data-knowl="" class="id-ref solution-knowl original" data-refid="hk-solution-7" id="solution-7"><span class="type">Solution</span><span class="period">.</span></a><div class="hidden-content tex2jax_ignore" id="hk-solution-7"><div class="solution solution-like">
<div class="code-box" style="width: 100%; margin-left: 0%; margin-right: 0%;">
<pre class="program"><code class="language-c">        struct list_node_t {
            int element;
            struct list_node_t* prev;
            struct list_node_t* next;
        };
        typedef struct list_node_t list_node_t;

        list_node_t* list_root_init(list_node_t** head, list_node_t** tail) {
            *head = NULL;
            *tail = NULL;
        }

        list_node_t* list_prepend_at_head(list_node_t** head, list_node_t** tail,
                                          int element) {
</code></pre>
<a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" style="margin-top:.6em;color: var(--bodytitle);" target="_blank" href="https://prog2.de/book/external/code/c_codecast.html?autocompile=true&amp;code=%0A%20%20%20%20%20%20%20%20struct%20list_node_t%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20int%20element%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20struct%20list_node_t*%20prev%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20struct%20list_node_t*%20next%3B%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20typedef%20struct%20list_node_t%20list_node_t%3B%0A%0A%20%20%20%20%20%20%20%20list_node_t*%20list_root_init(list_node_t**%20head%2C%20list_node_t**%20tail)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20*head%20%3D%20NULL%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20*tail%20%3D%20NULL%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20list_node_t*%20list_prepend_at_head(list_node_t**%20head%2C%20list_node_t**%20tail%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20int%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20list_node_t*%20n%20%3D%20malloc(sizeof(*n))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20n-%3Eelement%20%20%20%20%20%3D%20element%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20n-%3Eprev%20%20%20%20%20%20%20%20%3D%20NULL%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20n-%3Enext%20%20%20%20%20%20%20%20%3D%20*head%3B%20%2F%2F%20no%20matter%20whether%20%60*head%20%3D%3D%20NULL%60%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(*head%20!%3D%20NULL)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(*head)-%3Eprev%20%3D%20n%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20%2F%2F%20list%20was%20empty%2C%20now%20singleton%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20assert(*tail%20%3D%3D%20NULL)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20*tail%20%3D%20n%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20*head%20%3D%20n%3B%20%2F%2F%20no%20matter%20whether%20%60*head%20%3D%3D%20NULL%60%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20n%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20list_node_t*%20list_append_at_tail(list_node_t**%20head%2C%20list_node_t**%20tail%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20int%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20list_node_t*%20n%20%3D%20malloc(sizeof(*n))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20n-%3Eelement%20%20%20%20%20%3D%20element%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20n-%3Eprev%20%20%20%20%20%20%20%20%3D%20*tail%3B%20%2F%2F%20no%20matter%20wheter%20%60*tail%20%3D%3D%20NULL%60%0A%20%20%20%20%20%20%20%20%20%20%20%20n-%3Enext%20%20%20%20%20%20%20%20%3D%20NULL%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(*tail%20!%3D%20NULL)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20(*tail)-%3Enext%20%3D%20n%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20%2F%2F%20list%20was%20empty%2C%20now%20singleton%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20assert(*head%20%3D%3D%20NULL)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20*head%20%3D%20n%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20*tail%20%3D%20n%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20n%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20list_node_t*%20list_prepend_at(list_node_t**%20head%2C%20list_node_t**%20tail%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20list_node_t*%20where%2C%20int%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(where-%3Eprev%20%3D%3D%20NULL)%20%7B%20%2F%2F%20where%20%3D%3D%20*head%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20list_prepend_at_head(head%2C%20tail%2C%20element)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20list_node_t*%20n%20%3D%20malloc(sizeof(*n))%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20n-%3Eelement%20%20%20%20%20%3D%20element%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20n-%3Eprev%20%20%20%20%20%20%20%20%3D%20where-%3Eprev%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20n-%3Enext%20%20%20%20%20%20%20%20%3D%20where%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20where-%3Eprev%20%20%20%20%3D%20n%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20where-%3Eprev-%3Enext%20%3D%20n%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20n%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20list_node_t*%20list_append_at(list_node_t**%20head%2C%20list_node_t**%20tail%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20list_node_t*%20where%2C%20int%20element)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(where-%3Enext%20%3D%3D%20NULL)%20%7B%20%2F%2F%20where%20%3D%3D%20*tail%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20list_append_at_tail(head%2C%20tail%2C%20element)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20list_prepend_at(head%2C%20tail%2C%20where-%3Enext%2C%20element)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20void%20list_remove(list_node_t**%20head%2C%20list_node_t**%20tail%2C%20list_node_t*%20n)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(n-%3Eprev%20!%3D%20NULL)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20n-%3Eprev-%3Enext%20%3D%20n-%3Enext%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20%2F%2F%20n%20%3D%20*head%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20*head%20%3D%20n-%3Enext%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20(n-%3Enext%20!%3D%20NULL)%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20n-%3Enext-%3Eprev%20%3D%20n-%3Eprev%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20%2F%2F%20n%20%3D%20*tail%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20*tail%20%3D%20n-%3Eprev%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20free(n)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20">Run</a>
</div> <ul class="disc">
<li id="li-60"><div class="para" id="p-derived-li-60">The dummy list node in the other implementation is the analog to the <code class="code-inline tex2jax_ignore">head</code> and <code class="code-inline tex2jax_ignore">tail</code> pointers in this one. But there the first and last list element have pointers to the dummy node, thus it is accessible from within the list. This is not the case when the first and last elements point to <code class="code-inline tex2jax_ignore">NULL</code>, so we have to pass them as double pointers to be able to change them appropriately.</div></li>
<li id="li-61"><div class="para" id="p-derived-li-61">In the implementation as a ring we can always just append it to the previous list node instead of prepending (or vice versa: instead of appending we could prepend to the next node). Here, the previous (or next) node does not necessarily exist, so there has to be some case distinction.</div></li>
<li id="li-62"><div class="para" id="p-derived-li-62">Appending to the dummy node is equivalent to <code class="code-inline tex2jax_ignore">list_prepend_at_head</code> and prepending to the dummy node is equivalent to <code class="code-inline tex2jax_ignore">list_append_at_tail</code>. Without (one of) these functions it would not be possible to add the first element to an empty list.</div></li>
</ul>
</div></div>
</div></article></div></section></section></div>
<div class="ptx-content-footer">
<input xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" id="toggle" name="darkmode" class="toggle save-cb-state" type="checkbox"><a class="previous-button button" href="sec-c-ds.html" title="Previous"><span class="icon">&lt;</span><span class="name">Prev</span></a><a class="top-button button" href="#" title="Top"><span class="icon">^</span><span class="name">Top</span></a><a class="next-button button" href="sec-ds-trees.html" title="Next"><span class="name">Next</span><span class="icon">&gt;</span></a>
</div></main>
</div>
<div id="ptx-page-footer">
<a class="pretext-link" href="https://pretextbook.org" title="PreTeXt"><div class="logo"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="338 3000 8772 6866"><g style="stroke-width:.025in; stroke:black; fill:none"><polyline points="472,3590 472,9732 " style="stroke:#000000;stroke-width:174; stroke-linejoin:miter; stroke-linecap:round; "></polyline><path style="stroke:#000000;stroke-width:126;stroke-linecap:butt;" d="M 4724,9448 A 4660 4660  0  0  1  8598  9259"></path><path style="stroke:#000000;stroke-width:174;stroke-linecap:butt;" d="M 4488,9685 A 4228 4228  0  0  0   472  9732"></path><path style="stroke:#000000;stroke-width:126;stroke-linecap:butt;" d="M 4724,3590 A 4241 4241  0  0  1  8598  3496"></path><path style="stroke:#000000;stroke-width:126;stroke-linecap:round;" d="M 850,3496  A 4241 4241  0  0  1  4724  3590"></path><path style="stroke:#000000;stroke-width:126;stroke-linecap:round;" d="M 850,9259  A 4507 4507  0  0  1  4724  9448"></path><polyline points="5385,4299 4062,8125" style="stroke:#000000;stroke-width:300; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="8598,3496 8598,9259" style="stroke:#000000;stroke-width:126; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="850,3496 850,9259" style="stroke:#000000;stroke-width:126; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="4960,9685 4488,9685" style="stroke:#000000;stroke-width:174; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="3070,4582 1889,6141 3070,7700" style="stroke:#000000;stroke-width:300; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="6418,4582 7600,6141 6418,7700" style="stroke:#000000;stroke-width:300; stroke-linejoin:miter; stroke-linecap:round;"></polyline><polyline points="8976,3590 8976,9732" style="stroke:#000000;stroke-width:174; stroke-linejoin:miter; stroke-linecap:round;"></polyline><path style="stroke:#000000;stroke-width:174;stroke-linecap:butt;" d="M 4960,9685 A 4228 4228  0  0  1  8976  9732"></path></g></svg></div></a><a xmlns:mb="https://pretextbook.org/" xmlns:msxsl="urn:schemas-microsoft-com:xslt" class="runestone-link" href="https://cdltools.cs.uni-saarland.de/prog2interpreter/playground" title="CDL Programming Tools"><img class="logo" src="https://www.gravatar.com/avatar/f76d08beeac8604f40bdc5550339aeab?s=256"></a><a class="mathjax-link" href="https://www.mathjax.org" title="MathJax"><img class="logo" src="https://www.mathjax.org/badge/badge-square-2.png"></a>
</div>
<script src="external/custom.js"></script><script src="external/prism-line-numbers.js"></script>
</body>
</html>
